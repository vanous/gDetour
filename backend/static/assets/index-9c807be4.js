var ds=Object.defineProperty;var hs=(e,t,n)=>t in e?ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ki=(e,t,n)=>(hs(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function oe(){}function ke(e,t){for(const n in t)e[n]=t[n];return e}function Xr(e){return e()}function _o(){return Object.create(null)}function Ie(e){e.forEach(Xr)}function Ne(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Vr(e,t){return e!=e?t==t:e!==t}function gs(e){return Object.keys(e).length===0}function yn(e,...t){if(e==null){for(const i of t)i(void 0);return oe}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function x(e){let t;return yn(e,n=>t=n)(),t}function Q(e,t,n){e.$$.on_destroy.push(yn(t,n))}function Ke(e,t,n,i){if(e){const o=Yr(e,t,n,i);return e[0](o)}}function Yr(e,t,n,i){return e[1]&&i?ke(n.ctx.slice(),e[1](i(t))):n.ctx}function Fe(e,t,n,i){if(e[2]&&i){const o=e[2](i(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(t.dirty.length,o.length);for(let l=0;l<s;l+=1)r[l]=t.dirty[l]|o[l];return r}return t.dirty|o}return t.dirty}function Ze(e,t,n,i,o,r){if(o){const s=Yr(t,n,i,r);e.p(s,o)}}function qe(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function Qe(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Me(e,t){const n={};t=new Set(t);for(const i in e)!t.has(i)&&i[0]!=="$"&&(n[i]=e[i]);return n}function ms(e){const t={};for(const n in e)t[n]=!0;return t}function yo(e){return e??""}function nn(e,t,n){return e.set(n),t}function We(e){return e&&Ne(e.destroy)?e.destroy:oe}const _s=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function W(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function X(e){e.parentNode&&e.parentNode.removeChild(e)}function Jt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function G(e){return document.createElement(e)}function Ee(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ye(e){return document.createTextNode(e)}function le(){return ye(" ")}function xe(){return ye("")}function se(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const ys=["width","height"];function on(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)t[i]==null?e.removeAttribute(i):i==="style"?e.style.cssText=t[i]:i==="__value"?e.value=e[i]=t[i]:n[i]&&n[i].set&&ys.indexOf(i)===-1?e[i]=t[i]:w(e,i,t[i])}function bs(e){return Array.from(e.childNodes)}function Te(e,t){t=""+t,e.data!==t&&(e.data=t)}function Ve(e,t){e.value=t??""}function he(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function je(e,t,n){for(let i=0;i<e.options.length;i+=1){const o=e.options[i];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function jt(e){const t=e.querySelector(":checked");return t&&t.__value}let An;function ws(){if(An===void 0){An=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{An=!0}}return An}function ps(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=G("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=ws();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=se(window,"message",s=>{s.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=se(i.contentWindow,"resize",t),t()}),W(e,i),()=>{(o||r&&i.contentWindow)&&r(),X(i)}}function ce(e,t,n){e.classList.toggle(t,!!n)}function ks(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}function qn(e,t){return new e(t)}let bn;function _n(e){bn=e}function fn(){if(!bn)throw new Error("Function called outside component initialization");return bn}function wt(e){fn().$$.on_mount.push(e)}function Lr(e){fn().$$.on_destroy.push(e)}function ai(){const e=fn();return(t,n,{cancelable:i=!1}={})=>{const o=e.$$.callbacks[t];if(o){const r=ks(t,n,{cancelable:i});return o.slice().forEach(s=>{s.call(e,r)}),!r.defaultPrevented}return!0}}function Un(e,t){return fn().$$.context.set(e,t),t}function Gn(e){return fn().$$.context.get(e)}function vs(e){return fn().$$.context.has(e)}function we(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const Ut=[],rn=[];let Qt=[];const Di=[],Ss=Promise.resolve();let Ai=!1;function Es(){Ai||(Ai=!0,Ss.then(Rr))}function at(e){Qt.push(e)}function Cs(e){Di.push(e)}const vi=new Set;let Zt=0;function Rr(){if(Zt!==0)return;const e=bn;do{try{for(;Zt<Ut.length;){const t=Ut[Zt];Zt++,_n(t),Ms(t.$$)}}catch(t){throw Ut.length=0,Zt=0,t}for(_n(null),Ut.length=0,Zt=0;rn.length;)rn.pop()();for(let t=0;t<Qt.length;t+=1){const n=Qt[t];vi.has(n)||(vi.add(n),n())}Qt.length=0}while(Ut.length);for(;Di.length;)Di.pop()();Ai=!1,vi.clear(),_n(e)}function Ms(e){if(e.fragment!==null){e.update(),Ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(at)}}function Ps(e){const t=[],n=[];Qt.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),Qt=t}const Wn=new Set;let Tt;function Ye(){Tt={r:0,c:[],p:Tt}}function Le(){Tt.r||Ie(Tt.c),Tt=Tt.p}function R(e,t){e&&e.i&&(Wn.delete(e),e.i(t))}function Z(e,t,n,i){if(e&&e.o){if(Wn.has(e))return;Wn.add(e),Tt.c.push(()=>{Wn.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function Xe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ui(e,t){Z(e,1,1,()=>{t.delete(e.key)})}function Gi(e,t,n,i,o,r,s,l,u,a,c,d){let f=e.length,h=r.length,m=f;const _={};for(;m--;)_[e[m].key]=m;const b=[],g=new Map,p=new Map,y=[];for(m=h;m--;){const T=d(o,r,m),z=n(T);let D=s.get(z);D?i&&y.push(()=>D.p(T,t)):(D=a(z,T),D.c()),g.set(z,b[m]=D),z in _&&p.set(z,Math.abs(m-_[z]))}const S=new Set,N=new Set;function F(T){R(T,1),T.m(l,c),s.set(T.key,T),c=T.first,h--}for(;f&&h;){const T=b[h-1],z=e[f-1],D=T.key,Y=z.key;T===z?(c=T.first,f--,h--):g.has(Y)?!s.has(D)||S.has(D)?F(T):N.has(Y)?f--:p.get(D)>p.get(Y)?(N.add(D),F(T)):(S.add(Y),f--):(u(z,s),f--)}for(;f--;){const T=e[f];g.has(T.key)||u(T,s)}for(;h;)F(b[h-1]);return Ie(y),b}function Mt(e,t){const n={},i={},o={$$scope:1};let r=e.length;for(;r--;){const s=e[r],l=t[r];if(l){for(const u in s)u in l||(i[u]=1);for(const u in l)o[u]||(n[u]=l[u],o[u]=1);e[r]=l}else for(const u in s)o[u]=1}for(const s in i)s in n||(n[s]=void 0);return n}function wn(e){return typeof e=="object"&&e!==null?e:{}}function Ns(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function ie(e){e&&e.c()}function te(e,t,n){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),at(()=>{const r=e.$$.on_mount.map(Xr).filter(Ne);e.$$.on_destroy?e.$$.on_destroy.push(...r):Ie(r),e.$$.on_mount=[]}),o.forEach(at)}function ne(e,t){const n=e.$$;n.fragment!==null&&(Ps(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Os(e,t){e.$$.dirty[0]===-1&&(Ut.push(e),Es(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,n,i,o,r,s,l=[-1]){const u=bn;_n(e);const a=e.$$={fragment:null,ctx:[],props:r,update:oe,not_equal:o,bound:_o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:_o(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};s&&s(a.root);let c=!1;if(a.ctx=n?n(e,t.props||{},(d,f,...h)=>{const m=h.length?h[0]:f;return a.ctx&&o(a.ctx[d],a.ctx[d]=m)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](m),c&&Os(e,d)),f}):[],a.update(),c=!0,Ie(a.before_update),a.fragment=i?i(a.ctx):!1,t.target){if(t.hydrate){const d=bs(t.target);a.fragment&&a.fragment.l(d),d.forEach(X)}else a.fragment&&a.fragment.c();t.intro&&R(e.$$.fragment),te(e,t.target,t.anchor),Rr()}_n(u)}class ae{constructor(){ki(this,"$$");ki(this,"$$set")}$destroy(){ne(this,1),this.$destroy=oe}$on(t,n){if(!Ne(n))return oe;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!gs(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const zs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zs);function bo(e){let t,n;return{c(){t=G("div"),n=ye(e[1])},m(i,o){L(i,t,o),W(t,n)},p(i,o){o&2&&Te(n,i[1])},d(i){i&&X(t)}}}function wo(e){let t,n,i=e[2][1]+"",o,r,s,l,u,a,c=e[2][2]+"",d,f,h;return{c(){t=G("div"),n=ye("Rcvd: "),o=ye(i),r=le(),s=G("br"),l=le(),u=G("div"),a=ye("Sent: "),d=ye(c),f=le(),h=G("br"),w(t,"class","data-container svelte-1atysbk"),w(u,"class","data-container svelte-1atysbk")},m(m,_){L(m,t,_),W(t,n),W(t,o),L(m,r,_),L(m,s,_),L(m,l,_),L(m,u,_),W(u,a),W(u,d),L(m,f,_),L(m,h,_)},p(m,_){_&4&&i!==(i=m[2][1]+"")&&Te(o,i),_&4&&c!==(c=m[2][2]+"")&&Te(d,c)},d(m){m&&(X(t),X(r),X(s),X(l),X(u),X(f),X(h))}}}function Ts(e){let t,n,i,o,r,s,l,u,a,c,d=e[1]&&bo(e),f=e[2].length&&wo(e);return{c(){t=G("div"),n=G("label"),n.textContent="See live DMX data:",i=le(),o=G("div"),r=G("input"),s=le(),d&&d.c(),l=le(),f&&f.c(),u=xe(),w(n,"for","111"),w(n,"class","column checkbox"),w(r,"type","checkbox"),w(r,"id","111"),he(r,"min-height","25px"),he(r,"min-width","25px"),w(o,"class","column"),w(t,"class","columns")},m(h,m){L(h,t,m),W(t,n),W(t,i),W(t,o),W(o,r),r.checked=e[0],L(h,s,m),d&&d.m(h,m),L(h,l,m),f&&f.m(h,m),L(h,u,m),a||(c=se(r,"change",e[3]),a=!0)},p(h,[m]){m&1&&(r.checked=h[0]),h[1]?d?d.p(h,m):(d=bo(h),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null),h[2].length?f?f.p(h,m):(f=wo(h),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null)},i:oe,o:oe,d(h){h&&(X(t),X(s),X(l),X(u)),d&&d.d(h),f&&f.d(h),a=!1,c()}}}function Ds(e,t,n){let i="",o=[];function r(f){n(1,i=f)}function s(f){n(2,o[f[0]]=JSON.stringify(f[1]),o)}let l,u=!1;function a(){l||(l=new WebSocket("ws://localhost:8765"),l.onopen=()=>{console.log("WebSocket connection established"),r("Waiting for data")},l.onmessage=f=>{const h=JSON.parse(f.data);r(""),s(h.dmx_data)},l.onerror=f=>{console.error("WebSocket error:",f),r("WebSocket error")},l.onclose=()=>{console.log("WebSocket connection closed"),r("Disconnected from server."),l=null})}function c(){l&&l.close()}wt(()=>()=>{c()});function d(){u=this.checked,n(0,u)}return e.$$.update=()=>{e.$$.dirty&1&&(u?a():(c(),n(2,o=[])))},[u,i,o,d]}class As extends ae{constructor(t){super(),ue(this,t,Ds,Ts,fe,{})}}function po(e,t,n){const i=e.slice();return i[18]=t[n],i}function Hs(e,t,n){const i=e.slice();return i[21]=t[n],i[23]=n,i}function Is(e,t,n){const i=e.slice();return i[21]=t[n],i[23]=n,i}function Xs(e){let t;return{c(){t=G("option"),t.textContent=`${e[23]+1}`,t.__value=e[23]+1,Ve(t,t.__value)},m(n,i){L(n,t,i)},p:oe,d(n){n&&X(t)}}}function Vs(e){let t;return{c(){t=G("option"),t.textContent=`${e[23]+1}`,t.__value=e[23]+1,Ve(t,t.__value)},m(n,i){L(n,t,i)},p:oe,d(n){n&&X(t)}}}function ko(e){let t,n=e[18][1]+"",i,o,r=e[18][0]+"",s,l;return{c(){t=G("option"),i=ye(n),o=ye(": "),s=ye(r),t.__value=l=e[18][0],Ve(t,t.__value)},m(u,a){L(u,t,a),W(t,i),W(t,o),W(t,s)},p(u,a){a&4&&n!==(n=u[18][1]+"")&&Te(i,n),a&4&&r!==(r=u[18][0]+"")&&Te(s,r),a&4&&l!==(l=u[18][0])&&(t.__value=l,Ve(t,t.__value))},d(u){u&&X(t)}}}function Ys(e){let t,n,i,o,r,s,l,u,a,c,d,f,h,m,_,b,g,p,y,S,N,F,T,z,D,Y,K,q=JSON.stringify(e[0])+"",j,k,I,v=Xe(Array(10)),C=[];for(let V=0;V<v.length;V+=1)C[V]=Xs(Is(e,v,V));let A=Xe(Array(10)),M=[];for(let V=0;V<A.length;V+=1)M[V]=Vs(Hs(e,A,V));let B=Xe(e[2]),U=[];for(let V=0;V<B.length;V+=1)U[V]=ko(po(e,B,V));return{c(){t=G("div"),n=G("div"),n.textContent="Receiving Universe:",i=le(),o=G("div"),r=G("div"),s=G("select"),l=G("option"),l.textContent="Select a number";for(let V=0;V<C.length;V+=1)C[V].c();u=le(),a=G("div"),c=G("div"),c.textContent="Sending Universe:",d=le(),f=G("div"),h=G("div"),m=G("div"),_=G("select"),b=G("option"),b.textContent="Select a number";for(let V=0;V<M.length;V+=1)M[V].c();g=le(),p=G("div"),y=G("div"),y.textContent="Network Interface:",S=le(),N=G("div"),F=G("div"),T=G("select");for(let V=0;V<U.length;V+=1)U[V].c();z=le(),D=G("div"),Y=G("div"),K=G("div"),j=ye(q),w(n,"class","column line svelte-uwrgn1"),l.__value="",Ve(l,l.__value),l.disabled=!0,w(s,"id","receiving"),he(s,"width","80px"),e[1][0]===void 0&&at(()=>e[6].call(s)),w(r,"class","select"),w(o,"class","column"),w(t,"class","columns"),w(c,"class","column line svelte-uwrgn1"),b.__value="",Ve(b,b.__value),b.disabled=!0,w(_,"id","sending"),he(_,"width","80px"),e[1][1]===void 0&&at(()=>e[8].call(_)),w(m,"class","select"),w(h,"class","control is-inline"),w(f,"class","column"),w(a,"class","columns"),w(y,"class","column line svelte-uwrgn1"),e[1][2]===void 0&&at(()=>e[10].call(T)),w(F,"class","select"),w(N,"class","column"),w(p,"class","columns"),w(Y,"class","column"),w(D,"class","columns")},m(V,$){L(V,t,$),W(t,n),W(t,i),W(t,o),W(o,r),W(r,s),W(s,l);for(let O=0;O<C.length;O+=1)C[O]&&C[O].m(s,null);je(s,e[1][0],!0),L(V,u,$),L(V,a,$),W(a,c),W(a,d),W(a,f),W(f,h),W(h,m),W(m,_),W(_,b);for(let O=0;O<M.length;O+=1)M[O]&&M[O].m(_,null);je(_,e[1][1],!0),L(V,g,$),L(V,p,$),W(p,y),W(p,S),W(p,N),W(N,F),W(F,T);for(let O=0;O<U.length;O+=1)U[O]&&U[O].m(T,null);je(T,e[1][2],!0),L(V,z,$),L(V,D,$),W(D,Y),W(Y,K),W(K,j),k||(I=[se(s,"change",e[5]),se(s,"change",e[6]),se(_,"change",e[7]),se(_,"change",e[8]),se(T,"change",e[9]),se(T,"change",e[10])],k=!0)},p(V,[$]){if($&2&&je(s,V[1][0]),$&2&&je(_,V[1][1]),$&4){B=Xe(V[2]);let O;for(O=0;O<B.length;O+=1){const ee=po(V,B,O);U[O]?U[O].p(ee,$):(U[O]=ko(ee),U[O].c(),U[O].m(T,null))}for(;O<U.length;O+=1)U[O].d(1);U.length=B.length}$&2&&je(T,V[1][2]),$&1&&q!==(q=JSON.stringify(V[0])+"")&&Te(j,q)},i:oe,o:oe,d(V){V&&(X(t),X(u),X(a),X(g),X(p),X(z),X(D)),Jt(C,V),Jt(M,V),Jt(U,V),k=!1,Ie(I)}}}function Ls(e,t,n){let i="",o=[1,2,"127.0.0.1"],r=[];function s(g,p){console.log("handle",p.target.value),n(1,o[g]=Number(p.target.value),o),n(0,i="Applying settings"),c()}function l(g,p){console.log("handle",p.target.value),n(1,o[g]=p.target.value,o),n(0,i="Applying settings"),c()}async function u(){try{const g=await fetch("/interfaces");if(g.ok){const p=await g.json();n(2,r=p.data),r.length&&n(1,o[2]=r[0][0],o),console.log(r)}else console.error("Failed to fetch network interfaces.")}catch(g){console.error("Error fetching network interfaces:",g)}}async function a(){try{const g=await fetch("/sacn");if(g.ok){const p=await g.json();n(0,i=p.status);const y=p.data;y.length&&n(1,o=y),console.log(r)}else console.error("Failed to fetch network interfaces.")}catch(g){console.error("Error fetching network interfaces:",g)}}async function c(){console.log("settings",o);try{const p=await(await fetch("/sacn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();n(0,i=p.status),console.log("Success:",i)}catch(g){console.error("Error:",g)}}wt(()=>{console.log("mount dmx control"),u(),a()});const d=g=>s(0,g);function f(){o[0]=jt(this),n(1,o)}const h=g=>s(1,g);function m(){o[1]=jt(this),n(1,o)}const _=g=>l(2,g);function b(){o[2]=jt(this),n(1,o)}return[i,o,r,s,l,d,f,h,m,_,b]}class Rs extends ae{constructor(t){super(),ue(this,t,Ls,Ys,fe,{})}}const qt=[];function Je(e,t){return{subscribe:re(e,t).subscribe}}function re(e,t=oe){let n;const i=new Set;function o(l){if(fe(e,l)&&(e=l,n)){const u=!qt.length;for(const a of i)a[1](),qt.push(a,e);if(u){for(let a=0;a<qt.length;a+=2)qt[a][0](qt[a+1]);qt.length=0}}}function r(l){o(l(e))}function s(l,u=oe){const a=[l,u];return i.add(a),i.size===1&&(n=t(o,r)||oe),l(e),()=>{i.delete(a),i.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function xt(e,t,n){const i=!Array.isArray(e),o=i?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return Je(n,(s,l)=>{let u=!1;const a=[];let c=0,d=oe;const f=()=>{if(c)return;d();const m=t(i?a[0]:a,s,l);r?s(m):d=Ne(m)?m:oe},h=o.map((m,_)=>yn(m,b=>{a[_]=b,c&=~(1<<_),u&&f()},()=>{c|=1<<_}));return u=!0,f(),function(){Ie(h),d(),u=!1}})}function Ce(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=Ce(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ws={value:()=>{}};function ci(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Bn(n)}function Bn(e){this._=e}function Bs(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Bn.prototype=ci.prototype={constructor:Bn,on:function(e,t){var n=this._,i=Bs(e+"",n),o,r=-1,s=i.length;if(arguments.length<2){for(;++r<s;)if((o=(e=i[r]).type)&&(o=Ks(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<s;)if(o=(e=i[r]).type)n[o]=vo(n[o],e.name,t);else if(t==null)for(o in n)n[o]=vo(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Bn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,r;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)}};function Ks(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function vo(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Ws,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hi="http://www.w3.org/1999/xhtml";const So={svg:"http://www.w3.org/2000/svg",xhtml:Hi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),So.hasOwnProperty(t)?{space:So[t],local:e}:e}function Fs(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hi&&t.documentElement.namespaceURI===Hi?t.createElement(e):t.createElementNS(n,e)}}function Zs(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wr(e){var t=fi(e);return(t.local?Zs:Fs)(t)}function qs(){}function Ji(e){return e==null?qs:function(){return this.querySelector(e)}}function Us(e){typeof e!="function"&&(e=Ji(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,l=i[o]=new Array(s),u,a,c=0;c<s;++c)(u=r[c])&&(a=e.call(u,u.__data__,c,r))&&("__data__"in u&&(a.__data__=u.__data__),l[c]=a);return new Ue(i,this._parents)}function Gs(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Js(){return[]}function Br(e){return e==null?Js:function(){return this.querySelectorAll(e)}}function js(e){return function(){return Gs(e.apply(this,arguments))}}function Qs(e){typeof e=="function"?e=js(e):e=Br(e);for(var t=this._groups,n=t.length,i=[],o=[],r=0;r<n;++r)for(var s=t[r],l=s.length,u,a=0;a<l;++a)(u=s[a])&&(i.push(e.call(u,u.__data__,a,s)),o.push(u));return new Ue(i,o)}function Kr(e){return function(){return this.matches(e)}}function Fr(e){return function(t){return t.matches(e)}}var xs=Array.prototype.find;function $s(e){return function(){return xs.call(this.children,e)}}function eu(){return this.firstElementChild}function tu(e){return this.select(e==null?eu:$s(typeof e=="function"?e:Fr(e)))}var nu=Array.prototype.filter;function iu(){return Array.from(this.children)}function ou(e){return function(){return nu.call(this.children,e)}}function ru(e){return this.selectAll(e==null?iu:ou(typeof e=="function"?e:Fr(e)))}function lu(e){typeof e!="function"&&(e=Kr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,l=i[o]=[],u,a=0;a<s;++a)(u=r[a])&&e.call(u,u.__data__,a,r)&&l.push(u);return new Ue(i,this._parents)}function Zr(e){return new Array(e.length)}function su(){return new Ue(this._enter||this._groups.map(Zr),this._parents)}function Jn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jn.prototype={constructor:Jn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uu(e){return function(){return e}}function au(e,t,n,i,o,r){for(var s=0,l,u=t.length,a=r.length;s<a;++s)(l=t[s])?(l.__data__=r[s],i[s]=l):n[s]=new Jn(e,r[s]);for(;s<u;++s)(l=t[s])&&(o[s]=l)}function cu(e,t,n,i,o,r,s){var l,u,a=new Map,c=t.length,d=r.length,f=new Array(c),h;for(l=0;l<c;++l)(u=t[l])&&(f[l]=h=s.call(u,u.__data__,l,t)+"",a.has(h)?o[l]=u:a.set(h,u));for(l=0;l<d;++l)h=s.call(e,r[l],l,r)+"",(u=a.get(h))?(i[l]=u,u.__data__=r[l],a.delete(h)):n[l]=new Jn(e,r[l]);for(l=0;l<c;++l)(u=t[l])&&a.get(f[l])===u&&(o[l]=u)}function fu(e){return e.__data__}function du(e,t){if(!arguments.length)return Array.from(this,fu);var n=t?cu:au,i=this._parents,o=this._groups;typeof e!="function"&&(e=uu(e));for(var r=o.length,s=new Array(r),l=new Array(r),u=new Array(r),a=0;a<r;++a){var c=i[a],d=o[a],f=d.length,h=hu(e.call(c,c&&c.__data__,a,i)),m=h.length,_=l[a]=new Array(m),b=s[a]=new Array(m),g=u[a]=new Array(f);n(c,d,_,b,g,h,t);for(var p=0,y=0,S,N;p<m;++p)if(S=_[p]){for(p>=y&&(y=p+1);!(N=b[y])&&++y<m;);S._next=N||null}}return s=new Ue(s,i),s._enter=l,s._exit=u,s}function hu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gu(){return new Ue(this._exit||this._groups.map(Zr),this._parents)}function mu(e,t,n){var i=this.enter(),o=this,r=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?r.remove():n(r),i&&o?i.merge(o).order():o}function _u(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,r=i.length,s=Math.min(o,r),l=new Array(o),u=0;u<s;++u)for(var a=n[u],c=i[u],d=a.length,f=l[u]=new Array(d),h,m=0;m<d;++m)(h=a[m]||c[m])&&(f[m]=h);for(;u<o;++u)l[u]=n[u];return new Ue(l,this._parents)}function yu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,r=i[o],s;--o>=0;)(s=i[o])&&(r&&s.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(s,r),r=s);return this}function bu(e){e||(e=wu);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var s=n[r],l=s.length,u=o[r]=new Array(l),a,c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(t)}return new Ue(o,this._parents).order()}function wu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function pu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ku(){return Array.from(this)}function vu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,r=i.length;o<r;++o){var s=i[o];if(s)return s}return null}function Su(){let e=0;for(const t of this)++e;return e}function Eu(){return!this.node()}function Cu(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],r=0,s=o.length,l;r<s;++r)(l=o[r])&&e.call(l,l.__data__,r,o);return this}function Mu(e){return function(){this.removeAttribute(e)}}function Pu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Nu(e,t){return function(){this.setAttribute(e,t)}}function Ou(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function zu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Tu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Du(e,t){var n=fi(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?Pu:Mu:typeof t=="function"?n.local?Tu:zu:n.local?Ou:Nu)(n,t))}function qr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Au(e){return function(){this.style.removeProperty(e)}}function Hu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Iu(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function Xu(e,t,n){return arguments.length>1?this.each((t==null?Au:typeof t=="function"?Iu:Hu)(e,t,n??"")):ln(this.node(),e)}function ln(e,t){return e.style.getPropertyValue(t)||qr(e).getComputedStyle(e,null).getPropertyValue(t)}function Vu(e){return function(){delete this[e]}}function Yu(e,t){return function(){this[e]=t}}function Lu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ru(e,t){return arguments.length>1?this.each((t==null?Vu:typeof t=="function"?Lu:Yu)(e,t)):this.node()[e]}function Ur(e){return e.trim().split(/^|\s+/)}function ji(e){return e.classList||new Gr(e)}function Gr(e){this._node=e,this._names=Ur(e.getAttribute("class")||"")}Gr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jr(e,t){for(var n=ji(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function jr(e,t){for(var n=ji(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function Wu(e){return function(){Jr(this,e)}}function Bu(e){return function(){jr(this,e)}}function Ku(e,t){return function(){(t.apply(this,arguments)?Jr:jr)(this,e)}}function Fu(e,t){var n=Ur(e+"");if(arguments.length<2){for(var i=ji(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Ku:t?Wu:Bu)(n,t))}function Zu(){this.textContent=""}function qu(e){return function(){this.textContent=e}}function Uu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Gu(e){return arguments.length?this.each(e==null?Zu:(typeof e=="function"?Uu:qu)(e)):this.node().textContent}function Ju(){this.innerHTML=""}function ju(e){return function(){this.innerHTML=e}}function Qu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xu(e){return arguments.length?this.each(e==null?Ju:(typeof e=="function"?Qu:ju)(e)):this.node().innerHTML}function $u(){this.nextSibling&&this.parentNode.appendChild(this)}function ea(){return this.each($u)}function ta(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function na(){return this.each(ta)}function ia(e){var t=typeof e=="function"?e:Wr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function oa(){return null}function ra(e,t){var n=typeof e=="function"?e:Wr(e),i=t==null?oa:typeof t=="function"?t:Ji(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function la(){var e=this.parentNode;e&&e.removeChild(this)}function sa(){return this.each(la)}function ua(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function aa(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ca(e){return this.select(e?aa:ua)}function fa(e){return arguments.length?this.property("__data__",e):this.node().__data__}function da(e){return function(t){e.call(this,t,this.__data__)}}function ha(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function ga(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,r;n<o;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++i]=r;++i?t.length=i:delete this.__on}}}function ma(e,t,n){return function(){var i=this.__on,o,r=da(t);if(i){for(var s=0,l=i.length;s<l;++s)if((o=i[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=r,o.options=n),o.value=t;return}}this.addEventListener(e.type,r,n),o={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(o):this.__on=[o]}}function _a(e,t,n){var i=ha(e+""),o,r=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,c;u<a;++u)for(o=0,c=l[u];o<r;++o)if((s=i[o]).type===c.type&&s.name===c.name)return c.value}return}for(l=t?ma:ga,o=0;o<r;++o)this.each(l(i[o],t,n));return this}function Qr(e,t,n){var i=qr(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function ya(e,t){return function(){return Qr(this,e,t)}}function ba(e,t){return function(){return Qr(this,e,t.apply(this,arguments))}}function wa(e,t){return this.each((typeof t=="function"?ba:ya)(e,t))}function*pa(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,r=i.length,s;o<r;++o)(s=i[o])&&(yield s)}var xr=[null];function Ue(e,t){this._groups=e,this._parents=t}function Mn(){return new Ue([[document.documentElement]],xr)}function ka(){return this}Ue.prototype=Mn.prototype={constructor:Ue,select:Us,selectAll:Qs,selectChild:tu,selectChildren:ru,filter:lu,data:du,enter:su,exit:gu,join:mu,merge:_u,selection:ka,order:yu,sort:bu,call:pu,nodes:ku,node:vu,size:Su,empty:Eu,each:Cu,attr:Du,style:Xu,property:Ru,classed:Fu,text:Gu,html:xu,raise:ea,lower:na,append:ia,insert:ra,remove:sa,clone:ca,datum:fa,on:_a,dispatch:wa,[Symbol.iterator]:pa};function et(e){return typeof e=="string"?new Ue([[document.querySelector(e)]],[document.documentElement]):new Ue([[e]],xr)}function va(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ut(e,t){if(e=va(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Sa={passive:!1},pn={capture:!0,passive:!1};function Si(e){e.stopImmediatePropagation()}function $t(e){e.preventDefault(),e.stopImmediatePropagation()}function $r(e){var t=e.document.documentElement,n=et(e).on("dragstart.drag",$t,pn);"onselectstart"in t?n.on("selectstart.drag",$t,pn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function el(e,t){var n=e.document.documentElement,i=et(e).on("dragstart.drag",null);t&&(i.on("click.drag",$t,pn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Hn=e=>()=>e;function Ii(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:r,x:s,y:l,dx:u,dy:a,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:r,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:c}})}Ii.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ea(e){return!e.ctrlKey&&!e.button}function Ca(){return this.parentNode}function Ma(e,t){return t??{x:e.x,y:e.y}}function Pa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Na(){var e=Ea,t=Ca,n=Ma,i=Pa,o={},r=ci("start","drag","end"),s=0,l,u,a,c,d=0;function f(S){S.on("mousedown.drag",h).filter(i).on("touchstart.drag",b).on("touchmove.drag",g,Sa).on("touchend.drag touchcancel.drag",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(S,N){if(!(c||!e.call(this,S,N))){var F=y(this,t.call(this,S,N),S,N,"mouse");F&&(et(S.view).on("mousemove.drag",m,pn).on("mouseup.drag",_,pn),$r(S.view),Si(S),a=!1,l=S.clientX,u=S.clientY,F("start",S))}}function m(S){if($t(S),!a){var N=S.clientX-l,F=S.clientY-u;a=N*N+F*F>d}o.mouse("drag",S)}function _(S){et(S.view).on("mousemove.drag mouseup.drag",null),el(S.view,a),$t(S),o.mouse("end",S)}function b(S,N){if(e.call(this,S,N)){var F=S.changedTouches,T=t.call(this,S,N),z=F.length,D,Y;for(D=0;D<z;++D)(Y=y(this,T,S,N,F[D].identifier,F[D]))&&(Si(S),Y("start",S,F[D]))}}function g(S){var N=S.changedTouches,F=N.length,T,z;for(T=0;T<F;++T)(z=o[N[T].identifier])&&($t(S),z("drag",S,N[T]))}function p(S){var N=S.changedTouches,F=N.length,T,z;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),T=0;T<F;++T)(z=o[N[T].identifier])&&(Si(S),z("end",S,N[T]))}function y(S,N,F,T,z,D){var Y=r.copy(),K=ut(D||F,N),q,j,k;if((k=n.call(S,new Ii("beforestart",{sourceEvent:F,target:f,identifier:z,active:s,x:K[0],y:K[1],dx:0,dy:0,dispatch:Y}),T))!=null)return q=k.x-K[0]||0,j=k.y-K[1]||0,function I(v,C,A){var M=K,B;switch(v){case"start":o[z]=I,B=s++;break;case"end":delete o[z],--s;case"drag":K=ut(A||C,N),B=s;break}Y.call(v,S,new Ii(v,{sourceEvent:C,subject:k,target:f,identifier:z,active:B,x:K[0]+q,y:K[1]+j,dx:K[0]-M[0],dy:K[1]-M[1],dispatch:Y}),T)}}return f.filter=function(S){return arguments.length?(e=typeof S=="function"?S:Hn(!!S),f):e},f.container=function(S){return arguments.length?(t=typeof S=="function"?S:Hn(S),f):t},f.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Hn(S),f):n},f.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:Hn(!!S),f):i},f.on=function(){var S=r.on.apply(r,arguments);return S===r?f:S},f.clickDistance=function(S){return arguments.length?(d=(S=+S)*S,f):Math.sqrt(d)},f}function Qi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tl(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Pn(){}var kn=.7,jn=1/kn,en="\\s*([+-]?\\d+)\\s*",vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ct="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oa=/^#([0-9a-f]{3,8})$/,za=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),Ta=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),Da=new RegExp(`^rgba\\(${en},${en},${en},${vn}\\)$`),Aa=new RegExp(`^rgba\\(${ct},${ct},${ct},${vn}\\)$`),Ha=new RegExp(`^hsl\\(${vn},${ct},${ct}\\)$`),Ia=new RegExp(`^hsla\\(${vn},${ct},${ct},${vn}\\)$`),Eo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qi(Pn,Sn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Co,formatHex:Co,formatHex8:Xa,formatHsl:Va,formatRgb:Mo,toString:Mo});function Co(){return this.rgb().formatHex()}function Xa(){return this.rgb().formatHex8()}function Va(){return nl(this).formatHsl()}function Mo(){return this.rgb().formatRgb()}function Sn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Oa.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Po(t):n===3?new Be(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?In(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?In(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=za.exec(e))?new Be(t[1],t[2],t[3],1):(t=Ta.exec(e))?new Be(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Da.exec(e))?In(t[1],t[2],t[3],t[4]):(t=Aa.exec(e))?In(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ha.exec(e))?zo(t[1],t[2]/100,t[3]/100,1):(t=Ia.exec(e))?zo(t[1],t[2]/100,t[3]/100,t[4]):Eo.hasOwnProperty(e)?Po(Eo[e]):e==="transparent"?new Be(NaN,NaN,NaN,0):null}function Po(e){return new Be(e>>16&255,e>>8&255,e&255,1)}function In(e,t,n,i){return i<=0&&(e=t=n=NaN),new Be(e,t,n,i)}function Ya(e){return e instanceof Pn||(e=Sn(e)),e?(e=e.rgb(),new Be(e.r,e.g,e.b,e.opacity)):new Be}function Xi(e,t,n,i){return arguments.length===1?Ya(e):new Be(e,t,n,i??1)}function Be(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Qi(Be,Xi,tl(Pn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kn:Math.pow(kn,e),new Be(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Be(Ht(this.r),Ht(this.g),Ht(this.b),Qn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:No,formatHex:No,formatHex8:La,formatRgb:Oo,toString:Oo}));function No(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function La(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Oo(){const e=Qn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${e===1?")":`, ${e})`}`}function Qn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dt(e){return e=Ht(e),(e<16?"0":"")+e.toString(16)}function zo(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tt(e,t,n,i)}function nl(e){if(e instanceof tt)return new tt(e.h,e.s,e.l,e.opacity);if(e instanceof Pn||(e=Sn(e)),!e)return new tt;if(e instanceof tt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),r=Math.max(t,n,i),s=NaN,l=r-o,u=(r+o)/2;return l?(t===r?s=(n-i)/l+(n<i)*6:n===r?s=(i-t)/l+2:s=(t-n)/l+4,l/=u<.5?r+o:2-r-o,s*=60):l=u>0&&u<1?0:s,new tt(s,l,u,e.opacity)}function Ra(e,t,n,i){return arguments.length===1?nl(e):new tt(e,t,n,i??1)}function tt(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Qi(tt,Ra,tl(Pn,{brighter(e){return e=e==null?jn:Math.pow(jn,e),new tt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kn:Math.pow(kn,e),new tt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new Be(Ei(e>=240?e-240:e+120,o,i),Ei(e,o,i),Ei(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new tt(To(this.h),Xn(this.s),Xn(this.l),Qn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qn(this.opacity);return`${e===1?"hsl(":"hsla("}${To(this.h)}, ${Xn(this.s)*100}%, ${Xn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function To(e){return e=(e||0)%360,e<0?e+360:e}function Xn(e){return Math.max(0,Math.min(1,e||0))}function Ei(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const il=e=>()=>e;function Wa(e,t){return function(n){return e+n*t}}function Ba(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Ka(e){return(e=+e)==1?ol:function(t,n){return n-t?Ba(t,n,e):il(isNaN(t)?n:t)}}function ol(e,t){var n=t-e;return n?Wa(e,n):il(isNaN(e)?t:e)}const Do=function e(t){var n=Ka(t);function i(o,r){var s=n((o=Xi(o)).r,(r=Xi(r)).r),l=n(o.g,r.g),u=n(o.b,r.b),a=ol(o.opacity,r.opacity);return function(c){return o.r=s(c),o.g=l(c),o.b=u(c),o.opacity=a(c),o+""}}return i.gamma=e,i}(1);function Ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Vi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ci=new RegExp(Vi.source,"g");function Fa(e){return function(){return e}}function Za(e){return function(t){return e(t)+""}}function qa(e,t){var n=Vi.lastIndex=Ci.lastIndex=0,i,o,r,s=-1,l=[],u=[];for(e=e+"",t=t+"";(i=Vi.exec(e))&&(o=Ci.exec(t));)(r=o.index)>n&&(r=t.slice(n,r),l[s]?l[s]+=r:l[++s]=r),(i=i[0])===(o=o[0])?l[s]?l[s]+=o:l[++s]=o:(l[++s]=null,u.push({i:s,x:Ct(i,o)})),n=Ci.lastIndex;return n<t.length&&(r=t.slice(n),l[s]?l[s]+=r:l[++s]=r),l.length<2?u[0]?Za(u[0].x):Fa(t):(t=u.length,function(a){for(var c=0,d;c<t;++c)l[(d=u[c]).i]=d.x(a);return l.join("")})}var Ao=180/Math.PI,Yi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rl(e,t,n,i,o,r){var s,l,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,u/=l),e*i<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(t,e)*Ao,skewX:Math.atan(u)*Ao,scaleX:s,scaleY:l}}var Vn;function Ua(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yi:rl(t.a,t.b,t.c,t.d,t.e,t.f)}function Ga(e){return e==null||(Vn||(Vn=document.createElementNS("http://www.w3.org/2000/svg","g")),Vn.setAttribute("transform",e),!(e=Vn.transform.baseVal.consolidate()))?Yi:(e=e.matrix,rl(e.a,e.b,e.c,e.d,e.e,e.f))}function ll(e,t,n,i){function o(a){return a.length?a.pop()+" ":""}function r(a,c,d,f,h,m){if(a!==d||c!==f){var _=h.push("translate(",null,t,null,n);m.push({i:_-4,x:Ct(a,d)},{i:_-2,x:Ct(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(a,c,d,f){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:Ct(a,c)})):c&&d.push(o(d)+"rotate("+c+i)}function l(a,c,d,f){a!==c?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:Ct(a,c)}):c&&d.push(o(d)+"skewX("+c+i)}function u(a,c,d,f,h,m){if(a!==d||c!==f){var _=h.push(o(h)+"scale(",null,",",null,")");m.push({i:_-4,x:Ct(a,d)},{i:_-2,x:Ct(c,f)})}else(d!==1||f!==1)&&h.push(o(h)+"scale("+d+","+f+")")}return function(a,c){var d=[],f=[];return a=e(a),c=e(c),r(a.translateX,a.translateY,c.translateX,c.translateY,d,f),s(a.rotate,c.rotate,d,f),l(a.skewX,c.skewX,d,f),u(a.scaleX,a.scaleY,c.scaleX,c.scaleY,d,f),a=c=null,function(h){for(var m=-1,_=f.length,b;++m<_;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var Ja=ll(Ua,"px, ","px)","deg)"),ja=ll(Ga,", ",")",")"),Qa=1e-12;function Ho(e){return((e=Math.exp(e))+1/e)/2}function xa(e){return((e=Math.exp(e))-1/e)/2}function $a(e){return((e=Math.exp(2*e))-1)/(e+1)}const ec=function e(t,n,i){function o(r,s){var l=r[0],u=r[1],a=r[2],c=s[0],d=s[1],f=s[2],h=c-l,m=d-u,_=h*h+m*m,b,g;if(_<Qa)g=Math.log(f/a)/t,b=function(T){return[l+T*h,u+T*m,a*Math.exp(t*T*g)]};else{var p=Math.sqrt(_),y=(f*f-a*a+i*_)/(2*a*n*p),S=(f*f-a*a-i*_)/(2*f*n*p),N=Math.log(Math.sqrt(y*y+1)-y),F=Math.log(Math.sqrt(S*S+1)-S);g=(F-N)/t,b=function(T){var z=T*g,D=Ho(N),Y=a/(n*p)*(D*$a(t*z+N)-xa(N));return[l+Y*h,u+Y*m,a*D/Ho(t*z+N)]}}return b.duration=g*1e3*t/Math.SQRT2,b}return o.rho=function(r){var s=Math.max(.001,+r),l=s*s,u=l*l;return e(s,l,u)},o}(Math.SQRT2,2,4);var sn=0,gn=0,dn=0,sl=1e3,xn,mn,$n=0,It=0,di=0,En=typeof performance=="object"&&performance.now?performance:Date,ul=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function xi(){return It||(ul(tc),It=En.now()+di)}function tc(){It=0}function ei(){this._call=this._time=this._next=null}ei.prototype=al.prototype={constructor:ei,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?xi():+n)+(t==null?0:+t),!this._next&&mn!==this&&(mn?mn._next=this:xn=this,mn=this),this._call=e,this._time=n,Li()},stop:function(){this._call&&(this._call=null,this._time=1/0,Li())}};function al(e,t,n){var i=new ei;return i.restart(e,t,n),i}function nc(){xi(),++sn;for(var e=xn,t;e;)(t=It-e._time)>=0&&e._call.call(void 0,t),e=e._next;--sn}function Io(){It=($n=En.now())+di,sn=gn=0;try{nc()}finally{sn=0,oc(),It=0}}function ic(){var e=En.now(),t=e-$n;t>sl&&(di-=t,$n=e)}function oc(){for(var e,t=xn,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xn=n);mn=e,Li(i)}function Li(e){if(!sn){gn&&(gn=clearTimeout(gn));var t=e-It;t>24?(e<1/0&&(gn=setTimeout(Io,e-En.now()-di)),dn&&(dn=clearInterval(dn))):(dn||($n=En.now(),dn=setInterval(ic,sl)),sn=1,ul(Io))}}function Xo(e,t,n){var i=new ei;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var rc=ci("start","end","cancel","interrupt"),lc=[],cl=0,Vo=1,Ri=2,Kn=3,Yo=4,Wi=5,Fn=6;function hi(e,t,n,i,o,r){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;sc(e,n,{name:t,index:i,group:o,on:rc,tween:lc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:cl})}function $i(e,t){var n=it(e,t);if(n.state>cl)throw new Error("too late; already scheduled");return n}function dt(e,t){var n=it(e,t);if(n.state>Kn)throw new Error("too late; already running");return n}function it(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function sc(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=al(r,0,n.time);function r(a){n.state=Vo,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var c,d,f,h;if(n.state!==Vo)return u();for(c in i)if(h=i[c],h.name===n.name){if(h.state===Kn)return Xo(s);h.state===Yo?(h.state=Fn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=Fn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(Xo(function(){n.state===Kn&&(n.state=Yo,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=Ri,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ri){for(n.state=Kn,o=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++d]=h);o.length=d+1}}function l(a){for(var c=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=Wi,1),d=-1,f=o.length;++d<f;)o[d].call(e,c);n.state===Wi&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Fn,n.timer.stop(),delete i[t];for(var a in i)return;delete e.__transition}}function Zn(e,t){var n=e.__transition,i,o,r=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((i=n[s]).name!==t){r=!1;continue}o=i.state>Ri&&i.state<Wi,i.state=Fn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[s]}r&&delete e.__transition}}function uc(e){return this.each(function(){Zn(this,e)})}function ac(e,t){var n,i;return function(){var o=dt(this,e),r=o.tween;if(r!==n){i=n=r;for(var s=0,l=i.length;s<l;++s)if(i[s].name===t){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function cc(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var r=dt(this,e),s=r.tween;if(s!==i){o=(i=s).slice();for(var l={name:t,value:n},u=0,a=o.length;u<a;++u)if(o[u].name===t){o[u]=l;break}u===a&&o.push(l)}r.tween=o}}function fc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=it(this.node(),n).tween,o=0,r=i.length,s;o<r;++o)if((s=i[o]).name===e)return s.value;return null}return this.each((t==null?ac:cc)(n,e,t))}function eo(e,t,n){var i=e._id;return e.each(function(){var o=dt(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return it(o,i).value[t]}}function fl(e,t){var n;return(typeof t=="number"?Ct:t instanceof Sn?Do:(n=Sn(t))?(t=n,Do):qa)(e,t)}function dc(e){return function(){this.removeAttribute(e)}}function hc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gc(e,t,n){var i,o=n+"",r;return function(){var s=this.getAttribute(e);return s===o?null:s===i?r:r=t(i=s,n)}}function mc(e,t,n){var i,o=n+"",r;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===i?r:r=t(i=s,n)}}function _c(e,t,n){var i,o,r;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(e):(s=this.getAttribute(e),u=l+"",s===u?null:s===i&&u===o?r:(o=u,r=t(i=s,l)))}}function yc(e,t,n){var i,o,r;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),u=l+"",s===u?null:s===i&&u===o?r:(o=u,r=t(i=s,l)))}}function bc(e,t){var n=fi(e),i=n==="transform"?ja:fl;return this.attrTween(e,typeof t=="function"?(n.local?yc:_c)(n,i,eo(this,"attr."+e,t)):t==null?(n.local?hc:dc)(n):(n.local?mc:gc)(n,i,t))}function wc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function pc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kc(e,t){var n,i;function o(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&pc(e,r)),n}return o._value=t,o}function vc(e,t){var n,i;function o(){var r=t.apply(this,arguments);return r!==i&&(n=(i=r)&&wc(e,r)),n}return o._value=t,o}function Sc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=fi(e);return this.tween(n,(i.local?kc:vc)(i,t))}function Ec(e,t){return function(){$i(this,e).delay=+t.apply(this,arguments)}}function Cc(e,t){return t=+t,function(){$i(this,e).delay=t}}function Mc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ec:Cc)(t,e)):it(this.node(),t).delay}function Pc(e,t){return function(){dt(this,e).duration=+t.apply(this,arguments)}}function Nc(e,t){return t=+t,function(){dt(this,e).duration=t}}function Oc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Pc:Nc)(t,e)):it(this.node(),t).duration}function zc(e,t){if(typeof t!="function")throw new Error;return function(){dt(this,e).ease=t}}function Tc(e){var t=this._id;return arguments.length?this.each(zc(t,e)):it(this.node(),t).ease}function Dc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,e).ease=n}}function Ac(e){if(typeof e!="function")throw new Error;return this.each(Dc(this._id,e))}function Hc(e){typeof e!="function"&&(e=Kr(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var r=t[o],s=r.length,l=i[o]=[],u,a=0;a<s;++a)(u=r[a])&&e.call(u,u.__data__,a,r)&&l.push(u);return new bt(i,this._parents,this._name,this._id)}function Ic(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,r=Math.min(i,o),s=new Array(i),l=0;l<r;++l)for(var u=t[l],a=n[l],c=u.length,d=s[l]=new Array(c),f,h=0;h<c;++h)(f=u[h]||a[h])&&(d[h]=f);for(;l<i;++l)s[l]=t[l];return new bt(s,this._parents,this._name,this._id)}function Xc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Vc(e,t,n){var i,o,r=Xc(t)?$i:dt;return function(){var s=r(this,e),l=s.on;l!==i&&(o=(i=l).copy()).on(t,n),s.on=o}}function Yc(e,t){var n=this._id;return arguments.length<2?it(this.node(),n).on.on(e):this.each(Vc(n,e,t))}function Lc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Rc(){return this.on("end.remove",Lc(this._id))}function Wc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ji(e));for(var i=this._groups,o=i.length,r=new Array(o),s=0;s<o;++s)for(var l=i[s],u=l.length,a=r[s]=new Array(u),c,d,f=0;f<u;++f)(c=l[f])&&(d=e.call(c,c.__data__,f,l))&&("__data__"in c&&(d.__data__=c.__data__),a[f]=d,hi(a[f],t,n,f,a,it(c,n)));return new bt(r,this._parents,t,n)}function Bc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Br(e));for(var i=this._groups,o=i.length,r=[],s=[],l=0;l<o;++l)for(var u=i[l],a=u.length,c,d=0;d<a;++d)if(c=u[d]){for(var f=e.call(c,c.__data__,d,u),h,m=it(c,n),_=0,b=f.length;_<b;++_)(h=f[_])&&hi(h,t,n,_,f,m);r.push(f),s.push(c)}return new bt(r,s,t,n)}var Kc=Mn.prototype.constructor;function Fc(){return new Kc(this._groups,this._parents)}function Zc(e,t){var n,i,o;return function(){var r=ln(this,e),s=(this.style.removeProperty(e),ln(this,e));return r===s?null:r===n&&s===i?o:o=t(n=r,i=s)}}function dl(e){return function(){this.style.removeProperty(e)}}function qc(e,t,n){var i,o=n+"",r;return function(){var s=ln(this,e);return s===o?null:s===i?r:r=t(i=s,n)}}function Uc(e,t,n){var i,o,r;return function(){var s=ln(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),ln(this,e))),s===u?null:s===i&&u===o?r:(o=u,r=t(i=s,l))}}function Gc(e,t){var n,i,o,r="style."+t,s="end."+r,l;return function(){var u=dt(this,e),a=u.on,c=u.value[r]==null?l||(l=dl(t)):void 0;(a!==n||o!==c)&&(i=(n=a).copy()).on(s,o=c),u.on=i}}function Jc(e,t,n){var i=(e+="")=="transform"?Ja:fl;return t==null?this.styleTween(e,Zc(e,i)).on("end.style."+e,dl(e)):typeof t=="function"?this.styleTween(e,Uc(e,i,eo(this,"style."+e,t))).each(Gc(this._id,e)):this.styleTween(e,qc(e,i,t),n).on("end.style."+e,null)}function jc(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function Qc(e,t,n){var i,o;function r(){var s=t.apply(this,arguments);return s!==o&&(i=(o=s)&&jc(e,s,n)),i}return r._value=t,r}function xc(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,Qc(e,t,n??""))}function $c(e){return function(){this.textContent=e}}function ef(e){return function(){var t=e(this);this.textContent=t??""}}function tf(e){return this.tween("text",typeof e=="function"?ef(eo(this,"text",e)):$c(e==null?"":e+""))}function nf(e){return function(t){this.textContent=e.call(this,t)}}function of(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&nf(o)),t}return i._value=e,i}function rf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,of(e))}function lf(){for(var e=this._name,t=this._id,n=hl(),i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,u,a=0;a<l;++a)if(u=s[a]){var c=it(u,t);hi(u,e,n,a,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new bt(i,this._parents,e,n)}function sf(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(r,s){var l={value:s},u={value:function(){--o===0&&r()}};n.each(function(){var a=dt(this,i),c=a.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),a.on=t}),o===0&&r()})}var uf=0;function bt(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function hl(){return++uf}var gt=Mn.prototype;bt.prototype={constructor:bt,select:Wc,selectAll:Bc,selectChild:gt.selectChild,selectChildren:gt.selectChildren,filter:Hc,merge:Ic,selection:Fc,transition:lf,call:gt.call,nodes:gt.nodes,node:gt.node,size:gt.size,empty:gt.empty,each:gt.each,on:Yc,attr:bc,attrTween:Sc,style:Jc,styleTween:xc,text:tf,textTween:rf,remove:Rc,tween:fc,delay:Mc,duration:Oc,ease:Tc,easeVarying:Ac,end:sf,[Symbol.iterator]:gt[Symbol.iterator]};function af(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cf={time:null,delay:0,duration:250,ease:af};function ff(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function df(e){var t,n;e instanceof bt?(t=e._id,e=e._name):(t=hl(),(n=cf).time=xi(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,r=0;r<o;++r)for(var s=i[r],l=s.length,u,a=0;a<l;++a)(u=s[a])&&hi(u,e,t,a,s,n||ff(u,t));return new bt(i,this._parents,e,t)}Mn.prototype.interrupt=uc;Mn.prototype.transition=df;const Yn=e=>()=>e;function hf(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function mt(e,t,n){this.k=e,this.x=t,this.y=n}mt.prototype={constructor:mt,scale:function(e){return e===1?this:new mt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gi=new mt(1,0,0);gl.prototype=mt.prototype;function gl(e){for(;!e.__zoom;)if(!(e=e.parentNode))return gi;return e.__zoom}function Mi(e){e.stopImmediatePropagation()}function hn(e){e.preventDefault(),e.stopImmediatePropagation()}function gf(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function mf(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Lo(){return this.__zoom||gi}function _f(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function yf(){return navigator.maxTouchPoints||"ontouchstart"in this}function bf(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],r=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s))}function wf(){var e=gf,t=mf,n=bf,i=_f,o=yf,r=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=ec,a=ci("start","zoom","end"),c,d,f,h=500,m=150,_=0,b=10;function g(k){k.property("__zoom",Lo).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",Y).filter(o).on("touchstart.zoom",K).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(k,I,v,C){var A=k.selection?k.selection():k;A.property("__zoom",Lo),k!==A?N(k,I,v,C):A.interrupt().each(function(){F(this,arguments).event(C).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},g.scaleBy=function(k,I,v,C){g.scaleTo(k,function(){var A=this.__zoom.k,M=typeof I=="function"?I.apply(this,arguments):I;return A*M},v,C)},g.scaleTo=function(k,I,v,C){g.transform(k,function(){var A=t.apply(this,arguments),M=this.__zoom,B=v==null?S(A):typeof v=="function"?v.apply(this,arguments):v,U=M.invert(B),V=typeof I=="function"?I.apply(this,arguments):I;return n(y(p(M,V),B,U),A,s)},v,C)},g.translateBy=function(k,I,v,C){g.transform(k,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof v=="function"?v.apply(this,arguments):v),t.apply(this,arguments),s)},null,C)},g.translateTo=function(k,I,v,C,A){g.transform(k,function(){var M=t.apply(this,arguments),B=this.__zoom,U=C==null?S(M):typeof C=="function"?C.apply(this,arguments):C;return n(gi.translate(U[0],U[1]).scale(B.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof v=="function"?-v.apply(this,arguments):-v),M,s)},C,A)};function p(k,I){return I=Math.max(r[0],Math.min(r[1],I)),I===k.k?k:new mt(I,k.x,k.y)}function y(k,I,v){var C=I[0]-v[0]*k.k,A=I[1]-v[1]*k.k;return C===k.x&&A===k.y?k:new mt(k.k,C,A)}function S(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function N(k,I,v,C){k.on("start.zoom",function(){F(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){F(this,arguments).event(C).end()}).tween("zoom",function(){var A=this,M=arguments,B=F(A,M).event(C),U=t.apply(A,M),V=v==null?S(U):typeof v=="function"?v.apply(A,M):v,$=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),O=A.__zoom,ee=typeof I=="function"?I.apply(A,M):I,de=u(O.invert(V).concat($/O.k),ee.invert(V).concat($/ee.k));return function(H){if(H===1)H=ee;else{var ge=de(H),_e=$/ge[2];H=new mt(_e,V[0]-ge[0]*_e,V[1]-ge[1]*_e)}B.zoom(null,H)}})}function F(k,I,v){return!v&&k.__zooming||new T(k,I)}function T(k,I){this.that=k,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(k,I),this.taps=0}T.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(k,I){return this.mouse&&k!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&k!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&k!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(k){var I=et(this.that).datum();a.call(k,this.that,new hf(k,{sourceEvent:this.sourceEvent,target:g,type:k,transform:this.that.__zoom,dispatch:a}),I)}};function z(k,...I){if(!e.apply(this,arguments))return;var v=F(this,I).event(k),C=this.__zoom,A=Math.max(r[0],Math.min(r[1],C.k*Math.pow(2,i.apply(this,arguments)))),M=ut(k);if(v.wheel)(v.mouse[0][0]!==M[0]||v.mouse[0][1]!==M[1])&&(v.mouse[1]=C.invert(v.mouse[0]=M)),clearTimeout(v.wheel);else{if(C.k===A)return;v.mouse=[M,C.invert(M)],Zn(this),v.start()}hn(k),v.wheel=setTimeout(B,m),v.zoom("mouse",n(y(p(C,A),v.mouse[0],v.mouse[1]),v.extent,s));function B(){v.wheel=null,v.end()}}function D(k,...I){if(f||!e.apply(this,arguments))return;var v=k.currentTarget,C=F(this,I,!0).event(k),A=et(k.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",$,!0),M=ut(k,v),B=k.clientX,U=k.clientY;$r(k.view),Mi(k),C.mouse=[M,this.__zoom.invert(M)],Zn(this),C.start();function V(O){if(hn(O),!C.moved){var ee=O.clientX-B,de=O.clientY-U;C.moved=ee*ee+de*de>_}C.event(O).zoom("mouse",n(y(C.that.__zoom,C.mouse[0]=ut(O,v),C.mouse[1]),C.extent,s))}function $(O){A.on("mousemove.zoom mouseup.zoom",null),el(O.view,C.moved),hn(O),C.event(O).end()}}function Y(k,...I){if(e.apply(this,arguments)){var v=this.__zoom,C=ut(k.changedTouches?k.changedTouches[0]:k,this),A=v.invert(C),M=v.k*(k.shiftKey?.5:2),B=n(y(p(v,M),C,A),t.apply(this,I),s);hn(k),l>0?et(this).transition().duration(l).call(N,B,C,k):et(this).call(g.transform,B,C,k)}}function K(k,...I){if(e.apply(this,arguments)){var v=k.touches,C=v.length,A=F(this,I,k.changedTouches.length===C).event(k),M,B,U,V;for(Mi(k),B=0;B<C;++B)U=v[B],V=ut(U,this),V=[V,this.__zoom.invert(V),U.identifier],A.touch0?!A.touch1&&A.touch0[2]!==V[2]&&(A.touch1=V,A.taps=0):(A.touch0=V,M=!0,A.taps=1+!!c);c&&(c=clearTimeout(c)),M&&(A.taps<2&&(d=V[0],c=setTimeout(function(){c=null},h)),Zn(this),A.start())}}function q(k,...I){if(this.__zooming){var v=F(this,I).event(k),C=k.changedTouches,A=C.length,M,B,U,V;for(hn(k),M=0;M<A;++M)B=C[M],U=ut(B,this),v.touch0&&v.touch0[2]===B.identifier?v.touch0[0]=U:v.touch1&&v.touch1[2]===B.identifier&&(v.touch1[0]=U);if(B=v.that.__zoom,v.touch1){var $=v.touch0[0],O=v.touch0[1],ee=v.touch1[0],de=v.touch1[1],H=(H=ee[0]-$[0])*H+(H=ee[1]-$[1])*H,ge=(ge=de[0]-O[0])*ge+(ge=de[1]-O[1])*ge;B=p(B,Math.sqrt(H/ge)),U=[($[0]+ee[0])/2,($[1]+ee[1])/2],V=[(O[0]+de[0])/2,(O[1]+de[1])/2]}else if(v.touch0)U=v.touch0[0],V=v.touch0[1];else return;v.zoom("touch",n(y(B,U,V),v.extent,s))}}function j(k,...I){if(this.__zooming){var v=F(this,I).event(k),C=k.changedTouches,A=C.length,M,B;for(Mi(k),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),M=0;M<A;++M)B=C[M],v.touch0&&v.touch0[2]===B.identifier?delete v.touch0:v.touch1&&v.touch1[2]===B.identifier&&delete v.touch1;if(v.touch1&&!v.touch0&&(v.touch0=v.touch1,delete v.touch1),v.touch0)v.touch0[1]=this.__zoom.invert(v.touch0[0]);else if(v.end(),v.taps===2&&(B=ut(B,this),Math.hypot(d[0]-B[0],d[1]-B[1])<b)){var U=et(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return g.wheelDelta=function(k){return arguments.length?(i=typeof k=="function"?k:Yn(+k),g):i},g.filter=function(k){return arguments.length?(e=typeof k=="function"?k:Yn(!!k),g):e},g.touchable=function(k){return arguments.length?(o=typeof k=="function"?k:Yn(!!k),g):o},g.extent=function(k){return arguments.length?(t=typeof k=="function"?k:Yn([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),g):t},g.scaleExtent=function(k){return arguments.length?(r[0]=+k[0],r[1]=+k[1],g):[r[0],r[1]]},g.translateExtent=function(k){return arguments.length?(s[0][0]=+k[0][0],s[1][0]=+k[1][0],s[0][1]=+k[0][1],s[1][1]=+k[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(k){return arguments.length?(n=k,g):n},g.duration=function(k){return arguments.length?(l=+k,g):l},g.interpolate=function(k){return arguments.length?(u=k,g):u},g.on=function(){var k=a.on.apply(a,arguments);return k===a?g:k},g.clickDistance=function(k){return arguments.length?(_=(k=+k)*k,g):Math.sqrt(_)},g.tapDistance=function(k){return arguments.length?(b=+k,g):b},g}const Nn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:i}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},ti=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Xt;(function(e){e.Strict="strict",e.Loose="loose"})(Xt||(Xt={}));var ft;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ft||(ft={}));var ni;(function(e){e.Partial="partial",e.Full="full"})(ni||(ni={}));const Bi={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var tn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(tn||(tn={}));var ii;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ii||(ii={}));var me;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(me||(me={}));const Ro={[me.Left]:me.Right,[me.Right]:me.Left,[me.Top]:me.Bottom,[me.Bottom]:me.Top};function pf(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Wo(e,t,n){if(!n)return;const i=[];e.forEach((o,r)=>{t!=null&&t.has(r)||i.push(o)}),i.length&&n(i)}function Bo(e){return e===null?null:e?"valid":"invalid"}const kf=e=>"id"in e&&"source"in e&&"target"in e,ml=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),On=(e,t=[0,0])=>{const{width:n,height:i}=Yt(e),o=e.origin??t,r=n*o[0],s=i*o[1];return{x:e.position.x-r,y:e.position.y-s}},mi=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(i=>{if(t.filter===void 0||t.filter(i)){const o=Zi(i);n=to(n,o)}}),no(n)},_l=(e,t,[n,i,o]=[0,0,1],r=!1,s=!1)=>{const l={...yi(t,[n,i,o]),width:t.width/o,height:t.height/o},u=[];for(const a of e.values()){const{measured:c,selectable:d=!0,hidden:f=!1}=a;if(s&&!d||f)continue;const h=c.width??a.width??a.initialWidth??null,m=c.height??a.height??a.initialHeight??null,_=io(l,_i(a)),b=(h??0)*(m??0),g=r&&_>0;(!a.internals.handleBounds||g||_>=b||a.dragging)&&u.push(a)}return u},Ki=(e,t)=>{const n=new Set;return e.forEach(i=>{n.add(i.id)}),t.filter(i=>n.has(i.source)||n.has(i.target))};function Ko(e,t){const n=new Map,i=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!i||i.has(o.id))&&n.set(o.id,o)}),n}async function Fo({nodes:e,width:t,height:n,panZoom:i,minZoom:o,maxZoom:r},s){if(e.size===0)return Promise.resolve(!1);const l=mi(e),u=wl(l,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??r,(s==null?void 0:s.padding)??.1);return await i.setViewport(u,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function vf({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:r}){const s=n.get(e),l=s.parentId?n.get(s.parentId):void 0,{x:u,y:a}=l?l.internals.positionAbsolute:{x:0,y:0},c=s.origin??i;let d=o;if(s.extent==="parent"&&!s.expandParent)if(!l)r==null||r("005",Nn.error005());else{const h=l.measured.width,m=l.measured.height;h&&m&&(d=[[u,a],[u+h,a+m]])}else l&&an(s.extent)&&(d=[[s.extent[0][0]+u,s.extent[0][1]+a],[s.extent[1][0]+u,s.extent[1][1]+a]]);const f=an(d)?Vt(t,d,s.measured):t;return{position:{x:f.x-u+s.measured.width*c[0],y:f.y-a+s.measured.height*c[1]},positionAbsolute:f}}async function Sf({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:i,onBeforeDelete:o}){const r=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const h=r.has(f.id),m=!h&&f.parentId&&s.find(_=>_.id===f.parentId);(h||m)&&s.push(f)}const l=new Set(t.map(f=>f.id)),u=i.filter(f=>f.deletable!==!1),c=Ki(s,u);for(const f of u)l.has(f.id)&&!c.find(m=>m.id===f.id)&&c.push(f);if(!o)return{edges:c,nodes:s};const d=await o({nodes:s,edges:c});return typeof d=="boolean"?d?{edges:c,nodes:s}:{edges:[],nodes:[]}:d}const un=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Vt=(e={x:0,y:0},t,n)=>({x:un(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:un(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function yl(e,t,n){const{width:i,height:o}=Yt(n),{x:r,y:s}=n.internals.positionAbsolute;return Vt(e,[[r,s],[r+i,s+o]],t)}const Zo=(e,t,n)=>e<t?un(Math.abs(e-t),1,t)/t:e>n?-un(Math.abs(e-n),1,t)/t:0,bl=(e,t,n=15,i=40)=>{const o=Zo(e.x,i,t.width-i)*n,r=Zo(e.y,i,t.height-i)*n;return[o,r]},to=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Fi=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),no=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),_i=(e,t=[0,0])=>{var o,r;const{x:n,y:i}=ml(e)?e.internals.positionAbsolute:On(e,t);return{x:n,y:i,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0}},Zi=(e,t=[0,0])=>{var o,r;const{x:n,y:i}=ml(e)?e.internals.positionAbsolute:On(e,t);return{x:n,y:i,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:i+(((r=e.measured)==null?void 0:r.height)??e.height??e.initialHeight??0)}},Ef=(e,t)=>no(to(Fi(e),Fi(t))),io=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},At=e=>!isNaN(e)&&isFinite(e),Cf=(e,t)=>{},oo=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),yi=({x:e,y:t},[n,i,o],r=!1,s=[1,1])=>{const l={x:(e-n)/o,y:(t-i)/o};return r?oo(l,s):l},Mf=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i}),wl=(e,t,n,i,o,r)=>{const s=t/(e.width*(1+r)),l=n/(e.height*(1+r)),u=Math.min(s,l),a=un(u,i,o),c=e.x+e.width/2,d=e.y+e.height/2,f=t/2-c*a,h=n/2-d*a;return{x:f,y:h,zoom:a}},oi=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function an(e){return e!==void 0&&e!=="parent"}function Yt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function qo(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Pi(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:i,containerBounds:o}){const{x:r,y:s}=_t(e),l=yi({x:r-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},i),{x:u,y:a}=n?oo(l,t):l;return{xSnapped:u,ySnapped:a,...l}}const ro=e=>({width:e.offsetWidth,height:e.offsetHeight}),Pf=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Nf=["INPUT","SELECT","TEXTAREA"];function Of(e){var i,o;const t=((o=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Nf.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const pl=e=>"clientX"in e,_t=(e,t)=>{var r,s;const n=pl(e),i=n?e.clientX:(r=e.touches)==null?void 0:r[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Uo=(e,t,n,i,o)=>{const r=t.querySelectorAll(`.${e}`);return!r||!r.length?null:Array.from(r).map(s=>{const l=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(l.left-n.left)/i,y:(l.top-n.top)/i,...ro(s)}})};function zf({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:r,targetControlX:s,targetControlY:l}){const u=e*.125+o*.375+s*.375+n*.125,a=t*.125+r*.375+l*.375+i*.125,c=Math.abs(u-e),d=Math.abs(a-t);return[u,a,c,d]}function Ln(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Go({pos:e,x1:t,y1:n,x2:i,y2:o,c:r}){switch(e){case me.Left:return[t-Ln(t-i,r),n];case me.Right:return[t+Ln(i-t,r),n];case me.Top:return[t,n-Ln(n-o,r)];case me.Bottom:return[t,n+Ln(o-n,r)]}}function lo({sourceX:e,sourceY:t,sourcePosition:n=me.Bottom,targetX:i,targetY:o,targetPosition:r=me.Top,curvature:s=.25}){const[l,u]=Go({pos:n,x1:e,y1:t,x2:i,y2:o,c:s}),[a,c]=Go({pos:r,x1:i,y1:o,x2:e,y2:t,c:s}),[d,f,h,m]=zf({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:l,sourceControlY:u,targetControlX:a,targetControlY:c});return[`M${e},${t} C${l},${u} ${a},${c} ${i},${o}`,d,f,h,m]}function kl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,r=n<e?n+o:n-o,s=Math.abs(i-t)/2,l=i<t?i+s:i-s;return[r,l,o,s]}function Tf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){if(!o)return i;const r=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return i+(r?s:0)}function Df({sourceNode:e,targetNode:t,width:n,height:i,transform:o}){const r=to(Zi(e),Zi(t));r.x===r.x2&&(r.x2+=1),r.y===r.y2&&(r.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return io(s,no(r))>0}const Af=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`xy-edge__${e}${t||""}-${n}${i||""}`,Hf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),If=(e,t)=>{if(!e.source||!e.target)return t;let n;return kf(e)?n={...e}:n={...e,id:Af(e)},Hf(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function vl({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,r,s,l]=kl({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,r,s,l]}const Jo={[me.Left]:{x:-1,y:0},[me.Right]:{x:1,y:0},[me.Top]:{x:0,y:-1},[me.Bottom]:{x:0,y:1}},Xf=({source:e,sourcePosition:t=me.Bottom,target:n})=>t===me.Left||t===me.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},jo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Vf({source:e,sourcePosition:t=me.Bottom,target:n,targetPosition:i=me.Top,center:o,offset:r}){const s=Jo[t],l=Jo[i],u={x:e.x+s.x*r,y:e.y+s.y*r},a={x:n.x+l.x*r,y:n.y+l.y*r},c=Xf({source:u,sourcePosition:t,target:a}),d=c.x!==0?"x":"y",f=c[d];let h=[],m,_;const b={x:0,y:0},g={x:0,y:0},[p,y,S,N]=kl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*l[d]===-1){m=o.x??p,_=o.y??y;const T=[{x:m,y:u.y},{x:m,y:a.y}],z=[{x:u.x,y:_},{x:a.x,y:_}];s[d]===f?h=d==="x"?T:z:h=d==="x"?z:T}else{const T=[{x:u.x,y:a.y}],z=[{x:a.x,y:u.y}];if(d==="x"?h=s.x===f?z:T:h=s.y===f?T:z,t===i){const j=Math.abs(e[d]-n[d]);if(j<=r){const k=Math.min(r-1,r-j);s[d]===f?b[d]=(u[d]>e[d]?-1:1)*k:g[d]=(a[d]>n[d]?-1:1)*k}}if(t!==i){const j=d==="x"?"y":"x",k=s[d]===l[j],I=u[j]>a[j],v=u[j]<a[j];(s[d]===1&&(!k&&I||k&&v)||s[d]!==1&&(!k&&v||k&&I))&&(h=d==="x"?T:z)}const D={x:u.x+b.x,y:u.y+b.y},Y={x:a.x+g.x,y:a.y+g.y},K=Math.max(Math.abs(D.x-h[0].x),Math.abs(Y.x-h[0].x)),q=Math.max(Math.abs(D.y-h[0].y),Math.abs(Y.y-h[0].y));K>=q?(m=(D.x+Y.x)/2,_=h[0].y):(m=h[0].x,_=(D.y+Y.y)/2)}return[[e,{x:u.x+b.x,y:u.y+b.y},...h,{x:a.x+g.x,y:a.y+g.y},n],m,_,S,N]}function Yf(e,t,n,i){const o=Math.min(jo(e,t)/2,jo(t,n)/2,i),{x:r,y:s}=t;if(e.x===r&&r===n.x||e.y===s&&s===n.y)return`L${r} ${s}`;if(e.y===s){const a=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${r+o*a},${s}Q ${r},${s} ${r},${s+o*c}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${r},${s+o*u}Q ${r},${s} ${r+o*l},${s}`}function ri({sourceX:e,sourceY:t,sourcePosition:n=me.Bottom,targetX:i,targetY:o,targetPosition:r=me.Top,borderRadius:s=5,centerX:l,centerY:u,offset:a=20}){const[c,d,f,h,m]=Vf({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:r,center:{x:l,y:u},offset:a});return[c.reduce((b,g,p)=>{let y="";return p>0&&p<c.length-1?y=Yf(c[p-1],g,c[p+1],s):y=`${p===0?"M":"L"}${g.x} ${g.y}`,b+=y,b},""),d,f,h,m]}function Qo(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Lf(e){var d;const{sourceNode:t,targetNode:n}=e;if(!Qo(t)||!Qo(n))return null;const i=t.internals.handleBounds||xo(t.handles),o=n.internals.handleBounds||xo(n.handles),r=$o((i==null?void 0:i.source)??[],e.sourceHandle),s=$o(e.connectionMode===Xt.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!r||!s)return(d=e.onError)==null||d.call(e,"008",Nn.error008(r?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(r==null?void 0:r.position)||me.Bottom,u=(s==null?void 0:s.position)||me.Top,a=Cn(t,r,l),c=Cn(n,s,u);return{sourceX:a.x,sourceY:a.y,targetX:c.x,targetY:c.y,sourcePosition:l,targetPosition:u}}function xo(e){if(!e)return null;const t=[],n=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?t.push(i):i.type==="target"&&n.push(i);return{source:t,target:n}}function Cn(e,t,n=me.Left,i=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,r=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:l}=t??Yt(e);if(i)return{x:o+s/2,y:r+l/2};switch((t==null?void 0:t.position)??n){case me.Top:return{x:o+s/2,y:r};case me.Right:return{x:o+s,y:r+l/2};case me.Bottom:return{x:o+s/2,y:r+l};case me.Left:return{x:o,y:r+l/2}}}function $o(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function qi(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function Rf(e,{id:t,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const r=new Set;return e.reduce((s,l)=>([l.markerStart||i,l.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const a=qi(u,t);r.has(a)||(s.push({id:a,color:u.color||n,...u}),r.add(a))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}const so={nodeOrigin:[0,0],nodeExtent:ti,elevateNodesOnSelect:!0,defaults:{}},Wf={...so,checkEquality:!0};function uo(e,t){const n={...e};for(const i in t)t[i]!==void 0&&(n[i]=t[i]);return n}function Bf(e,t,n){const i=uo(so,n);for(const o of e.values())if(o.parentId)ao(o,e,t,i);else{const r=On(o,i.nodeOrigin),s=an(o.extent)?o.extent:i.nodeExtent,l=Vt(r,s,Yt(o));o.internals.positionAbsolute=l}}function Sl(e,t,n,i){var l,u;const o=uo(Wf,i),r=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const a of e){let c=r.get(a.id);if(o.checkEquality&&a===(c==null?void 0:c.internals.userNode))t.set(a.id,c);else{const d=On(a,o.nodeOrigin),f=an(a.extent)?a.extent:o.nodeExtent,h=Vt(d,f,Yt(a));c={...o.defaults,...a,measured:{width:(l=a.measured)==null?void 0:l.width,height:(u=a.measured)==null?void 0:u.height},internals:{positionAbsolute:h,handleBounds:a.measured?c==null?void 0:c.internals.handleBounds:void 0,z:El(a,s),userNode:a}},t.set(a.id,c)}a.parentId&&ao(c,t,n,i)}}function Kf(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ao(e,t,n,i){const{elevateNodesOnSelect:o,nodeOrigin:r,nodeExtent:s}=uo(so,i),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Kf(e,n);const a=o?1e3:0,{x:c,y:d,z:f}=Ff(e,u,r,s,a),{positionAbsolute:h}=e.internals,m=c!==h.x||d!==h.y;(m||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:c,y:d}:h,z:f}})}function El(e,t){return(At(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Ff(e,t,n,i,o){const{x:r,y:s}=t.internals.positionAbsolute,l=Yt(e),u=On(e,n),a=an(e.extent)?Vt(u,e.extent,l):u;let c=Vt({x:r+a.x,y:s+a.y},i,l);e.extent==="parent"&&(c=yl(c,l,t));const d=El(e,o),f=t.internals.z??0;return{x:c.x,y:c.y,z:f>d?f:d}}function Zf(e,t,n,i=[0,0]){var s;const o=[],r=new Map;for(const l of e){const u=t.get(l.parentId);if(!u)continue;const a=((s=r.get(l.parentId))==null?void 0:s.expandedRect)??_i(u),c=Ef(a,l.rect);r.set(l.parentId,{expandedRect:c,parent:u})}return r.size>0&&r.forEach(({expandedRect:l,parent:u},a)=>{var y;const c=u.internals.positionAbsolute,d=Yt(u),f=u.origin??i,h=l.x<c.x?Math.round(Math.abs(c.x-l.x)):0,m=l.y<c.y?Math.round(Math.abs(c.y-l.y)):0,_=Math.max(d.width,Math.round(l.width)),b=Math.max(d.height,Math.round(l.height)),g=(_-d.width)*f[0],p=(b-d.height)*f[1];(h>0||m>0||g||p)&&(o.push({id:a,type:"position",position:{x:u.position.x-h+g,y:u.position.y-m+p}}),(y=n.get(a))==null||y.forEach(S=>{e.some(N=>N.id===S.id)||o.push({id:S.id,type:"position",position:{x:S.position.x+h,y:S.position.y+m}})})),(d.width<l.width||d.height<l.height||h||m)&&o.push({id:a,type:"dimensions",setAttributes:!0,dimensions:{width:_+(h?f[0]*h-g:0),height:b+(m?f[1]*m-p:0)}})}),o}function qf(e,t,n,i,o,r){const s=i==null?void 0:i.querySelector(".xyflow__viewport");let l=!1;if(!s)return{changes:[],updatedInternals:l};const u=[],a=window.getComputedStyle(s),{m22:c}=new window.DOMMatrixReadOnly(a.transform),d=[];for(const f of e.values()){const h=t.get(f.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),l=!0;continue}const m=ro(f.nodeElement),_=h.measured.width!==m.width||h.measured.height!==m.height;if(!!(m.width&&m.height&&(_||!h.internals.handleBounds||f.force))){const g=f.nodeElement.getBoundingClientRect(),p=an(h.extent)?h.extent:r;let{positionAbsolute:y}=h.internals;h.parentId&&h.extent==="parent"?y=yl(y,m,t.get(h.parentId)):p&&(y=Vt(y,p,m));const S={...h,measured:m,internals:{...h.internals,positionAbsolute:y,handleBounds:{source:Uo("source",f.nodeElement,g,c,h.id),target:Uo("target",f.nodeElement,g,c,h.id)}}};t.set(h.id,S),h.parentId&&ao(S,t,n,{nodeOrigin:o}),l=!0,_&&(u.push({id:h.id,type:"dimensions",dimensions:m}),h.expandParent&&h.parentId&&d.push({id:h.id,parentId:h.parentId,rect:_i(S,o)}))}}if(d.length>0){const f=Zf(d,t,n,o);u.push(...f)}return{changes:u,updatedInternals:l}}async function Uf({delta:e,panZoom:t,transform:n,translateExtent:i,width:o,height:r}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,r]],i),l=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(l)}function er(e,t,n,i,o,r){let s=o;const l=i.get(s)||new Map;i.set(s,l.set(n,t)),s=`${o}-${e}`;const u=i.get(s)||new Map;if(i.set(s,u.set(n,t)),r){s=`${o}-${e}-${r}`;const a=i.get(s)||new Map;i.set(s,a.set(n,t))}}function Cl(e,t,n){e.clear(),t.clear();for(const i of n){const{source:o,target:r,sourceHandle:s=null,targetHandle:l=null}=i,u={edgeId:i.id,source:o,target:r,sourceHandle:s,targetHandle:l},a=`${o}-${s}--${r}-${l}`,c=`${r}-${l}--${o}-${s}`;er("source",u,c,e,o,s),er("target",u,a,e,r,l),t.set(i.id,i)}}function Ml(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Ml(n,t):!1}function tr(e,t,n){var o;let i=e;do{if((o=i==null?void 0:i.matches)!=null&&o.call(i,t))return!0;if(i===n)return!1;i=i==null?void 0:i.parentElement}while(i);return!1}function Gf(e,t,n,i){const o=new Map;for(const[r,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!Ml(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const l=e.get(r);l&&o.set(r,{id:r,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return o}function Ni({nodeId:e,dragItems:t,nodeLookup:n,dragging:i=!0}){var s,l,u;const o=[];for(const[a,c]of t){const d=(s=n.get(a))==null?void 0:s.internals.userNode;d&&o.push({...d,position:c.position,dragging:i})}if(!e)return[o[0],o];const r=(l=n.get(e))==null?void 0:l.internals.userNode;return[r?{...r,position:((u=t.get(e))==null?void 0:u.position)||r.position,dragging:i}:o[0],o]}function Jf({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:i,onDragStop:o}){let r={x:null,y:null},s=0,l=new Map,u=!1,a={x:0,y:0},c=null,d=!1,f=null,h=!1;function m({noDragClassName:b,handleSelector:g,domNode:p,isSelectable:y,nodeId:S,nodeClickDistance:N=0}){f=et(p);function F({x:Y,y:K},q){const{nodeLookup:j,nodeExtent:k,snapGrid:I,snapToGrid:v,nodeOrigin:C,onNodeDrag:A,onSelectionDrag:M,onError:B,updateNodePositions:U}=t();r={x:Y,y:K};let V=!1,$={x:0,y:0,x2:0,y2:0};if(l.size>1&&k){const O=mi(l);$=Fi(O)}for(const[O,ee]of l){if(!j.has(O))continue;let de={x:Y-ee.distance.x,y:K-ee.distance.y};v&&(de=oo(de,I));let H=[[k[0][0],k[0][1]],[k[1][0],k[1][1]]];if(l.size>1&&k&&!ee.extent){const{positionAbsolute:be}=ee.internals,pe=be.x-$.x+k[0][0],ve=be.x+ee.measured.width-$.x2+k[1][0],Oe=be.y-$.y+k[0][1],J=be.y+ee.measured.height-$.y2+k[1][1];H=[[pe,Oe],[ve,J]]}const{position:ge,positionAbsolute:_e}=vf({nodeId:O,nextPosition:de,nodeLookup:j,nodeExtent:H,nodeOrigin:C,onError:B});V=V||ee.position.x!==ge.x||ee.position.y!==ge.y,ee.position=ge,ee.internals.positionAbsolute=_e}if(V&&(U(l,!0),q&&(i||A||!S&&M))){const[O,ee]=Ni({nodeId:S,dragItems:l,nodeLookup:j});i==null||i(q,l,O,ee),A==null||A(q,O,ee),S||M==null||M(q,ee)}}async function T(){if(!c)return;const{transform:Y,panBy:K,autoPanSpeed:q}=t(),[j,k]=bl(a,c,q);(j!==0||k!==0)&&(r.x=(r.x??0)-j/Y[2],r.y=(r.y??0)-k/Y[2],await K({x:j,y:k})&&F(r,null)),s=requestAnimationFrame(T)}function z(Y){var V;const{nodeLookup:K,multiSelectionActive:q,nodesDraggable:j,transform:k,snapGrid:I,snapToGrid:v,selectNodesOnDrag:C,onNodeDragStart:A,onSelectionDragStart:M,unselectNodesAndEdges:B}=t();d=!0,(!C||!y)&&!q&&S&&((V=K.get(S))!=null&&V.selected||B()),y&&C&&S&&(e==null||e(S));const U=Pi(Y.sourceEvent,{transform:k,snapGrid:I,snapToGrid:v,containerBounds:c});if(r=U,l=Gf(K,j,U,S),l.size>0&&(n||A||!S&&M)){const[$,O]=Ni({nodeId:S,dragItems:l,nodeLookup:K});n==null||n(Y.sourceEvent,l,$,O),A==null||A(Y.sourceEvent,$,O),S||M==null||M(Y.sourceEvent,O)}}const D=Na().clickDistance(N).on("start",Y=>{const{domNode:K,nodeDragThreshold:q,transform:j,snapGrid:k,snapToGrid:I}=t();c=(K==null?void 0:K.getBoundingClientRect())||null,h=!1,q===0&&z(Y),r=Pi(Y.sourceEvent,{transform:j,snapGrid:k,snapToGrid:I,containerBounds:c}),a=_t(Y.sourceEvent,c)}).on("drag",Y=>{const{autoPanOnNodeDrag:K,transform:q,snapGrid:j,snapToGrid:k,nodeDragThreshold:I,nodeLookup:v}=t(),C=Pi(Y.sourceEvent,{transform:q,snapGrid:j,snapToGrid:k,containerBounds:c});if((Y.sourceEvent.type==="touchmove"&&Y.sourceEvent.touches.length>1||S&&!v.has(S))&&(h=!0),!h){if(!u&&K&&d&&(u=!0,T()),!d){const A=C.xSnapped-(r.x??0),M=C.ySnapped-(r.y??0);Math.sqrt(A*A+M*M)>I&&z(Y)}(r.x!==C.xSnapped||r.y!==C.ySnapped)&&l&&d&&(a=_t(Y.sourceEvent,c),F(C,Y.sourceEvent))}}).on("end",Y=>{if(!(!d||h)&&(u=!1,d=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:K,updateNodePositions:q,onNodeDragStop:j,onSelectionDragStop:k}=t();if(q(l,!1),o||j||!S&&k){const[I,v]=Ni({nodeId:S,dragItems:l,nodeLookup:K,dragging:!1});o==null||o(Y.sourceEvent,l,I,v),j==null||j(Y.sourceEvent,I,v),S||k==null||k(Y.sourceEvent,v)}}}).filter(Y=>{const K=Y.target;return!Y.button&&(!b||!tr(K,`.${b}`,p))&&(!g||tr(K,g,p))});f.call(D)}function _(){f==null||f.on(".drag",null)}return{update:m,destroy:_}}function jf(e,t,n){const i=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const r of t.values())io(o,_i(r))>0&&i.push(r);return i}const Qf=250;function xf(e,t,n,i){var l,u;let o=[],r=1/0;const s=jf(e,n,t+Qf);for(const a of s){const c=[...((l=a.internals.handleBounds)==null?void 0:l.source)??[],...((u=a.internals.handleBounds)==null?void 0:u.target)??[]];for(const d of c){if(i.nodeId===d.nodeId&&i.type===d.type&&i.id===d.id)continue;const{x:f,y:h}=Cn(a,d,d.position,!0),m=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(h-e.y,2));m>t||(m<r?(o=[{...d,x:f,y:h}],r=m):m===r&&o.push({...d,x:f,y:h}))}}if(!o.length)return null;if(o.length>1){const a=i.type==="source"?"target":"source";return o.find(c=>c.type===a)??o[0]}return o[0]}function Pl(e,t,n,i,o,r=!1){var a,c,d;const s=i.get(e);if(!s)return null;const l=o==="strict"?(a=s.internals.handleBounds)==null?void 0:a[t]:[...((c=s.internals.handleBounds)==null?void 0:c.source)??[],...((d=s.internals.handleBounds)==null?void 0:d.target)??[]],u=(n?l==null?void 0:l.find(f=>f.id===n):l==null?void 0:l[0])??null;return u&&r?{...u,...Cn(s,u,u.position,!0)}:u}function Nl(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function $f(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ol=()=>!0;function ed(e,{connectionMode:t,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:r,isTarget:s,domNode:l,nodeLookup:u,lib:a,autoPanOnConnect:c,flowId:d,panBy:f,cancelConnection:h,onConnectStart:m,onConnect:_,onConnectEnd:b,isValidConnection:g=Ol,onReconnectEnd:p,updateConnection:y,getTransform:S,getFromHandle:N,autoPanSpeed:F}){const T=Pf(e.target);let z=0,D;const{x:Y,y:K}=_t(e),q=T==null?void 0:T.elementFromPoint(Y,K),j=Nl(r,q),k=l==null?void 0:l.getBoundingClientRect();if(!k||!j)return;const I=Pl(o,j,i,u,t);if(!I)return;let v=_t(e,k),C=!1,A=null,M=!1,B=null;function U(){if(!c||!k)return;const[_e,be]=bl(v,k,F);f({x:_e,y:be}),z=requestAnimationFrame(U)}const V={...I,nodeId:o,type:j,position:I.position},$=u.get(o),ee={inProgress:!0,isValid:null,from:Cn($,V,me.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:$,to:v,toHandle:null,toPosition:Ro[V.position],toNode:null};y(ee);let de=ee;m==null||m(e,{nodeId:o,handleId:i,handleType:j});function H(_e){if(!N()||!V){ge(_e);return}const be=S();v=_t(_e,k),D=xf(yi(v,be,!1,[1,1]),n,u,V),C||(U(),C=!0);const pe=zl(_e,{handle:D,connectionMode:t,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:T,lib:a,flowId:d,nodeLookup:u});B=pe.handleDomNode,A=pe.connection,M=$f(!!D,pe.isValid);const ve={...de,isValid:M,to:D&&M?Mf({x:D.x,y:D.y},be):v,toHandle:pe.toHandle,toPosition:M&&pe.toHandle?pe.toHandle.position:Ro[V.position],toNode:pe.toHandle?u.get(pe.toHandle.nodeId):null};M&&D&&de.toHandle&&ve.toHandle&&de.toHandle.type===ve.toHandle.type&&de.toHandle.nodeId===ve.toHandle.nodeId&&de.toHandle.id===ve.toHandle.id&&de.to.x===ve.to.x&&de.to.y===ve.to.y||(y(ve),de=ve)}function ge(_e){(D||B)&&A&&M&&(_==null||_(A));const{inProgress:be,...pe}=de,ve={...pe,toPosition:de.toHandle?de.toPosition:null};b==null||b(_e,ve),r&&(p==null||p(_e,ve)),h(),cancelAnimationFrame(z),C=!1,M=!1,A=null,B=null,T.removeEventListener("mousemove",H),T.removeEventListener("mouseup",ge),T.removeEventListener("touchmove",H),T.removeEventListener("touchend",ge)}T.addEventListener("mousemove",H),T.addEventListener("mouseup",ge),T.addEventListener("touchmove",H),T.addEventListener("touchend",ge)}function zl(e,{handle:t,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:r,doc:s,lib:l,flowId:u,isValidConnection:a=Ol,nodeLookup:c}){const d=r==="target",f=t?s.querySelector(`.${l}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y:m}=_t(e),_=s.elementFromPoint(h,m),b=_!=null&&_.classList.contains(`${l}-flow__handle`)?_:f,g={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const p=Nl(void 0,b),y=b.getAttribute("data-nodeid"),S=b.getAttribute("data-handleid"),N=b.classList.contains("connectable"),F=b.classList.contains("connectableend");if(!y||!p)return g;const T={source:d?y:i,sourceHandle:d?S:o,target:d?i:y,targetHandle:d?o:S};g.connection=T;const D=N&&F&&(n===Xt.Strict?d&&p==="source"||!d&&p==="target":y!==i||S!==o);g.isValid=D&&a(T),g.toHandle=Pl(y,p,S,c,n,!1)}return g}const td={onPointerDown:ed,isValid:zl},nd=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,bi=e=>({x:e.x,y:e.y,zoom:e.k}),Oi=({x:e,y:t,zoom:n})=>gi.translate(e,t).scale(n),Gt=(e,t)=>e.target.closest(`.${t}`),Tl=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),zi=(e,t=0,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).on("end",n):e},Dl=e=>{const t=e.ctrlKey&&oi()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function id({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:r,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:a}){return c=>{if(Gt(c,t))return!1;c.preventDefault(),c.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(c.ctrlKey&&s){const b=ut(c),g=Dl(c),p=d*Math.pow(2,g);i.scaleTo(n,p,b,c);return}const f=c.deltaMode===1?20:1;let h=o===ft.Vertical?0:c.deltaX*f,m=o===ft.Horizontal?0:c.deltaY*f;!oi()&&c.shiftKey&&o!==ft.Vertical&&(h=c.deltaY*f,m=0),i.translateBy(n,-(h/d)*r,-(m/d)*r,{internal:!0});const _=bi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(c,_)),e.isPanScrolling&&(u==null||u(c,_),e.panScrollTimeout=setTimeout(()=>{a==null||a(c,_),e.isPanScrolling=!1},150))}}function od({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(i,o){if(!t&&i.type==="wheel"&&!i.ctrlKey||Gt(i,e))return null;i.preventDefault(),n.call(this,i,o)}}function rd({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return i=>{var r,s,l;if((r=i.sourceEvent)!=null&&r.internal)return;const o=bi(i.transform);e.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((l=i.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(i.sourceEvent,o))}}function ld({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return r=>{var s,l;e.usedRightMouseButton=!!(n&&Tl(t,e.mouseButton??0)),(s=r.sourceEvent)!=null&&s.sync||i([r.transform.x,r.transform.y,r.transform.k]),o&&!((l=r.sourceEvent)!=null&&l.internal)&&(o==null||o(r.sourceEvent,bi(r.transform)))}}function sd({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:r}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,r&&Tl(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&r(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o&&nd(e.prevViewport,s.transform))){const u=bi(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,u)},n?150:0)}}}function ud({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:r,userSelectionActive:s,noWheelClassName:l,noPanClassName:u,lib:a}){return c=>{var m;const d=e||t,f=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Gt(c,`${a}-flow__node`)||Gt(c,`${a}-flow__edge`)))return!0;if(!i&&!d&&!o&&!r&&!n||s||Gt(c,l)&&c.type==="wheel"||Gt(c,u)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!e)||!n&&c.ctrlKey&&c.type==="wheel")return!1;if(!n&&c.type==="touchstart"&&((m=c.touches)==null?void 0:m.length)>1)return c.preventDefault(),!1;if(!d&&!o&&!f&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&c.type==="mousedown")return!1;const h=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function ad({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:i,translateExtent:o,viewport:r,onPanZoom:s,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:a}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=wf().clickDistance(!At(i)||i<0?0:i).scaleExtent([t,n]).translateExtent(o),h=et(e).call(f);y({x:r.x,y:r.y,zoom:un(r.zoom,t,n)},[[0,0],[d.width,d.height]],o);const m=h.on("wheel.zoom"),_=h.on("dblclick.zoom");f.wheelDelta(Dl);function b(q,j){return h?new Promise(k=>{f==null||f.transform(zi(h,j==null?void 0:j.duration,()=>k(!0)),q)}):Promise.resolve(!1)}function g({noWheelClassName:q,noPanClassName:j,onPaneContextMenu:k,userSelectionActive:I,panOnScroll:v,panOnDrag:C,panOnScrollMode:A,panOnScrollSpeed:M,preventScrolling:B,zoomOnPinch:U,zoomOnScroll:V,zoomOnDoubleClick:$,zoomActivationKeyPressed:O,lib:ee,onTransformChange:de}){I&&!c.isZoomingOrPanning&&p();const ge=v&&!O&&!I?id({zoomPanValues:c,noWheelClassName:q,d3Selection:h,d3Zoom:f,panOnScrollMode:A,panOnScrollSpeed:M,zoomOnPinch:U,onPanZoomStart:l,onPanZoom:s,onPanZoomEnd:u}):od({noWheelClassName:q,preventScrolling:B,d3ZoomHandler:m});if(h.on("wheel.zoom",ge,{passive:!1}),!I){const be=rd({zoomPanValues:c,onDraggingChange:a,onPanZoomStart:l});f.on("start",be);const pe=ld({zoomPanValues:c,panOnDrag:C,onPaneContextMenu:!!k,onPanZoom:s,onTransformChange:de});f.on("zoom",pe);const ve=sd({zoomPanValues:c,panOnDrag:C,panOnScroll:v,onPaneContextMenu:k,onPanZoomEnd:u,onDraggingChange:a});f.on("end",ve)}const _e=ud({zoomActivationKeyPressed:O,panOnDrag:C,zoomOnScroll:V,panOnScroll:v,zoomOnDoubleClick:$,zoomOnPinch:U,userSelectionActive:I,noPanClassName:j,noWheelClassName:q,lib:ee});f.filter(_e),$?h.on("dblclick.zoom",_):h.on("dblclick.zoom",null)}function p(){f.on("zoom",null)}async function y(q,j,k){const I=Oi(q),v=f==null?void 0:f.constrain()(I,j,k);return v&&await b(v),new Promise(C=>C(v))}async function S(q,j){const k=Oi(q);return await b(k,j),new Promise(I=>I(k))}function N(q){if(h){const j=Oi(q),k=h.property("__zoom");(k.k!==q.zoom||k.x!==q.x||k.y!==q.y)&&(f==null||f.transform(h,j,null,{sync:!0}))}}function F(){const q=h?gl(h.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function T(q,j){return h?new Promise(k=>{f==null||f.scaleTo(zi(h,j==null?void 0:j.duration,()=>k(!0)),q)}):Promise.resolve(!1)}function z(q,j){return h?new Promise(k=>{f==null||f.scaleBy(zi(h,j==null?void 0:j.duration,()=>k(!0)),q)}):Promise.resolve(!1)}function D(q){f==null||f.scaleExtent(q)}function Y(q){f==null||f.translateExtent(q)}function K(q){const j=!At(q)||q<0?0:q;f==null||f.clickDistance(j)}return{update:g,destroy:p,setViewport:S,setViewportConstrained:y,getViewport:F,scaleTo:T,scaleBy:z,setScaleExtent:D,setTranslateExtent:Y,syncViewport:N,setClickDistance:K}}var nr;(function(e){e.Line="line",e.Handle="handle"})(nr||(nr={}));function cd(e){let t,n,i,o,r,s;const l=e[45].default,u=Ke(l,e,e[44],null);return{c(){t=G("div"),u&&u.c(),w(t,"data-handleid",e[6]),w(t,"data-nodeid",e[14]),w(t,"data-handlepos",e[2]),w(t,"data-id",n=e[13]+"-"+e[14]+"-"+(e[0]||null)+"-"+e[1]),w(t,"class",i=Ce(["svelte-flow__handle",`svelte-flow__handle-${e[2]}`,"nodrag","nopan",e[2],e[4]])),w(t,"style",e[3]),w(t,"role","button"),w(t,"tabindex","-1"),ce(t,"valid",e[7]),ce(t,"connectingto",e[5]),ce(t,"connectingfrom",e[9]),ce(t,"source",!e[11]),ce(t,"target",e[11]),ce(t,"connectablestart",e[12]),ce(t,"connectableend",e[12]),ce(t,"connectable",e[12]),ce(t,"connectionindicator",e[12]&&(!e[10]||e[8]))},m(a,c){L(a,t,c),u&&u.m(t,null),o=!0,r||(s=[se(t,"mousedown",e[32]),se(t,"touchstart",e[32])],r=!0)},p(a,c){u&&u.p&&(!o||c[1]&8192)&&Ze(u,l,a,a[44],o?Fe(l,a[44],c,null):qe(a[44]),null),(!o||c[0]&64)&&w(t,"data-handleid",a[6]),(!o||c[0]&4)&&w(t,"data-handlepos",a[2]),(!o||c[0]&8195&&n!==(n=a[13]+"-"+a[14]+"-"+(a[0]||null)+"-"+a[1]))&&w(t,"data-id",n),(!o||c[0]&20&&i!==(i=Ce(["svelte-flow__handle",`svelte-flow__handle-${a[2]}`,"nodrag","nopan",a[2],a[4]])))&&w(t,"class",i),(!o||c[0]&8)&&w(t,"style",a[3]),(!o||c[0]&148)&&ce(t,"valid",a[7]),(!o||c[0]&52)&&ce(t,"connectingto",a[5]),(!o||c[0]&532)&&ce(t,"connectingfrom",a[9]),(!o||c[0]&2068)&&ce(t,"source",!a[11]),(!o||c[0]&2068)&&ce(t,"target",a[11]),(!o||c[0]&4116)&&ce(t,"connectablestart",a[12]),(!o||c[0]&4116)&&ce(t,"connectableend",a[12]),(!o||c[0]&4116)&&ce(t,"connectable",a[12]),(!o||c[0]&5396)&&ce(t,"connectionindicator",a[12]&&(!a[10]||a[8]))},i(a){o||(R(u,a),o=!0)},o(a){Z(u,a),o=!1},d(a){a&&X(t),u&&u.d(a),r=!1,Ie(s)}}}function fd(e,t,n){let i,o,r,s,l,u,a,c,d,f,h,m,_,b,g,p,y,S,N,F,T,z,D,Y,K,{$$slots:q={},$$scope:j}=t,{id:k=void 0}=t,{type:I="source"}=t,{position:v=me.Top}=t,{style:C=void 0}=t,{isValidConnection:A=void 0}=t,{onconnect:M=void 0}=t,{ondisconnect:B=void 0}=t,{isConnectable:U=void 0}=t,{class:V=void 0}=t;const $=Gn("svelteflow__node_id"),O=Gn("svelteflow__node_connectable");Q(e,O,P=>n(43,K=P));const ee=He(),{connectionMode:de,domNode:H,nodeLookup:ge,connectionRadius:_e,viewport:be,isValidConnection:pe,lib:ve,addEdge:Oe,onedgecreate:J,panBy:Pe,cancelConnection:Se,updateConnection:ht,autoPanOnConnect:ot,edges:rt,connectionLookup:Pt,onconnect:Nt,onconnectstart:pt,onconnectend:kt,flowId:vt,connection:St}=ee;Q(e,de,P=>n(40,f=P)),Q(e,H,P=>n(55,D=P)),Q(e,ge,P=>n(54,z=P)),Q(e,_e,P=>n(56,Y=P)),Q(e,be,P=>n(46,_=P)),Q(e,pe,P=>n(51,S=P)),Q(e,ve,P=>n(53,T=P)),Q(e,J,P=>n(50,y=P)),Q(e,ot,P=>n(52,F=P)),Q(e,rt,P=>n(42,m=P)),Q(e,Pt,P=>n(41,h=P)),Q(e,Nt,P=>n(49,p=P)),Q(e,pt,P=>n(48,g=P)),Q(e,kt,P=>n(47,b=P)),Q(e,vt,P=>n(13,N=P)),Q(e,St,P=>n(39,d=P));function Ot(P){const Ge=pl(P);(Ge&&P.button===0||!Ge)&&td.onPointerDown(P,{handleId:r,nodeId:$,isTarget:i,connectionRadius:Y,domNode:D,nodeLookup:z,connectionMode:f,lib:T,autoPanOnConnect:F,flowId:N,isValidConnection:A??S,updateConnection:ht,cancelConnection:Se,panBy:Pe,onConnect:De=>{const ze=y?y(De):De;ze&&(Oe(ze),p==null||p(De))},onConnectStart:(De,ze)=>{g==null||g(De,{nodeId:ze.nodeId,handleId:ze.handleId,handleType:ze.handleType})},onConnectEnd:(De,ze)=>{b==null||b(De,ze)},getTransform:()=>[_.x,_.y,_.zoom],getFromHandle:()=>d.fromHandle})}let $e=null,lt;return e.$$set=P=>{"id"in P&&n(0,k=P.id),"type"in P&&n(1,I=P.type),"position"in P&&n(2,v=P.position),"style"in P&&n(3,C=P.style),"isValidConnection"in P&&n(33,A=P.isValidConnection),"onconnect"in P&&n(34,M=P.onconnect),"ondisconnect"in P&&n(35,B=P.ondisconnect),"isConnectable"in P&&n(36,U=P.isConnectable),"class"in P&&n(4,V=P.class),"$$scope"in P&&n(44,j=P.$$scope)},e.$$.update=()=>{var P,Ge,De,ze,Lt,Rt,Wt,Bt,Et;if(e.$$.dirty[0]&2&&n(11,i=I==="target"),e.$$.dirty[1]&4128&&n(12,o=U!==void 0?U:K),e.$$.dirty[0]&1&&n(6,r=k||null),e.$$.dirty[0]&3|e.$$.dirty[1]&3096&&(M||B)&&n(38,lt=h.get(`${$}-${I}${k?`-${k}`:""}`)),e.$$.dirty[1]&216){if($e&&!pf(lt,$e)){const zt=lt??new Map;Wo($e,zt,B),Wo(zt,$e,M)}n(37,$e=lt??new Map)}e.$$.dirty[1]&256&&n(10,s=!!d.fromHandle),e.$$.dirty[0]&66|e.$$.dirty[1]&256&&n(9,l=((P=d.fromHandle)==null?void 0:P.nodeId)===$&&((Ge=d.fromHandle)==null?void 0:Ge.type)===I&&((De=d.fromHandle)==null?void 0:De.id)===r),e.$$.dirty[0]&66|e.$$.dirty[1]&256&&n(5,u=((ze=d.toHandle)==null?void 0:ze.nodeId)===$&&((Lt=d.toHandle)==null?void 0:Lt.type)===I&&((Rt=d.toHandle)==null?void 0:Rt.id)===r),e.$$.dirty[0]&66|e.$$.dirty[1]&768&&n(8,a=f===Xt.Strict?((Wt=d.fromHandle)==null?void 0:Wt.type)!==I:$!==((Bt=d.fromHandle)==null?void 0:Bt.nodeId)||r!==((Et=d.fromHandle)==null?void 0:Et.id)),e.$$.dirty[0]&32|e.$$.dirty[1]&256&&n(7,c=u&&d.isValid)},[k,I,v,C,V,u,r,c,a,l,s,i,o,N,$,O,de,H,ge,_e,be,pe,ve,J,ot,rt,Pt,Nt,pt,kt,vt,St,Ot,A,M,B,U,$e,lt,d,f,h,m,K,j,q]}class dd extends ae{constructor(t){super(),ue(this,t,fd,cd,fe,{id:0,type:1,position:2,style:3,isValidConnection:33,onconnect:34,ondisconnect:35,isConnectable:36,class:4},null,[-1,-1])}}const li=dd;function hd(e){var u;let t,n,i=((u=e[0])==null?void 0:u.label)+"",o,r,s,l;return t=new li({props:{type:"target",position:e[1]??me.Top}}),s=new li({props:{type:"source",position:e[2]??me.Bottom}}),{c(){ie(t.$$.fragment),n=le(),o=ye(i),r=le(),ie(s.$$.fragment)},m(a,c){te(t,a,c),L(a,n,c),L(a,o,c),L(a,r,c),te(s,a,c),l=!0},p(a,[c]){var h;const d={};c&2&&(d.position=a[1]??me.Top),t.$set(d),(!l||c&1)&&i!==(i=((h=a[0])==null?void 0:h.label)+"")&&Te(o,i);const f={};c&4&&(f.position=a[2]??me.Bottom),s.$set(f)},i(a){l||(R(t.$$.fragment,a),R(s.$$.fragment,a),l=!0)},o(a){Z(t.$$.fragment,a),Z(s.$$.fragment,a),l=!1},d(a){a&&(X(n),X(o),X(r)),ne(t,a),ne(s,a)}}}function gd(e,t,n){const i=["data","targetPosition","sourcePosition"];Me(t,i);let{data:o={label:"Node"}}=t,{targetPosition:r=void 0}=t,{sourcePosition:s=void 0}=t;return e.$$set=l=>{t=ke(ke({},t),Qe(l)),n(3,Me(t,i)),"data"in l&&n(0,o=l.data),"targetPosition"in l&&n(1,r=l.targetPosition),"sourcePosition"in l&&n(2,s=l.sourcePosition)},[o,r,s]}class md extends ae{constructor(t){super(),ue(this,t,gd,hd,fe,{data:0,targetPosition:1,sourcePosition:2})}}const Al=md;function _d(e){var s;let t=((s=e[0])==null?void 0:s.label)+"",n,i,o,r;return o=new li({props:{type:"source",position:e[1]??me.Bottom}}),{c(){n=ye(t),i=le(),ie(o.$$.fragment)},m(l,u){L(l,n,u),L(l,i,u),te(o,l,u),r=!0},p(l,[u]){var c;(!r||u&1)&&t!==(t=((c=l[0])==null?void 0:c.label)+"")&&Te(n,t);const a={};u&2&&(a.position=l[1]??me.Bottom),o.$set(a)},i(l){r||(R(o.$$.fragment,l),r=!0)},o(l){Z(o.$$.fragment,l),r=!1},d(l){l&&(X(n),X(i)),ne(o,l)}}}function yd(e,t,n){const i=["data","sourcePosition"];Me(t,i);let{data:o={label:"Node"}}=t,{sourcePosition:r=void 0}=t;return e.$$set=s=>{t=ke(ke({},t),Qe(s)),n(2,Me(t,i)),"data"in s&&n(0,o=s.data),"sourcePosition"in s&&n(1,r=s.sourcePosition)},[o,r]}class bd extends ae{constructor(t){super(),ue(this,t,yd,_d,fe,{data:0,sourcePosition:1})}}const wd=bd;function pd(e){var s;let t=((s=e[0])==null?void 0:s.label)+"",n,i,o,r;return o=new li({props:{type:"target",position:e[1]??me.Top}}),{c(){n=ye(t),i=le(),ie(o.$$.fragment)},m(l,u){L(l,n,u),L(l,i,u),te(o,l,u),r=!0},p(l,[u]){var c;(!r||u&1)&&t!==(t=((c=l[0])==null?void 0:c.label)+"")&&Te(n,t);const a={};u&2&&(a.position=l[1]??me.Top),o.$set(a)},i(l){r||(R(o.$$.fragment,l),r=!0)},o(l){Z(o.$$.fragment,l),r=!1},d(l){l&&(X(n),X(i)),ne(o,l)}}}function kd(e,t,n){const i=["data","targetPosition"];Me(t,i);let{data:o={label:"Node"}}=t,{targetPosition:r=void 0}=t;return e.$$set=s=>{t=ke(ke({},t),Qe(s)),n(2,Me(t,i)),"data"in s&&n(0,o=s.data),"targetPosition"in s&&n(1,r=s.targetPosition)},[o,r]}class vd extends ae{constructor(t){super(),ue(this,t,kd,pd,fe,{data:0,targetPosition:1})}}const Sd=vd;function Ed(e,t,n){const i=[];return Me(t,i),e.$$set=o=>{t=ke(ke({},t),Qe(o)),n(0,Me(t,i))},[]}class Cd extends ae{constructor(t){super(),ue(this,t,Ed,null,fe,{})}}const Md=Cd;function ir(e,t,n){if(!t)return;const i=n?t.querySelector(n):t;i&&i.appendChild(e)}function Pd(e,{target:t,domNode:n}){return ir(e,n,t),{async update({target:i,domNode:o}){ir(e,o,i)},destroy(){e.parentNode&&e.parentNode.removeChild(e)}}}function Nd(e){let t,n,i,o,r;const s=e[3].default,l=Ke(s,e,e[2],null);return{c(){t=G("div"),l&&l.c()},m(u,a){L(u,t,a),l&&l.m(t,null),i=!0,o||(r=We(n=Pd.call(null,t,{target:".svelte-flow__edgelabel-renderer",domNode:e[0]})),o=!0)},p(u,[a]){l&&l.p&&(!i||a&4)&&Ze(l,s,u,u[2],i?Fe(s,u[2],a,null):qe(u[2]),null),n&&Ne(n.update)&&a&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:u[0]})},i(u){i||(R(l,u),i=!0)},o(u){Z(l,u),i=!1},d(u){u&&X(t),l&&l.d(u),o=!1,r()}}}function Od(e,t,n){let i,{$$slots:o={},$$scope:r}=t;const{domNode:s}=He();return Q(e,s,l=>n(0,i=l)),e.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class zd extends ae{constructor(t){super(),ue(this,t,Od,Nd,fe,{})}}const Hl=zd;function Il(){const{edgeLookup:e,selectionRect:t,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:r,elementsSelectable:s}=He();return l=>{const u=x(e).get(l);if(!u){console.warn("012",Nn.error012(l));return}(u.selectable||x(s)&&typeof u.selectable>"u")&&(t.set(null),n.set(null),u.selected?u.selected&&x(i)&&r({nodes:[],edges:[u]}):o([l]))}}function Td(e){let t,n,i=`translate(-50%, -50%) translate(${e[1]}px,${e[2]}px)`,o,r,s;const l=e[5].default,u=Ke(l,e,e[7],null);return{c(){t=G("div"),u&&u.c(),w(t,"class","svelte-flow__edge-label"),w(t,"style",n="pointer-events: all;"+e[0]),w(t,"role","button"),w(t,"tabindex","-1"),he(t,"transform",i)},m(a,c){L(a,t,c),u&&u.m(t,null),o=!0,r||(s=[se(t,"keyup",Ad),se(t,"click",e[6])],r=!0)},p(a,c){u&&u.p&&(!o||c&128)&&Ze(u,l,a,a[7],o?Fe(l,a[7],c,null):qe(a[7]),null),(!o||c&1&&n!==(n="pointer-events: all;"+a[0]))&&w(t,"style",n),(c&1||c&7&&i!==(i=`translate(-50%, -50%) translate(${a[1]}px,${a[2]}px)`))&&he(t,"transform",i)},i(a){o||(R(u,a),o=!0)},o(a){Z(u,a),o=!1},d(a){a&&X(t),u&&u.d(a),r=!1,Ie(s)}}}function Dd(e){let t,n;return t=new Hl({props:{$$slots:{default:[Td]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,[o]){const r={};o&135&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}const Ad=()=>{};function Hd(e,t,n){let{$$slots:i={},$$scope:o}=t,{style:r=void 0}=t,{x:s=void 0}=t,{y:l=void 0}=t;const u=Il(),a=Gn("svelteflow__edge_id"),c=()=>{a&&u(a)};return e.$$set=d=>{"style"in d&&n(0,r=d.style),"x"in d&&n(1,s=d.x),"y"in d&&n(2,l=d.y),"$$scope"in d&&n(7,o=d.$$scope)},[r,s,l,u,a,i,c,o]}class Id extends ae{constructor(t){super(),ue(this,t,Hd,Dd,fe,{style:0,x:1,y:2})}}const Xd=Id;function Vd(e){let t;return{c(){t=Ee("path"),w(t,"d",e[1]),w(t,"stroke-opacity",0),w(t,"stroke-width",e[10]),w(t,"fill","none"),w(t,"class","svelte-flow__edge-interaction")},m(n,i){L(n,t,i)},p(n,i){i&2&&w(t,"d",n[1])},d(n){n&&X(t)}}}function or(e){let t,n;return t=new Xd({props:{x:e[3],y:e[4],style:e[5],$$slots:{default:[Yd]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o&8&&(r.x=i[3]),o&16&&(r.y=i[4]),o&32&&(r.style=i[5]),o&4100&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Yd(e){let t;return{c(){t=ye(e[2])},m(n,i){L(n,t,i)},p(n,i){i&4&&Te(t,n[2])},d(n){n&&X(t)}}}function Ld(e){let t,n,i,o,r,s,l=e[10]&&Vd(e),u=e[2]&&or(e);return{c(){t=Ee("path"),i=le(),l&&l.c(),o=le(),u&&u.c(),r=xe(),w(t,"id",e[0]),w(t,"d",e[1]),w(t,"class",n=Ce(["svelte-flow__edge-path",e[9]])),w(t,"marker-start",e[6]),w(t,"marker-end",e[7]),w(t,"fill","none"),w(t,"style",e[8])},m(a,c){L(a,t,c),L(a,i,c),l&&l.m(a,c),L(a,o,c),u&&u.m(a,c),L(a,r,c),s=!0},p(a,[c]){(!s||c&1)&&w(t,"id",a[0]),(!s||c&2)&&w(t,"d",a[1]),(!s||c&512&&n!==(n=Ce(["svelte-flow__edge-path",a[9]])))&&w(t,"class",n),(!s||c&64)&&w(t,"marker-start",a[6]),(!s||c&128)&&w(t,"marker-end",a[7]),(!s||c&256)&&w(t,"style",a[8]),a[10]&&l.p(a,c),a[2]?u?(u.p(a,c),c&4&&R(u,1)):(u=or(a),u.c(),R(u,1),u.m(r.parentNode,r)):u&&(Ye(),Z(u,1,1,()=>{u=null}),Le())},i(a){s||(R(u),s=!0)},o(a){Z(u),s=!1},d(a){a&&(X(t),X(i),X(o),X(r)),l&&l.d(a),u&&u.d(a)}}}function Rd(e,t,n){let{id:i=void 0}=t,{path:o}=t,{label:r=void 0}=t,{labelX:s=void 0}=t,{labelY:l=void 0}=t,{labelStyle:u=void 0}=t,{markerStart:a=void 0}=t,{markerEnd:c=void 0}=t,{style:d=void 0}=t,{interactionWidth:f=20}=t,{class:h=void 0}=t,m=f===void 0?20:f;return e.$$set=_=>{"id"in _&&n(0,i=_.id),"path"in _&&n(1,o=_.path),"label"in _&&n(2,r=_.label),"labelX"in _&&n(3,s=_.labelX),"labelY"in _&&n(4,l=_.labelY),"labelStyle"in _&&n(5,u=_.labelStyle),"markerStart"in _&&n(6,a=_.markerStart),"markerEnd"in _&&n(7,c=_.markerEnd),"style"in _&&n(8,d=_.style),"interactionWidth"in _&&n(11,f=_.interactionWidth),"class"in _&&n(9,h=_.class)},[i,o,r,s,l,u,a,c,d,h,m,f]}class Wd extends ae{constructor(t){super(),ue(this,t,Rd,Ld,fe,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}const zn=Wd;function Bd(e){let t,n;return t=new zn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Kd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Me(t,s);let{label:l=void 0}=t,{labelStyle:u=void 0}=t,{style:a=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:m}=t,{sourcePosition:_}=t,{targetX:b}=t,{targetY:g}=t,{targetPosition:p}=t;return e.$$set=y=>{t=ke(ke({},t),Qe(y)),n(15,Me(t,s)),"label"in y&&n(0,l=y.label),"labelStyle"in y&&n(1,u=y.labelStyle),"style"in y&&n(2,a=y.style),"markerStart"in y&&n(3,c=y.markerStart),"markerEnd"in y&&n(4,d=y.markerEnd),"interactionWidth"in y&&n(5,f=y.interactionWidth),"sourceX"in y&&n(9,h=y.sourceX),"sourceY"in y&&n(10,m=y.sourceY),"sourcePosition"in y&&n(11,_=y.sourcePosition),"targetX"in y&&n(12,b=y.targetX),"targetY"in y&&n(13,g=y.targetY),"targetPosition"in y&&n(14,p=y.targetPosition)},e.$$.update=()=>{e.$$.dirty&32256&&n(8,[i,o,r]=lo({sourceX:h,sourceY:m,targetX:b,targetY:g,sourcePosition:_,targetPosition:p}),i,(n(7,o),n(9,h),n(10,m),n(12,b),n(13,g),n(11,_),n(14,p)),(n(6,r),n(9,h),n(10,m),n(12,b),n(13,g),n(11,_),n(14,p)))},[l,u,a,c,d,f,r,o,i,h,m,_,b,g,p]}class Fd extends ae{constructor(t){super(),ue(this,t,Kd,Bd,fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}const Xl=Fd;function Zd(e){let t,n;return t=new zn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function qd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Me(t,s);let{label:l=void 0}=t,{labelStyle:u=void 0}=t,{style:a=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:m}=t,{sourcePosition:_}=t,{targetX:b}=t,{targetY:g}=t,{targetPosition:p}=t;return e.$$set=y=>{t=ke(ke({},t),Qe(y)),n(15,Me(t,s)),"label"in y&&n(0,l=y.label),"labelStyle"in y&&n(1,u=y.labelStyle),"style"in y&&n(2,a=y.style),"markerStart"in y&&n(3,c=y.markerStart),"markerEnd"in y&&n(4,d=y.markerEnd),"interactionWidth"in y&&n(5,f=y.interactionWidth),"sourceX"in y&&n(9,h=y.sourceX),"sourceY"in y&&n(10,m=y.sourceY),"sourcePosition"in y&&n(11,_=y.sourcePosition),"targetX"in y&&n(12,b=y.targetX),"targetY"in y&&n(13,g=y.targetY),"targetPosition"in y&&n(14,p=y.targetPosition)},e.$$.update=()=>{e.$$.dirty&32256&&n(8,[i,o,r]=ri({sourceX:h,sourceY:m,targetX:b,targetY:g,sourcePosition:_,targetPosition:p}),i,(n(7,o),n(9,h),n(10,m),n(12,b),n(13,g),n(11,_),n(14,p)),(n(6,r),n(9,h),n(10,m),n(12,b),n(13,g),n(11,_),n(14,p)))},[l,u,a,c,d,f,r,o,i,h,m,_,b,g,p]}class Ud extends ae{constructor(t){super(),ue(this,t,qd,Zd,fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}const Gd=Ud;function Jd(e){let t,n;return t=new zn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function jd(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"];Me(t,s);let{label:l=void 0}=t,{labelStyle:u=void 0}=t,{style:a=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:m}=t,{targetX:_}=t,{targetY:b}=t;return e.$$set=g=>{t=ke(ke({},t),Qe(g)),n(13,Me(t,s)),"label"in g&&n(0,l=g.label),"labelStyle"in g&&n(1,u=g.labelStyle),"style"in g&&n(2,a=g.style),"markerStart"in g&&n(3,c=g.markerStart),"markerEnd"in g&&n(4,d=g.markerEnd),"interactionWidth"in g&&n(5,f=g.interactionWidth),"sourceX"in g&&n(9,h=g.sourceX),"sourceY"in g&&n(10,m=g.sourceY),"targetX"in g&&n(11,_=g.targetX),"targetY"in g&&n(12,b=g.targetY)},e.$$.update=()=>{e.$$.dirty&7680&&n(8,[i,o,r]=vl({sourceX:h,sourceY:m,targetX:_,targetY:b}),i,(n(7,o),n(9,h),n(10,m),n(11,_),n(12,b)),(n(6,r),n(9,h),n(10,m),n(11,_),n(12,b)))},[l,u,a,c,d,f,r,o,i,h,m,_,b]}class Qd extends ae{constructor(t){super(),ue(this,t,jd,Jd,fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}const xd=Qd;function $d(e){let t,n;return t=new zn({props:{path:e[8],labelX:e[7],labelY:e[6],label:e[0],labelStyle:e[1],markerStart:e[3],markerEnd:e[4],interactionWidth:e[5],style:e[2]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,[o]){const r={};o&256&&(r.path=i[8]),o&128&&(r.labelX=i[7]),o&64&&(r.labelY=i[6]),o&1&&(r.label=i[0]),o&2&&(r.labelStyle=i[1]),o&8&&(r.markerStart=i[3]),o&16&&(r.markerEnd=i[4]),o&32&&(r.interactionWidth=i[5]),o&4&&(r.style=i[2]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function eh(e,t,n){let i,o,r;const s=["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"];Me(t,s);let{label:l=void 0}=t,{labelStyle:u=void 0}=t,{style:a=void 0}=t,{markerStart:c=void 0}=t,{markerEnd:d=void 0}=t,{interactionWidth:f=void 0}=t,{sourceX:h}=t,{sourceY:m}=t,{sourcePosition:_}=t,{targetX:b}=t,{targetY:g}=t,{targetPosition:p}=t;return e.$$set=y=>{t=ke(ke({},t),Qe(y)),n(15,Me(t,s)),"label"in y&&n(0,l=y.label),"labelStyle"in y&&n(1,u=y.labelStyle),"style"in y&&n(2,a=y.style),"markerStart"in y&&n(3,c=y.markerStart),"markerEnd"in y&&n(4,d=y.markerEnd),"interactionWidth"in y&&n(5,f=y.interactionWidth),"sourceX"in y&&n(9,h=y.sourceX),"sourceY"in y&&n(10,m=y.sourceY),"sourcePosition"in y&&n(11,_=y.sourcePosition),"targetX"in y&&n(12,b=y.targetX),"targetY"in y&&n(13,g=y.targetY),"targetPosition"in y&&n(14,p=y.targetPosition)},e.$$.update=()=>{e.$$.dirty&32256&&n(8,[i,o,r]=ri({sourceX:h,sourceY:m,targetX:b,targetY:g,sourcePosition:_,targetPosition:p,borderRadius:0}),i,(n(7,o),n(9,h),n(10,m),n(12,b),n(13,g),n(11,_),n(14,p)),(n(6,r),n(9,h),n(10,m),n(12,b),n(13,g),n(11,_),n(14,p)))},[l,u,a,c,d,f,r,o,i,h,m,_,b,g,p]}class th extends ae{constructor(t){super(),ue(this,t,eh,$d,fe,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}const nh=th;function ih(e,t){const n=e.set,i=t.set,o=x(e),r=x(t);let l=o.length===0&&r.length>0?r:o;e.set(l);const u=a=>{const c=n(a);return l=c,i(l),c};e.set=t.set=u,e.update=t.update=a=>u(a(l))}function oh(e,t){const n=e.set,i=t.set;let o=x(t);e.set(o);const r=s=>{n(s),i(s),o=s};e.set=t.set=r,e.update=t.update=s=>r(s(o))}const rh=(e,t,n)=>{if(!n)return;const i=x(e),o=t.set,r=n.set;let s=n?x(n):{x:0,y:0,zoom:1};t.set(s),t.set=l=>(o(l),r(l),s=l,l),n.set=l=>(i==null||i.syncViewport(l),o(l),r(l),s=l,l),t.update=l=>{t.set(l(s))},n.update=l=>{n.set(l(s))}},lh=(e,t,n,i=[0,0],o=ti)=>{const{subscribe:r,set:s,update:l}=re([]);let u=e,a={},c=!0;const d=_=>(Sl(_,t,n,{elevateNodesOnSelect:c,nodeOrigin:i,nodeExtent:o,defaults:a,checkEquality:!1}),u=_,s(u),u),f=_=>d(_(u)),h=_=>{a=_},m=_=>{c=_.elevateNodesOnSelect??c};return d(u),{subscribe:r,set:d,update:f,setDefaultOptions:h,setOptions:m}},sh=(e,t,n,i)=>{const{subscribe:o,set:r,update:s}=re([]);let l=e,u=i||{};const a=f=>{const h=u?f.map(m=>({...u,...m})):f;Cl(t,n,h),l=h,r(l)},c=f=>a(f(l)),d=f=>{u=f};return a(l),{subscribe:o,set:a,update:c,setDefaultOptions:d}},Vl={input:wd,output:Sd,default:Al,group:Md},Yl={straight:xd,smoothstep:Gd,default:Xl,step:nh},uh=({nodes:e=[],edges:t=[],width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s})=>{const l=new Map,u=new Map,a=new Map,c=new Map,d=r??[0,0],f=s??ti;Sl(e,l,u,{nodeExtent:f,nodeOrigin:d,elevateNodesOnSelect:!1,checkEquality:!1}),Cl(a,c,t);let h={x:0,y:0,zoom:1};if(o&&n&&i){const m=mi(l,{filter:_=>!!((_.width||_.initialWidth)&&(_.height||_.initialHeight))});h=wl(m,n,i,.5,2,.1)}return{flowId:re(null),nodes:lh(e,l,u,d,f),nodeLookup:Je(l),parentLookup:Je(u),edgeLookup:Je(c),visibleNodes:Je([]),edges:sh(t,a,c),visibleEdges:Je([]),connectionLookup:Je(a),height:re(500),width:re(500),minZoom:re(.5),maxZoom:re(2),nodeOrigin:re(d),nodeDragThreshold:re(1),nodeExtent:re(f),translateExtent:re(ti),autoPanOnNodeDrag:re(!0),autoPanOnConnect:re(!0),fitViewOnInit:re(!1),fitViewOnInitDone:re(!1),fitViewOptions:re(void 0),panZoom:re(null),snapGrid:re(null),dragging:re(!1),selectionRect:re(null),selectionKeyPressed:re(!1),multiselectionKeyPressed:re(!1),deleteKeyPressed:re(!1),panActivationKeyPressed:re(!1),zoomActivationKeyPressed:re(!1),selectionRectMode:re(null),selectionMode:re(ni.Partial),nodeTypes:re(Vl),edgeTypes:re(Yl),viewport:re(h),connectionMode:re(Xt.Strict),domNode:re(null),connection:Je(Bi),connectionLineType:re(tn.Bezier),connectionRadius:re(20),isValidConnection:re(()=>!0),nodesDraggable:re(!0),nodesConnectable:re(!0),elementsSelectable:re(!0),selectNodesOnDrag:re(!0),markers:Je([]),defaultMarkerColor:re("#b1b1b7"),lib:Je("svelte"),onlyRenderVisibleElements:re(!1),onerror:re(Cf),ondelete:re(void 0),onedgecreate:re(void 0),onconnect:re(void 0),onconnectstart:re(void 0),onconnectend:re(void 0),onbeforedelete:re(void 0),nodesInitialized:re(!1),edgesInitialized:re(!1),viewportInitialized:re(!1),initialized:Je(!1)}};function ah(e){const t=xt([e.edges,e.nodes,e.nodeLookup,e.onlyRenderVisibleElements,e.viewport,e.width,e.height],([n,,i,o,r,s,l])=>o&&s&&l?n.filter(a=>{const c=i.get(a.source),d=i.get(a.target);return c&&d&&Df({sourceNode:c,targetNode:d,width:s,height:l,transform:[r.x,r.y,r.zoom]})}):n);return xt([t,e.nodes,e.nodeLookup,e.connectionMode,e.onerror],([n,,i,o,r])=>n.reduce((l,u)=>{const a=i.get(u.source),c=i.get(u.target);if(!a||!c)return l;const d=Lf({id:u.id,sourceNode:a,targetNode:c,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:o,onError:r});return d&&l.push({...u,zIndex:Tf({selected:u.selected,zIndex:u.zIndex,sourceNode:a,targetNode:c,elevateOnSelect:!1}),...d}),l},[]))}function ch(e){return xt([e.nodeLookup,e.onlyRenderVisibleElements,e.width,e.height,e.viewport,e.nodes],([t,n,i,o,r])=>{const s=[r.x,r.y,r.zoom];return n?_l(t,{x:0,y:0,width:i,height:o},s,!0):Array.from(t.values())})}const co=Symbol();function fh({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=uh({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});function u(v){l.nodeTypes.set({...Vl,...v})}function a(v){l.edgeTypes.set({...Yl,...v})}function c(v){const C=x(l.edges);l.edges.set(If(v,C))}const d=(v,C=!1)=>{var M;const A=x(l.nodeLookup);for(const[B,U]of v){const V=(M=A.get(B))==null?void 0:M.internals.userNode;V&&(V.position=U.position,V.dragging=C)}l.nodes.update(B=>B)};function f(v){var U,V,$;const C=x(l.nodeLookup),A=x(l.parentLookup),{changes:M,updatedInternals:B}=qf(v,C,x(l.parentLookup),x(l.domNode),x(l.nodeOrigin));if(B){if(Bf(C,A,{nodeOrigin:r,nodeExtent:s}),!x(l.fitViewOnInitDone)&&x(l.fitViewOnInit)){const O=x(l.fitViewOptions),ee=m({...O,nodes:O==null?void 0:O.nodes});l.fitViewOnInitDone.set(ee)}for(const O of M){const ee=(U=C.get(O.id))==null?void 0:U.internals.userNode;if(ee)switch(O.type){case"dimensions":{const de={...ee.measured,...O.dimensions};O.setAttributes&&(ee.width=((V=O.dimensions)==null?void 0:V.width)??ee.width,ee.height=(($=O.dimensions)==null?void 0:$.height)??ee.height),ee.measured=de;break}case"position":ee.position=O.position??ee.position;break}}l.nodes.update(O=>O),x(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function h(v){const C=x(l.panZoom),A=x(l.domNode);if(!C||!A)return Promise.resolve(!1);const{width:M,height:B}=ro(A),U=Ko(x(l.nodeLookup),v);return Fo({nodes:U,width:M,height:B,minZoom:x(l.minZoom),maxZoom:x(l.maxZoom),panZoom:C},v)}function m(v){const C=x(l.panZoom);if(!C)return!1;const A=Ko(x(l.nodeLookup),v);return Fo({nodes:A,width:x(l.width),height:x(l.height),minZoom:x(l.minZoom),maxZoom:x(l.maxZoom),panZoom:C},v),A.size>0}function _(v,C){const A=x(l.panZoom);return A?A.scaleBy(v,C):Promise.resolve(!1)}function b(v){return _(1.2,v)}function g(v){return _(1/1.2,v)}function p(v){const C=x(l.panZoom);C&&(C.setScaleExtent([v,x(l.maxZoom)]),l.minZoom.set(v))}function y(v){const C=x(l.panZoom);C&&(C.setScaleExtent([x(l.minZoom),v]),l.maxZoom.set(v))}function S(v){const C=x(l.panZoom);C&&(C.setTranslateExtent(v),l.translateExtent.set(v))}function N(v){let C=!1;return v.forEach(A=>{A.selected&&(A.selected=!1,C=!0)}),C}function F(v){var C;(C=x(l.panZoom))==null||C.setClickDistance(v)}function T(v){N((v==null?void 0:v.nodes)||x(l.nodes))&&l.nodes.set(x(l.nodes)),N((v==null?void 0:v.edges)||x(l.edges))&&l.edges.set(x(l.edges))}l.deleteKeyPressed.subscribe(async v=>{var C;if(v){const A=x(l.nodes),M=x(l.edges),B=A.filter(O=>O.selected),U=M.filter(O=>O.selected),{nodes:V,edges:$}=await Sf({nodesToRemove:B,edgesToRemove:U,nodes:A,edges:M,onBeforeDelete:x(l.onbeforedelete)});(V.length||$.length)&&(l.nodes.update(O=>O.filter(ee=>!V.some(de=>de.id===ee.id))),l.edges.update(O=>O.filter(ee=>!$.some(de=>de.id===ee.id))),(C=x(l.ondelete))==null||C({nodes:V,edges:$}))}});function z(v){const C=x(l.multiselectionKeyPressed);l.nodes.update(A=>A.map(M=>{const B=v.includes(M.id),U=C&&M.selected||B;return M.selected=U,M})),C||l.edges.update(A=>A.map(M=>(M.selected=!1,M)))}function D(v){const C=x(l.multiselectionKeyPressed);l.edges.update(A=>A.map(M=>{const B=v.includes(M.id),U=C&&M.selected||B;return M.selected=U,M})),C||l.nodes.update(A=>A.map(M=>(M.selected=!1,M)))}function Y(v){var A;const C=(A=x(l.nodes))==null?void 0:A.find(M=>M.id===v);if(!C){console.warn("012",Nn.error012(v));return}l.selectionRect.set(null),l.selectionRectMode.set(null),C.selected?C.selected&&x(l.multiselectionKeyPressed)&&T({nodes:[C],edges:[]}):z([v])}function K(v){const C=x(l.viewport);return Uf({delta:v,panZoom:x(l.panZoom),transform:[C.x,C.y,C.zoom],translateExtent:x(l.translateExtent),width:x(l.width),height:x(l.height)})}const q=re(Bi),j=v=>{q.set({...v})};function k(){q.set(Bi)}function I(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),T(),k()}return{...l,visibleEdges:ah(l),visibleNodes:ch(l),connection:xt([q,l.viewport],([v,C])=>v.inProgress?{...v,to:yi(v.to,[C.x,C.y,C.zoom])}:{...v}),markers:xt([l.edges,l.defaultMarkerColor,l.flowId],([v,C,A])=>Rf(v,{defaultColor:C,id:A})),initialized:(()=>{let v=!1;const C=x(l.nodes).length,A=x(l.edges).length;return xt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([M,B,U])=>v||(C===0?v=U:A===0?v=U&&M:v=U&&M&&B,v))})(),syncNodeStores:v=>ih(l.nodes,v),syncEdgeStores:v=>oh(l.edges,v),syncViewport:v=>rh(l.panZoom,l.viewport,v),setNodeTypes:u,setEdgeTypes:a,addEdge:c,updateNodePositions:d,updateNodeInternals:f,zoomIn:b,zoomOut:g,fitView:v=>h(v),setMinZoom:p,setMaxZoom:y,setTranslateExtent:S,setPaneClickDistance:F,unselectNodesAndEdges:T,addSelectedNodes:z,addSelectedEdges:D,handleNodeSelection:Y,panBy:K,updateConnection:j,cancelConnection:k,reset:I}}function He(){const e=Gn(co);if(!e)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}function dh({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s}){const l=fh({nodes:e,edges:t,width:n,height:i,fitView:o,nodeOrigin:r,nodeExtent:s});return Un(co,{getStore:()=>l}),l}function hh(e,t){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:r,viewport:s,dragging:l,translateExtent:u,paneClickDistance:a}=t,c=ad({domNode:e,minZoom:i,maxZoom:o,translateExtent:u,viewport:r,paneClickDistance:a,onDraggingChange:l.set}),d=c.getViewport();return s.set(d),n.set(c),c.update(t),{update(f){c.update(f)}}}function gh(e){let t,n,i,o,r;const s=e[35].default,l=Ke(s,e,e[34],null);return{c(){t=G("div"),l&&l.c(),w(t,"class","svelte-flow__zoom svelte-4xkw84")},m(u,a){L(u,t,a),l&&l.m(t,null),i=!0,o||(r=We(n=hh.call(null,t,{viewport:e[18],minZoom:e[12],maxZoom:e[13],initialViewport:e[11],dragging:e[23],panZoom:e[19],onPanZoomStart:e[0],onPanZoom:e[1],onPanZoomEnd:e[2],zoomOnScroll:e[5],zoomOnDoubleClick:e[6],zoomOnPinch:e[7],panOnScroll:e[9],panOnDrag:e[10],panOnScrollSpeed:.5,panOnScrollMode:e[3]||ft.Free,zoomActivationKeyPressed:e[14],preventScrolling:typeof e[4]=="boolean"?e[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!e[15],translateExtent:e[16],lib:e[17],paneClickDistance:e[8],onTransformChange:e[29]})),o=!0)},p(u,a){l&&l.p&&(!i||a[1]&8)&&Ze(l,s,u,u[34],i?Fe(s,u[34],a,null):qe(u[34]),null),n&&Ne(n.update)&&a[0]&262143&&n.update.call(null,{viewport:u[18],minZoom:u[12],maxZoom:u[13],initialViewport:u[11],dragging:u[23],panZoom:u[19],onPanZoomStart:u[0],onPanZoom:u[1],onPanZoomEnd:u[2],zoomOnScroll:u[5],zoomOnDoubleClick:u[6],zoomOnPinch:u[7],panOnScroll:u[9],panOnDrag:u[10],panOnScrollSpeed:.5,panOnScrollMode:u[3]||ft.Free,zoomActivationKeyPressed:u[14],preventScrolling:typeof u[4]=="boolean"?u[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!u[15],translateExtent:u[16],lib:u[17],paneClickDistance:u[8],onTransformChange:u[29]})},i(u){i||(R(l,u),i=!0)},o(u){Z(l,u),i=!1},d(u){u&&X(t),l&&l.d(u),o=!1,r()}}}function mh(e,t,n){let i,o,r,s,l,u,a,c,d,f,h,{$$slots:m={},$$scope:_}=t,{initialViewport:b=void 0}=t,{onMoveStart:g=void 0}=t,{onMove:p=void 0}=t,{onMoveEnd:y=void 0}=t,{panOnScrollMode:S}=t,{preventScrolling:N}=t,{zoomOnScroll:F}=t,{zoomOnDoubleClick:T}=t,{zoomOnPinch:z}=t,{panOnDrag:D}=t,{panOnScroll:Y}=t,{paneClickDistance:K}=t;const{viewport:q,panZoom:j,selectionRect:k,minZoom:I,maxZoom:v,dragging:C,translateExtent:A,lib:M,panActivationKeyPressed:B,zoomActivationKeyPressed:U,viewportInitialized:V}=He();Q(e,k,O=>n(15,d=O)),Q(e,I,O=>n(12,u=O)),Q(e,v,O=>n(13,a=O)),Q(e,A,O=>n(16,f=O)),Q(e,M,O=>n(17,h=O)),Q(e,B,O=>n(33,l=O)),Q(e,U,O=>n(14,c=O)),Q(e,V,O=>n(36,s=O));const $=O=>q.set({x:O[0],y:O[1],zoom:O[2]});return wt(()=>{nn(V,s=!0,s)}),e.$$set=O=>{"initialViewport"in O&&n(30,b=O.initialViewport),"onMoveStart"in O&&n(0,g=O.onMoveStart),"onMove"in O&&n(1,p=O.onMove),"onMoveEnd"in O&&n(2,y=O.onMoveEnd),"panOnScrollMode"in O&&n(3,S=O.panOnScrollMode),"preventScrolling"in O&&n(4,N=O.preventScrolling),"zoomOnScroll"in O&&n(5,F=O.zoomOnScroll),"zoomOnDoubleClick"in O&&n(6,T=O.zoomOnDoubleClick),"zoomOnPinch"in O&&n(7,z=O.zoomOnPinch),"panOnDrag"in O&&n(31,D=O.panOnDrag),"panOnScroll"in O&&n(32,Y=O.panOnScroll),"paneClickDistance"in O&&n(8,K=O.paneClickDistance),"$$scope"in O&&n(34,_=O.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&1073741824&&n(11,i=b||{x:0,y:0,zoom:1}),e.$$.dirty[1]&5&&n(10,o=l||D),e.$$.dirty[1]&6&&n(9,r=l||Y)},[g,p,y,S,N,F,T,z,K,r,o,i,u,a,c,d,f,h,q,j,k,I,v,C,A,M,B,U,V,$,b,D,Y,l,_,m]}class _h extends ae{constructor(t){super(),ue(this,t,mh,gh,fe,{initialViewport:30,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:31,panOnScroll:32,paneClickDistance:8},null,[-1,-1])}}const yh=_h;function bh(e){let t,n,i,o;const r=e[28].default,s=Ke(r,e,e[27],null);return{c(){t=G("div"),s&&s.c(),w(t,"class","svelte-flow__pane svelte-1esy7hx"),ce(t,"draggable",e[0]===!0||Array.isArray(e[0])&&e[0].includes(0)),ce(t,"dragging",e[4]),ce(t,"selection",e[1])},m(l,u){L(l,t,u),s&&s.m(t,null),e[29](t),n=!0,i||(o=[se(t,"click",function(){Ne(e[3]?void 0:Rn(e[15],e[2]))&&(e[3]?void 0:Rn(e[15],e[2])).apply(this,arguments)}),se(t,"pointerdown",function(){Ne(e[3]?e[16]:void 0)&&(e[3]?e[16]:void 0).apply(this,arguments)}),se(t,"pointermove",function(){Ne(e[3]?e[17]:void 0)&&(e[3]?e[17]:void 0).apply(this,arguments)}),se(t,"pointerup",function(){Ne(e[3]?e[18]:void 0)&&(e[3]?e[18]:void 0).apply(this,arguments)}),se(t,"contextmenu",function(){Ne(Rn(e[19],e[2]))&&Rn(e[19],e[2]).apply(this,arguments)})],i=!0)},p(l,u){e=l,s&&s.p&&(!n||u[0]&134217728)&&Ze(s,r,e,e[27],n?Fe(r,e[27],u,null):qe(e[27]),null),(!n||u[0]&1)&&ce(t,"draggable",e[0]===!0||Array.isArray(e[0])&&e[0].includes(0)),(!n||u[0]&16)&&ce(t,"dragging",e[4]),(!n||u[0]&2)&&ce(t,"selection",e[1])},i(l){n||(R(s,l),n=!0)},o(l){Z(s,l),n=!1},d(l){l&&X(t),s&&s.d(l),e[29](null),i=!1,Ie(o)}}}function Rn(e,t){return n=>{n.target===t&&(e==null||e(n))}}function rr(e){return t=>{const n=e.includes(t.id);return t.selected!==n&&(t.selected=n),t}}function wh(e,t,n){let i,o,r,s,l,u,a,c,d,f,h,m,_,{$$slots:b={},$$scope:g}=t,{panOnDrag:p=void 0}=t,{selectionOnDrag:y=void 0}=t;const S=ai(),{nodes:N,nodeLookup:F,edges:T,viewport:z,dragging:D,elementsSelectable:Y,selectionRect:K,selectionRectMode:q,selectionKeyPressed:j,selectionMode:k,panActivationKeyPressed:I,unselectNodesAndEdges:v}=He();Q(e,F,H=>n(36,d=H)),Q(e,T,H=>n(33,u=H)),Q(e,z,H=>n(35,c=H)),Q(e,D,H=>n(4,_=H)),Q(e,Y,H=>n(25,h=H)),Q(e,K,H=>n(24,f=H)),Q(e,q,H=>n(23,l=H)),Q(e,j,H=>n(22,s=H)),Q(e,k,H=>n(34,a=H)),Q(e,I,H=>n(26,m=H));let C,A=null,M=[],B=!1;function U(H){if(B){B=!1;return}S("paneclick",{event:H}),v(),q.set(null)}function V(H){var be,pe;if(A=C.getBoundingClientRect(),!Y||!o||H.button!==0||H.target!==C||!A)return;(pe=(be=H.target)==null?void 0:be.setPointerCapture)==null||pe.call(be,H.pointerId);const{x:ge,y:_e}=_t(H,A);v(),K.set({width:0,height:0,startX:ge,startY:_e,x:ge,y:_e})}function $(H){if(!o||!A||!f)return;B=!0;const ge=_t(H,A),_e=f.startX??0,be=f.startY??0,pe={...f,x:ge.x<_e?ge.x:_e,y:ge.y<be?ge.y:be,width:Math.abs(ge.x-_e),height:Math.abs(ge.y-be)},ve=M.map(Se=>Se.id),Oe=Ki(M,u).map(Se=>Se.id);M=_l(d,pe,[c.x,c.y,c.zoom],a===ni.Partial,!0);const J=Ki(M,u).map(Se=>Se.id),Pe=M.map(Se=>Se.id);(ve.length!==Pe.length||Pe.some(Se=>!ve.includes(Se)))&&N.update(Se=>Se.map(rr(Pe))),(Oe.length!==J.length||J.some(Se=>!Oe.includes(Se)))&&T.update(Se=>Se.map(rr(J))),q.set("user"),K.set(pe)}function O(H){var ge,_e;H.button===0&&((_e=(ge=H.target)==null?void 0:ge.releasePointerCapture)==null||_e.call(ge,H.pointerId),!o&&l==="user"&&H.target===C&&(U==null||U(H)),K.set(null),M.length>0&&nn(q,l="nodes",l),s&&(B=!1))}const ee=H=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){H.preventDefault();return}S("panecontextmenu",{event:H})};function de(H){rn[H?"unshift":"push"](()=>{C=H,n(2,C)})}return e.$$set=H=>{"panOnDrag"in H&&n(0,p=H.panOnDrag),"selectionOnDrag"in H&&n(20,y=H.selectionOnDrag),"$$scope"in H&&n(27,g=H.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&67108865&&n(21,i=m||p),e.$$.dirty[0]&24117248&&n(1,o=s||f||y&&i!==!0),e.$$.dirty[0]&41943042&&n(3,r=h&&(o||l==="user"))},[p,o,C,r,_,F,T,z,D,Y,K,q,j,k,I,U,V,$,O,ee,y,i,s,l,f,h,m,g,b,de]}class ph extends ae{constructor(t){super(),ue(this,t,wh,bh,fe,{panOnDrag:0,selectionOnDrag:20},null,[-1,-1])}}const kh=ph;function vh(e){let t,n;const i=e[3].default,o=Ke(i,e,e[2],null);return{c(){t=G("div"),o&&o.c(),w(t,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),he(t,"transform","translate("+e[0].x+"px, "+e[0].y+"px) scale("+e[0].zoom+")")},m(r,s){L(r,t,s),o&&o.m(t,null),n=!0},p(r,[s]){o&&o.p&&(!n||s&4)&&Ze(o,i,r,r[2],n?Fe(i,r[2],s,null):qe(r[2]),null),(!n||s&1)&&he(t,"transform","translate("+r[0].x+"px, "+r[0].y+"px) scale("+r[0].zoom+")")},i(r){n||(R(o,r),n=!0)},o(r){Z(o,r),n=!1},d(r){r&&X(t),o&&o.d(r)}}}function Sh(e,t,n){let i,{$$slots:o={},$$scope:r}=t;const{viewport:s}=He();return Q(e,s,l=>n(0,i=l)),e.$$set=l=>{"$$scope"in l&&n(2,r=l.$$scope)},[i,s,r,o]}class Eh extends ae{constructor(t){super(),ue(this,t,Sh,vh,fe,{})}}const Ch=Eh;function Ll(e,t){const{store:n,onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s}=t,l=Jf({onDrag:i,onDragStart:o,onDragStop:r,onNodeMouseDown:s,getStoreItems:()=>{const a=x(n.snapGrid),c=x(n.viewport);return{nodes:x(n.nodes),nodeLookup:x(n.nodeLookup),edges:x(n.edges),nodeExtent:x(n.nodeExtent),snapGrid:a||[0,0],snapToGrid:!!a,nodeOrigin:x(n.nodeOrigin),multiSelectionActive:x(n.multiselectionKeyPressed),domNode:x(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:x(n.autoPanOnNodeDrag),nodesDraggable:x(n.nodesDraggable),selectNodesOnDrag:x(n.selectNodesOnDrag),nodeDragThreshold:x(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function u(a,c){if(c.disabled){l.destroy();return}l.update({domNode:a,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return u(e,t),{update(a){u(e,a)},destroy(){l.destroy()}}}function Mh({width:e,height:t,initialWidth:n,initialHeight:i,measuredWidth:o,measuredHeight:r}){if(o===void 0&&r===void 0){const s=e??n,l=t??i;return{width:s?`width:${s}px;`:"",height:l?`height:${l}px;`:""}}return{width:e?`width:${e}px;`:"",height:t?`height:${t}px;`:""}}function lr(e){let t,n,i,o,r,s=`translate(${e[12]}px, ${e[13]}px)`,l,u,a;var c=e[27];function d(f,h){return{props:{data:f[2],id:f[1],selected:f[3]??!1,selectable:f[5]??f[28]??!0,deletable:f[7]??!0,sourcePosition:f[14],targetPosition:f[15],zIndex:f[16],dragging:f[9],draggable:f[4]??f[29]??!0,dragHandle:f[19],parentId:f[21],type:f[25],isConnectable:f[30],positionAbsoluteX:f[12],positionAbsoluteY:f[13],width:f[17],height:f[18]}}}return c&&(n=qn(c,d(e))),{c(){t=G("div"),n&&ie(n.$$.fragment),w(t,"data-id",e[1]),w(t,"class",i=Ce(["svelte-flow__node",`svelte-flow__node-${e[25]}`,e[23]])),w(t,"style",o=(e[10]??"")+";"+e[26].width+e[26].height),ce(t,"dragging",e[9]),ce(t,"selected",e[3]),ce(t,"draggable",e[4]),ce(t,"connectable",e[6]),ce(t,"selectable",e[5]),ce(t,"nopan",e[4]),ce(t,"parent",e[11]),he(t,"z-index",e[16]),he(t,"transform",s),he(t,"visibility",e[20]?"visible":"hidden")},m(f,h){L(f,t,h),n&&te(n,t,null),e[54](t),l=!0,u||(a=[We(r=Ll.call(null,t,{nodeId:e[1],isSelectable:e[5],disabled:!1,handleSelector:e[19],noDragClass:"nodrag",nodeClickDistance:e[22],onNodeMouseDown:e[33],onDrag:e[51],onDragStart:e[52],onDragStop:e[53],store:e[31]})),se(t,"click",e[38]),se(t,"mouseenter",e[55]),se(t,"mouseleave",e[56]),se(t,"mousemove",e[57]),se(t,"contextmenu",e[58])],u=!0)},p(f,h){if(h[0]&134217728&&c!==(c=f[27])){if(n){Ye();const _=n;Z(_.$$.fragment,1,0,()=>{ne(_,1)}),Le()}c?(n=qn(c,d(f)),ie(n.$$.fragment),R(n.$$.fragment,1),te(n,t,null)):n=null}else if(c){const _={};h[0]&4&&(_.data=f[2]),h[0]&2&&(_.id=f[1]),h[0]&8&&(_.selected=f[3]??!1),h[0]&268435488&&(_.selectable=f[5]??f[28]??!0),h[0]&128&&(_.deletable=f[7]??!0),h[0]&16384&&(_.sourcePosition=f[14]),h[0]&32768&&(_.targetPosition=f[15]),h[0]&65536&&(_.zIndex=f[16]),h[0]&512&&(_.dragging=f[9]),h[0]&536870928&&(_.draggable=f[4]??f[29]??!0),h[0]&524288&&(_.dragHandle=f[19]),h[0]&2097152&&(_.parentId=f[21]),h[0]&33554432&&(_.type=f[25]),h[0]&1073741824&&(_.isConnectable=f[30]),h[0]&4096&&(_.positionAbsoluteX=f[12]),h[0]&8192&&(_.positionAbsoluteY=f[13]),h[0]&131072&&(_.width=f[17]),h[0]&262144&&(_.height=f[18]),n.$set(_)}(!l||h[0]&2)&&w(t,"data-id",f[1]),(!l||h[0]&41943040&&i!==(i=Ce(["svelte-flow__node",`svelte-flow__node-${f[25]}`,f[23]])))&&w(t,"class",i),(!l||h[0]&67109888&&o!==(o=(f[10]??"")+";"+f[26].width+f[26].height))&&w(t,"style",o),r&&Ne(r.update)&&h[0]&4718626&&r.update.call(null,{nodeId:f[1],isSelectable:f[5],disabled:!1,handleSelector:f[19],noDragClass:"nodrag",nodeClickDistance:f[22],onNodeMouseDown:f[33],onDrag:f[51],onDragStart:f[52],onDragStop:f[53],store:f[31]}),(!l||h[0]&41943552)&&ce(t,"dragging",f[9]),(!l||h[0]&41943048)&&ce(t,"selected",f[3]),(!l||h[0]&41943056)&&ce(t,"draggable",f[4]),(!l||h[0]&41943104)&&ce(t,"connectable",f[6]),(!l||h[0]&41943072)&&ce(t,"selectable",f[5]),(!l||h[0]&41943056)&&ce(t,"nopan",f[4]),(!l||h[0]&41945088)&&ce(t,"parent",f[11]);const m=h[0]&67109888;(m||h[0]&67175424)&&he(t,"z-index",f[16]),(m||h[0]&67122176&&s!==(s=`translate(${f[12]}px, ${f[13]}px)`))&&he(t,"transform",s),(m||h[0]&68158464)&&he(t,"visibility",f[20]?"visible":"hidden")},i(f){l||(n&&R(n.$$.fragment,f),l=!0)},o(f){n&&Z(n.$$.fragment,f),l=!1},d(f){f&&X(t),n&&ne(n),e[54](null),u=!1,Ie(a)}}}function Ph(e){let t,n,i=!e[8]&&lr(e);return{c(){i&&i.c(),t=xe()},m(o,r){i&&i.m(o,r),L(o,t,r),n=!0},p(o,r){o[8]?i&&(Ye(),Z(i,1,1,()=>{i=null}),Le()):i?(i.p(o,r),r[0]&256&&R(i,1)):(i=lr(o),i.c(),R(i,1),i.m(t.parentNode,t))},i(o){n||(R(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&X(t),i&&i.d(o)}}}function Nh(e,t,n){let i,o,r,s,l,u,a,c,{node:d}=t,{id:f}=t,{data:h={}}=t,{selected:m=!1}=t,{draggable:_=void 0}=t,{selectable:b=void 0}=t,{connectable:g=!0}=t,{deletable:p=!0}=t,{hidden:y=!1}=t,{dragging:S=!1}=t,{resizeObserver:N=null}=t,{style:F=void 0}=t,{type:T="default"}=t,{isParent:z=!1}=t,{positionX:D}=t,{positionY:Y}=t,{sourcePosition:K=void 0}=t,{targetPosition:q=void 0}=t,{zIndex:j}=t,{measuredWidth:k=void 0}=t,{measuredHeight:I=void 0}=t,{initialWidth:v=void 0}=t,{initialHeight:C=void 0}=t,{width:A=void 0}=t,{height:M=void 0}=t,{dragHandle:B=void 0}=t,{initialized:U=!1}=t,{parentId:V=void 0}=t,{nodeClickDistance:$=void 0}=t,{class:O=""}=t;const ee=He(),{nodeTypes:de,nodeDragThreshold:H,selectNodesOnDrag:ge,handleNodeSelection:_e,updateNodeInternals:be,elementsSelectable:pe,nodesDraggable:ve}=ee;Q(e,de,P=>n(50,l=P)),Q(e,pe,P=>n(28,u=P)),Q(e,ve,P=>n(29,a=P));let Oe,J=null;const Pe=ai(),Se=re(g);Q(e,Se,P=>n(30,c=P));let ht,ot,rt;Un("svelteflow__node_id",f),Un("svelteflow__node_connectable",Se),Lr(()=>{J&&(N==null||N.unobserve(J))});function Pt(P){b&&(!x(ge)||!_||x(H)>0)&&_e(f),Pe("nodeclick",{node:d.internals.userNode,event:P})}const Nt=(P,Ge,De,ze)=>{Pe("nodedrag",{event:P,targetNode:De,nodes:ze})},pt=(P,Ge,De,ze)=>{Pe("nodedragstart",{event:P,targetNode:De,nodes:ze})},kt=(P,Ge,De,ze)=>{Pe("nodedragstop",{event:P,targetNode:De,nodes:ze})};function vt(P){rn[P?"unshift":"push"](()=>{Oe=P,n(24,Oe)})}const St=P=>Pe("nodemouseenter",{node:d,event:P}),Ot=P=>Pe("nodemouseleave",{node:d,event:P}),$e=P=>Pe("nodemousemove",{node:d,event:P}),lt=P=>Pe("nodecontextmenu",{node:d,event:P});return e.$$set=P=>{"node"in P&&n(0,d=P.node),"id"in P&&n(1,f=P.id),"data"in P&&n(2,h=P.data),"selected"in P&&n(3,m=P.selected),"draggable"in P&&n(4,_=P.draggable),"selectable"in P&&n(5,b=P.selectable),"connectable"in P&&n(6,g=P.connectable),"deletable"in P&&n(7,p=P.deletable),"hidden"in P&&n(8,y=P.hidden),"dragging"in P&&n(9,S=P.dragging),"resizeObserver"in P&&n(39,N=P.resizeObserver),"style"in P&&n(10,F=P.style),"type"in P&&n(40,T=P.type),"isParent"in P&&n(11,z=P.isParent),"positionX"in P&&n(12,D=P.positionX),"positionY"in P&&n(13,Y=P.positionY),"sourcePosition"in P&&n(14,K=P.sourcePosition),"targetPosition"in P&&n(15,q=P.targetPosition),"zIndex"in P&&n(16,j=P.zIndex),"measuredWidth"in P&&n(41,k=P.measuredWidth),"measuredHeight"in P&&n(42,I=P.measuredHeight),"initialWidth"in P&&n(43,v=P.initialWidth),"initialHeight"in P&&n(44,C=P.initialHeight),"width"in P&&n(17,A=P.width),"height"in P&&n(18,M=P.height),"dragHandle"in P&&n(19,B=P.dragHandle),"initialized"in P&&n(20,U=P.initialized),"parentId"in P&&n(21,V=P.parentId),"nodeClickDistance"in P&&n(22,$=P.nodeClickDistance),"class"in P&&n(23,O=P.class)},e.$$.update=()=>{e.$$.dirty[1]&512&&n(25,i=T||"default"),e.$$.dirty[0]&33554432|e.$$.dirty[1]&524288&&n(49,o=!!l[i]),e.$$.dirty[0]&33554432|e.$$.dirty[1]&524288&&n(27,r=l[i]||Al),e.$$.dirty[1]&262656&&(o||console.warn("003",Nn.error003(T))),e.$$.dirty[0]&393216|e.$$.dirty[1]&15360&&n(26,s=Mh({width:A,height:M,initialWidth:v,initialHeight:C,measuredWidth:k,measuredHeight:I})),e.$$.dirty[0]&64&&Se.set(!!g),e.$$.dirty[0]&50380802|e.$$.dirty[1]&229376&&((ht&&i!==ht||ot&&K!==ot||rt&&q!==rt)&&requestAnimationFrame(()=>be(new Map([[f,{id:f,nodeElement:Oe,force:!0}]]))),n(46,ht=i),n(47,ot=K),n(48,rt=q)),e.$$.dirty[0]&17825792|e.$$.dirty[1]&16640&&N&&(Oe!==J||!U)&&(J&&N.unobserve(J),Oe&&N.observe(Oe),n(45,J=Oe))},[d,f,h,m,_,b,g,p,y,S,F,z,D,Y,K,q,j,A,M,B,U,V,$,O,Oe,i,s,r,u,a,c,ee,de,_e,pe,ve,Pe,Se,Pt,N,T,k,I,v,C,J,ht,ot,rt,o,l,Nt,pt,kt,vt,St,Ot,$e,lt]}class Oh extends ae{constructor(t){super(),ue(this,t,Nh,Ph,Vr,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:39,style:10,type:40,isParent:11,positionX:12,positionY:13,sourcePosition:14,targetPosition:15,zIndex:16,measuredWidth:41,measuredHeight:42,initialWidth:43,initialHeight:44,width:17,height:18,dragHandle:19,initialized:20,parentId:21,nodeClickDistance:22,class:23},null,[-1,-1])}}const zh=Oh;const{Map:Th}=_s;function sr(e,t,n){const i=e.slice();return i[21]=t[n],i}function ur(e,t){let n,i,o;return i=new zh({props:{node:t[21],id:t[21].id,data:t[21].data,selected:!!t[21].selected,hidden:!!t[21].hidden,draggable:!!(t[21].draggable||t[2]&&typeof t[21].draggable>"u"),selectable:!!(t[21].selectable||t[3]&&typeof t[21].selectable>"u"),connectable:!!(t[21].connectable||t[4]&&typeof t[21].connectable>"u"),deletable:t[21].deletable??!0,positionX:t[21].internals.positionAbsolute.x,positionY:t[21].internals.positionAbsolute.y,isParent:t[5].has(t[21].id),style:t[21].style,class:t[21].class,type:t[21].type??"default",sourcePosition:t[21].sourcePosition,targetPosition:t[21].targetPosition,dragging:t[21].dragging,zIndex:t[21].internals.z??0,dragHandle:t[21].dragHandle,initialized:qo(t[21]),width:t[21].width,height:t[21].height,initialWidth:t[21].initialWidth,initialHeight:t[21].initialHeight,measuredWidth:t[21].measured.width,measuredHeight:t[21].measured.height,parentId:t[21].parentId,resizeObserver:t[11],nodeClickDistance:t[0]}}),i.$on("nodeclick",t[12]),i.$on("nodemouseenter",t[13]),i.$on("nodemousemove",t[14]),i.$on("nodemouseleave",t[15]),i.$on("nodedrag",t[16]),i.$on("nodedragstart",t[17]),i.$on("nodedragstop",t[18]),i.$on("nodecontextmenu",t[19]),{key:e,first:null,c(){n=xe(),ie(i.$$.fragment),this.first=n},m(r,s){L(r,n,s),te(i,r,s),o=!0},p(r,s){t=r;const l={};s&2&&(l.node=t[21]),s&2&&(l.id=t[21].id),s&2&&(l.data=t[21].data),s&2&&(l.selected=!!t[21].selected),s&2&&(l.hidden=!!t[21].hidden),s&6&&(l.draggable=!!(t[21].draggable||t[2]&&typeof t[21].draggable>"u")),s&10&&(l.selectable=!!(t[21].selectable||t[3]&&typeof t[21].selectable>"u")),s&18&&(l.connectable=!!(t[21].connectable||t[4]&&typeof t[21].connectable>"u")),s&2&&(l.deletable=t[21].deletable??!0),s&2&&(l.positionX=t[21].internals.positionAbsolute.x),s&2&&(l.positionY=t[21].internals.positionAbsolute.y),s&34&&(l.isParent=t[5].has(t[21].id)),s&2&&(l.style=t[21].style),s&2&&(l.class=t[21].class),s&2&&(l.type=t[21].type??"default"),s&2&&(l.sourcePosition=t[21].sourcePosition),s&2&&(l.targetPosition=t[21].targetPosition),s&2&&(l.dragging=t[21].dragging),s&2&&(l.zIndex=t[21].internals.z??0),s&2&&(l.dragHandle=t[21].dragHandle),s&2&&(l.initialized=qo(t[21])),s&2&&(l.width=t[21].width),s&2&&(l.height=t[21].height),s&2&&(l.initialWidth=t[21].initialWidth),s&2&&(l.initialHeight=t[21].initialHeight),s&2&&(l.measuredWidth=t[21].measured.width),s&2&&(l.measuredHeight=t[21].measured.height),s&2&&(l.parentId=t[21].parentId),s&1&&(l.nodeClickDistance=t[0]),i.$set(l)},i(r){o||(R(i.$$.fragment,r),o=!0)},o(r){Z(i.$$.fragment,r),o=!1},d(r){r&&X(n),ne(i,r)}}}function Dh(e){let t,n=[],i=new Th,o,r=Xe(e[1]);const s=l=>l[21].id;for(let l=0;l<r.length;l+=1){let u=sr(e,r,l),a=s(u);i.set(a,n[l]=ur(a,u))}return{c(){t=G("div");for(let l=0;l<n.length;l+=1)n[l].c();w(t,"class","svelte-flow__nodes svelte-tf4uy4")},m(l,u){L(l,t,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);o=!0},p(l,[u]){u&2111&&(r=Xe(l[1]),Ye(),n=Gi(n,u,s,1,l,r,i,t,Ui,ur,null,sr),Le())},i(l){if(!o){for(let u=0;u<r.length;u+=1)R(n[u]);o=!0}},o(l){for(let u=0;u<n.length;u+=1)Z(n[u]);o=!1},d(l){l&&X(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Ah(e,t,n){let i,o,r,s,l,{nodeClickDistance:u=0}=t;const{visibleNodes:a,nodesDraggable:c,nodesConnectable:d,elementsSelectable:f,updateNodeInternals:h,parentLookup:m}=He();Q(e,a,z=>n(1,i=z)),Q(e,c,z=>n(2,o=z)),Q(e,d,z=>n(4,s=z)),Q(e,f,z=>n(3,r=z)),Q(e,m,z=>n(5,l=z));const _=typeof ResizeObserver>"u"?null:new ResizeObserver(z=>{const D=new Map;z.forEach(Y=>{const K=Y.target.getAttribute("data-id");D.set(K,{id:K,nodeElement:Y.target,force:!0})}),h(D)});Lr(()=>{_==null||_.disconnect()});function b(z){we.call(this,e,z)}function g(z){we.call(this,e,z)}function p(z){we.call(this,e,z)}function y(z){we.call(this,e,z)}function S(z){we.call(this,e,z)}function N(z){we.call(this,e,z)}function F(z){we.call(this,e,z)}function T(z){we.call(this,e,z)}return e.$$set=z=>{"nodeClickDistance"in z&&n(0,u=z.nodeClickDistance)},[u,i,o,r,s,l,a,c,d,f,m,_,b,g,p,y,S,N,F,T]}class Hh extends ae{constructor(t){super(),ue(this,t,Ah,Dh,fe,{nodeClickDistance:0})}}const Ih=Hh;function ar(e){let t,n,i,o,r,s,l,u;var a=e[27];function c(d,f){return{props:{id:d[0],source:d[1],target:d[2],sourceX:d[14],sourceY:d[15],targetX:d[16],targetY:d[17],sourcePosition:d[18],targetPosition:d[19],animated:d[6],selected:d[7],label:d[10],labelStyle:d[11],data:d[3],style:d[4],interactionWidth:d[21],selectable:d[24],deletable:d[8]??!0,type:d[23],sourceHandleId:d[12],targetHandleId:d[13],markerStart:d[26],markerEnd:d[25]}}}return a&&(i=qn(a,c(e))),{c(){t=Ee("svg"),n=Ee("g"),i&&ie(i.$$.fragment),w(n,"class",o=Ce(["svelte-flow__edge",e[22]])),w(n,"data-id",e[0]),w(n,"aria-label",r=e[20]===null?void 0:e[20]?e[20]:`Edge from ${e[1]} to ${e[2]}`),w(n,"role","img"),ce(n,"animated",e[6]),ce(n,"selected",e[7]),ce(n,"selectable",e[24]),he(t,"z-index",e[5])},m(d,f){L(d,t,f),W(t,n),i&&te(i,n,null),s=!0,l||(u=[se(n,"click",e[32]),se(n,"contextmenu",e[41]),se(n,"mouseenter",e[42]),se(n,"mouseleave",e[43])],l=!0)},p(d,f){if(f[0]&134217728&&a!==(a=d[27])){if(i){Ye();const h=i;Z(h.$$.fragment,1,0,()=>{ne(h,1)}),Le()}a?(i=qn(a,c(d)),ie(i.$$.fragment),R(i.$$.fragment,1),te(i,n,null)):i=null}else if(a){const h={};f[0]&1&&(h.id=d[0]),f[0]&2&&(h.source=d[1]),f[0]&4&&(h.target=d[2]),f[0]&16384&&(h.sourceX=d[14]),f[0]&32768&&(h.sourceY=d[15]),f[0]&65536&&(h.targetX=d[16]),f[0]&131072&&(h.targetY=d[17]),f[0]&262144&&(h.sourcePosition=d[18]),f[0]&524288&&(h.targetPosition=d[19]),f[0]&64&&(h.animated=d[6]),f[0]&128&&(h.selected=d[7]),f[0]&1024&&(h.label=d[10]),f[0]&2048&&(h.labelStyle=d[11]),f[0]&8&&(h.data=d[3]),f[0]&16&&(h.style=d[4]),f[0]&2097152&&(h.interactionWidth=d[21]),f[0]&16777216&&(h.selectable=d[24]),f[0]&256&&(h.deletable=d[8]??!0),f[0]&8388608&&(h.type=d[23]),f[0]&4096&&(h.sourceHandleId=d[12]),f[0]&8192&&(h.targetHandleId=d[13]),f[0]&67108864&&(h.markerStart=d[26]),f[0]&33554432&&(h.markerEnd=d[25]),i.$set(h)}(!s||f[0]&4194304&&o!==(o=Ce(["svelte-flow__edge",d[22]])))&&w(n,"class",o),(!s||f[0]&1)&&w(n,"data-id",d[0]),(!s||f[0]&1048582&&r!==(r=d[20]===null?void 0:d[20]?d[20]:`Edge from ${d[1]} to ${d[2]}`))&&w(n,"aria-label",r),(!s||f[0]&4194368)&&ce(n,"animated",d[6]),(!s||f[0]&4194432)&&ce(n,"selected",d[7]),(!s||f[0]&20971520)&&ce(n,"selectable",d[24]),f[0]&32&&he(t,"z-index",d[5])},i(d){s||(i&&R(i.$$.fragment,d),s=!0)},o(d){i&&Z(i.$$.fragment,d),s=!1},d(d){d&&X(t),i&&ne(i),l=!1,Ie(u)}}}function Xh(e){let t,n,i=!e[9]&&ar(e);return{c(){i&&i.c(),t=xe()},m(o,r){i&&i.m(o,r),L(o,t,r),n=!0},p(o,r){o[9]?i&&(Ye(),Z(i,1,1,()=>{i=null}),Le()):i?(i.p(o,r),r[0]&512&&R(i,1)):(i=ar(o),i.c(),R(i,1),i.m(t.parentNode,t))},i(o){n||(R(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&X(t),i&&i.d(o)}}}function Vh(e,t,n){let i,o,r,s,l,u,a,c,d,{id:f}=t,{type:h="default"}=t,{source:m=""}=t,{target:_=""}=t,{data:b={}}=t,{style:g=void 0}=t,{zIndex:p=void 0}=t,{animated:y=!1}=t,{selected:S=!1}=t,{selectable:N=void 0}=t,{deletable:F=void 0}=t,{hidden:T=!1}=t,{label:z=void 0}=t,{labelStyle:D=void 0}=t,{markerStart:Y=void 0}=t,{markerEnd:K=void 0}=t,{sourceHandle:q=void 0}=t,{targetHandle:j=void 0}=t,{sourceX:k}=t,{sourceY:I}=t,{targetX:v}=t,{targetY:C}=t,{sourcePosition:A}=t,{targetPosition:M}=t,{ariaLabel:B=void 0}=t,{interactionWidth:U=void 0}=t,{class:V=""}=t;Un("svelteflow__edge_id",f);const{edgeLookup:$,edgeTypes:O,flowId:ee,elementsSelectable:de}=He();Q(e,$,J=>n(44,u=J)),Q(e,O,J=>n(40,d=J)),Q(e,ee,J=>n(39,c=J)),Q(e,de,J=>n(38,a=J));const H=ai(),ge=Il();function _e(J){const Pe=u.get(f);Pe&&(ge(f),H("edgeclick",{event:J,edge:Pe}))}function be(J,Pe){const Se=u.get(f);Se&&H(Pe,{event:J,edge:Se})}const pe=J=>{be(J,"edgecontextmenu")},ve=J=>{be(J,"edgemouseenter")},Oe=J=>{be(J,"edgemouseleave")};return e.$$set=J=>{"id"in J&&n(0,f=J.id),"type"in J&&n(34,h=J.type),"source"in J&&n(1,m=J.source),"target"in J&&n(2,_=J.target),"data"in J&&n(3,b=J.data),"style"in J&&n(4,g=J.style),"zIndex"in J&&n(5,p=J.zIndex),"animated"in J&&n(6,y=J.animated),"selected"in J&&n(7,S=J.selected),"selectable"in J&&n(35,N=J.selectable),"deletable"in J&&n(8,F=J.deletable),"hidden"in J&&n(9,T=J.hidden),"label"in J&&n(10,z=J.label),"labelStyle"in J&&n(11,D=J.labelStyle),"markerStart"in J&&n(36,Y=J.markerStart),"markerEnd"in J&&n(37,K=J.markerEnd),"sourceHandle"in J&&n(12,q=J.sourceHandle),"targetHandle"in J&&n(13,j=J.targetHandle),"sourceX"in J&&n(14,k=J.sourceX),"sourceY"in J&&n(15,I=J.sourceY),"targetX"in J&&n(16,v=J.targetX),"targetY"in J&&n(17,C=J.targetY),"sourcePosition"in J&&n(18,A=J.sourcePosition),"targetPosition"in J&&n(19,M=J.targetPosition),"ariaLabel"in J&&n(20,B=J.ariaLabel),"interactionWidth"in J&&n(21,U=J.interactionWidth),"class"in J&&n(22,V=J.class)},e.$$.update=()=>{e.$$.dirty[1]&8&&n(23,i=h||"default"),e.$$.dirty[0]&8388608|e.$$.dirty[1]&512&&n(27,o=d[i]||Xl),e.$$.dirty[1]&288&&n(26,r=Y?`url('#${qi(Y,c)}')`:void 0),e.$$.dirty[1]&320&&n(25,s=K?`url('#${qi(K,c)}')`:void 0),e.$$.dirty[1]&144&&n(24,l=N??a)},[f,m,_,b,g,p,y,S,F,T,z,D,q,j,k,I,v,C,A,M,B,U,V,i,l,s,r,o,$,O,ee,de,_e,be,h,N,Y,K,a,c,d,pe,ve,Oe]}class Yh extends ae{constructor(t){super(),ue(this,t,Vh,Xh,Vr,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}const Lh=Yh;function Rh(e,t,n){let{onMount:i=void 0}=t,{onDestroy:o=void 0}=t;return wt(()=>(i==null||i(),o)),e.$$set=r=>{"onMount"in r&&n(0,i=r.onMount),"onDestroy"in r&&n(1,o=r.onDestroy)},[i,o]}class Wh extends ae{constructor(t){super(),ue(this,t,Rh,null,fe,{onMount:0,onDestroy:1})}}const Bh=Wh;function cr(e,t,n){const i=e.slice();return i[2]=t[n],i}function fr(e,t){let n,i,o;const r=[t[2]];let s={};for(let l=0;l<r.length;l+=1)s=ke(s,r[l]);return i=new xh({props:s}),{key:e,first:null,c(){n=xe(),ie(i.$$.fragment),this.first=n},m(l,u){L(l,n,u),te(i,l,u),o=!0},p(l,u){t=l;const a=u&1?Mt(r,[wn(t[2])]):{};i.$set(a)},i(l){o||(R(i.$$.fragment,l),o=!0)},o(l){Z(i.$$.fragment,l),o=!1},d(l){l&&X(n),ne(i,l)}}}function Kh(e){let t,n=[],i=new Map,o,r=Xe(e[0]);const s=l=>l[2].id;for(let l=0;l<r.length;l+=1){let u=cr(e,r,l),a=s(u);i.set(a,n[l]=fr(a,u))}return{c(){t=Ee("defs");for(let l=0;l<n.length;l+=1)n[l].c()},m(l,u){L(l,t,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(t,null);o=!0},p(l,[u]){u&1&&(r=Xe(l[0]),Ye(),n=Gi(n,u,s,1,l,r,i,t,Ui,fr,null,cr),Le())},i(l){if(!o){for(let u=0;u<r.length;u+=1)R(n[u]);o=!0}},o(l){for(let u=0;u<n.length;u+=1)Z(n[u]);o=!1},d(l){l&&X(t);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Fh(e,t,n){let i;const{markers:o}=He();return Q(e,o,r=>n(0,i=r)),[i,o]}class Zh extends ae{constructor(t){super(),ue(this,t,Fh,Kh,fe,{})}}const qh=Zh;function Uh(e){let t;return{c(){t=Ee("polyline"),w(t,"stroke",e[6]),w(t,"stroke-linecap","round"),w(t,"stroke-linejoin","round"),w(t,"stroke-width",e[7]),w(t,"fill",e[6]),w(t,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){L(n,t,i)},p(n,i){i&64&&w(t,"stroke",n[6]),i&128&&w(t,"stroke-width",n[7]),i&64&&w(t,"fill",n[6])},d(n){n&&X(t)}}}function Gh(e){let t;return{c(){t=Ee("polyline"),w(t,"stroke",e[6]),w(t,"stroke-linecap","round"),w(t,"stroke-linejoin","round"),w(t,"stroke-width",e[7]),w(t,"fill","none"),w(t,"points","-5,-4 0,0 -5,4")},m(n,i){L(n,t,i)},p(n,i){i&64&&w(t,"stroke",n[6]),i&128&&w(t,"stroke-width",n[7])},d(n){n&&X(t)}}}function Jh(e){let t,n,i;function o(l,u){if(l[1]===ii.Arrow)return Gh;if(l[1]===ii.ArrowClosed)return Uh}let r=o(e),s=r&&r(e);return{c(){t=Ee("marker"),s&&s.c(),w(t,"class","svelte-flow__arrowhead"),w(t,"id",e[0]),w(t,"markerWidth",n=`${e[2]}`),w(t,"markerHeight",i=`${e[3]}`),w(t,"viewBox","-10 -10 20 20"),w(t,"markerUnits",e[4]),w(t,"orient",e[5]),w(t,"refX","0"),w(t,"refY","0")},m(l,u){L(l,t,u),s&&s.m(t,null)},p(l,[u]){r===(r=o(l))&&s?s.p(l,u):(s&&s.d(1),s=r&&r(l),s&&(s.c(),s.m(t,null))),u&1&&w(t,"id",l[0]),u&4&&n!==(n=`${l[2]}`)&&w(t,"markerWidth",n),u&8&&i!==(i=`${l[3]}`)&&w(t,"markerHeight",i),u&16&&w(t,"markerUnits",l[4]),u&32&&w(t,"orient",l[5])},i:oe,o:oe,d(l){l&&X(t),s&&s.d()}}}function jh(e,t,n){let{id:i}=t,{type:o}=t,{width:r=12.5}=t,{height:s=12.5}=t,{markerUnits:l="strokeWidth"}=t,{orient:u="auto-start-reverse"}=t,{color:a=void 0}=t,{strokeWidth:c=void 0}=t;return e.$$set=d=>{"id"in d&&n(0,i=d.id),"type"in d&&n(1,o=d.type),"width"in d&&n(2,r=d.width),"height"in d&&n(3,s=d.height),"markerUnits"in d&&n(4,l=d.markerUnits),"orient"in d&&n(5,u=d.orient),"color"in d&&n(6,a=d.color),"strokeWidth"in d&&n(7,c=d.strokeWidth)},[i,o,r,s,l,u,a,c]}class Qh extends ae{constructor(t){super(),ue(this,t,jh,Jh,fe,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}const xh=Qh;function dr(e,t,n){const i=e.slice();return i[14]=t[n],i}function hr(e,t){let n,i,o;return i=new Lh({props:{id:t[14].id,source:t[14].source,target:t[14].target,data:t[14].data,style:t[14].style,animated:t[14].animated,selected:t[14].selected,selectable:t[14].selectable??t[1],deletable:t[14].deletable,hidden:t[14].hidden,label:t[14].label,labelStyle:t[14].labelStyle,markerStart:t[14].markerStart,markerEnd:t[14].markerEnd,sourceHandle:t[14].sourceHandle,targetHandle:t[14].targetHandle,sourceX:t[14].sourceX,sourceY:t[14].sourceY,targetX:t[14].targetX,targetY:t[14].targetY,sourcePosition:t[14].sourcePosition,targetPosition:t[14].targetPosition,ariaLabel:t[14].ariaLabel,interactionWidth:t[14].interactionWidth,class:t[14].class,type:t[14].type||"default",zIndex:t[14].zIndex}}),i.$on("edgeclick",t[7]),i.$on("edgecontextmenu",t[8]),i.$on("edgemouseenter",t[9]),i.$on("edgemouseleave",t[10]),{key:e,first:null,c(){n=xe(),ie(i.$$.fragment),this.first=n},m(r,s){L(r,n,s),te(i,r,s),o=!0},p(r,s){t=r;const l={};s&1&&(l.id=t[14].id),s&1&&(l.source=t[14].source),s&1&&(l.target=t[14].target),s&1&&(l.data=t[14].data),s&1&&(l.style=t[14].style),s&1&&(l.animated=t[14].animated),s&1&&(l.selected=t[14].selected),s&3&&(l.selectable=t[14].selectable??t[1]),s&1&&(l.deletable=t[14].deletable),s&1&&(l.hidden=t[14].hidden),s&1&&(l.label=t[14].label),s&1&&(l.labelStyle=t[14].labelStyle),s&1&&(l.markerStart=t[14].markerStart),s&1&&(l.markerEnd=t[14].markerEnd),s&1&&(l.sourceHandle=t[14].sourceHandle),s&1&&(l.targetHandle=t[14].targetHandle),s&1&&(l.sourceX=t[14].sourceX),s&1&&(l.sourceY=t[14].sourceY),s&1&&(l.targetX=t[14].targetX),s&1&&(l.targetY=t[14].targetY),s&1&&(l.sourcePosition=t[14].sourcePosition),s&1&&(l.targetPosition=t[14].targetPosition),s&1&&(l.ariaLabel=t[14].ariaLabel),s&1&&(l.interactionWidth=t[14].interactionWidth),s&1&&(l.class=t[14].class),s&1&&(l.type=t[14].type||"default"),s&1&&(l.zIndex=t[14].zIndex),i.$set(l)},i(r){o||(R(i.$$.fragment,r),o=!0)},o(r){Z(i.$$.fragment,r),o=!1},d(r){r&&X(n),ne(i,r)}}}function gr(e){let t,n;return t=new Bh({props:{onMount:e[11],onDestroy:e[12]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o&4&&(r.onMount=i[11]),o&4&&(r.onDestroy=i[12]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function $h(e){let t,n,i,o,r=[],s=new Map,l,u;i=new qh({});let a=Xe(e[0]);const c=f=>f[14].id;for(let f=0;f<a.length;f+=1){let h=dr(e,a,f),m=c(h);s.set(m,r[f]=hr(m,h))}let d=e[0].length>0&&gr(e);return{c(){t=G("div"),n=Ee("svg"),ie(i.$$.fragment),o=le();for(let f=0;f<r.length;f+=1)r[f].c();l=le(),d&&d.c(),w(n,"class","svelte-flow__marker"),w(t,"class","svelte-flow__edges")},m(f,h){L(f,t,h),W(t,n),te(i,n,null),W(t,o);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(t,null);W(t,l),d&&d.m(t,null),u=!0},p(f,[h]){h&3&&(a=Xe(f[0]),Ye(),r=Gi(r,h,c,1,f,a,s,t,Ui,hr,l,dr),Le()),f[0].length>0?d?(d.p(f,h),h&1&&R(d,1)):(d=gr(f),d.c(),R(d,1),d.m(t,null)):d&&(Ye(),Z(d,1,1,()=>{d=null}),Le())},i(f){if(!u){R(i.$$.fragment,f);for(let h=0;h<a.length;h+=1)R(r[h]);R(d),u=!0}},o(f){Z(i.$$.fragment,f);for(let h=0;h<r.length;h+=1)Z(r[h]);Z(d),u=!1},d(f){f&&X(t),ne(i);for(let h=0;h<r.length;h+=1)r[h].d();d&&d.d()}}}function eg(e,t,n){let i,o,r,{defaultEdgeOptions:s}=t;const{visibleEdges:l,edgesInitialized:u,edges:{setDefaultOptions:a},elementsSelectable:c}=He();Q(e,l,g=>n(0,i=g)),Q(e,u,g=>n(2,r=g)),Q(e,c,g=>n(1,o=g)),wt(()=>{s&&a(s)});function d(g){we.call(this,e,g)}function f(g){we.call(this,e,g)}function h(g){we.call(this,e,g)}function m(g){we.call(this,e,g)}const _=()=>{nn(u,r=!0,r)},b=()=>{nn(u,r=!1,r)};return e.$$set=g=>{"defaultEdgeOptions"in g&&n(6,s=g.defaultEdgeOptions)},[i,o,r,l,u,c,s,d,f,h,m,_,b]}class tg extends ae{constructor(t){super(),ue(this,t,eg,$h,fe,{defaultEdgeOptions:6})}}const ng=tg;function mr(e){let t;return{c(){t=G("div"),w(t,"class","svelte-flow__selection svelte-1iugwpu"),he(t,"width",typeof e[2]=="string"?e[2]:`${e[2]}px`),he(t,"height",typeof e[3]=="string"?e[3]:`${e[3]}px`),he(t,"transform",`translate(${e[0]}px, ${e[1]}px)`)},m(n,i){L(n,t,i)},p(n,i){i&4&&he(t,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&he(t,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&he(t,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&X(t)}}}function ig(e){let t,n=e[4]&&mr(e);return{c(){n&&n.c(),t=xe()},m(i,o){n&&n.m(i,o),L(i,t,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=mr(i),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:oe,o:oe,d(i){i&&X(t),n&&n.d(i)}}}function og(e,t,n){let{x:i=0}=t,{y:o=0}=t,{width:r=0}=t,{height:s=0}=t,{isVisible:l=!0}=t;return e.$$set=u=>{"x"in u&&n(0,i=u.x),"y"in u&&n(1,o=u.y),"width"in u&&n(2,r=u.width),"height"in u&&n(3,s=u.height),"isVisible"in u&&n(4,l=u.isVisible)},[i,o,r,s,l]}class rg extends ae{constructor(t){super(),ue(this,t,og,ig,fe,{x:0,y:1,width:2,height:3,isVisible:4})}}const Rl=rg;function lg(e){var i,o,r,s;let t,n;return t=new Rl({props:{isVisible:!!(e[0]&&e[1]==="user"),width:(i=e[0])==null?void 0:i.width,height:(o=e[0])==null?void 0:o.height,x:(r=e[0])==null?void 0:r.x,y:(s=e[0])==null?void 0:s.y}}),{c(){ie(t.$$.fragment)},m(l,u){te(t,l,u),n=!0},p(l,[u]){var c,d,f,h;const a={};u&3&&(a.isVisible=!!(l[0]&&l[1]==="user")),u&1&&(a.width=(c=l[0])==null?void 0:c.width),u&1&&(a.height=(d=l[0])==null?void 0:d.height),u&1&&(a.x=(f=l[0])==null?void 0:f.x),u&1&&(a.y=(h=l[0])==null?void 0:h.y),t.$set(a)},i(l){n||(R(t.$$.fragment,l),n=!0)},o(l){Z(t.$$.fragment,l),n=!1},d(l){ne(t,l)}}}function sg(e,t,n){let i,o;const{selectionRect:r,selectionRectMode:s}=He();return Q(e,r,l=>n(0,i=l)),Q(e,s,l=>n(1,o=l)),[i,o,r,s]}class ug extends ae{constructor(t){super(),ue(this,t,sg,lg,fe,{})}}const ag=ug;function _r(e){let t,n,i,o,r;return n=new Rl({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){t=G("div"),ie(n.$$.fragment),w(t,"class","selection-wrapper nopan svelte-5pxri"),he(t,"width",e[1].width+"px"),he(t,"height",e[1].height+"px"),he(t,"transform","translate("+e[1].x+"px, "+e[1].y+"px)"),w(t,"role","button"),w(t,"tabindex","-1")},m(s,l){L(s,t,l),te(n,t,null),i=!0,o||(r=[We(Ll.call(null,t,{disabled:!1,store:e[2],onDrag:e[11],onDragStart:e[12],onDragStop:e[13]})),se(t,"contextmenu",e[7]),se(t,"click",e[8]),se(t,"keyup",fg)],o=!0)},p(s,l){(!i||l&2)&&he(t,"width",s[1].width+"px"),(!i||l&2)&&he(t,"height",s[1].height+"px"),(!i||l&2)&&he(t,"transform","translate("+s[1].x+"px, "+s[1].y+"px)")},i(s){i||(R(n.$$.fragment,s),i=!0)},o(s){Z(n.$$.fragment,s),i=!1},d(s){s&&X(t),ne(n),o=!1,Ie(r)}}}function cg(e){let t=e[0]==="nodes"&&e[1]&&At(e[1].x)&&At(e[1].y),n,i,o=t&&_r(e);return{c(){o&&o.c(),n=xe()},m(r,s){o&&o.m(r,s),L(r,n,s),i=!0},p(r,[s]){s&3&&(t=r[0]==="nodes"&&r[1]&&At(r[1].x)&&At(r[1].y)),t?o?(o.p(r,s),s&3&&R(o,1)):(o=_r(r),o.c(),R(o,1),o.m(n.parentNode,n)):o&&(Ye(),Z(o,1,1,()=>{o=null}),Le())},i(r){i||(R(o),i=!0)},o(r){Z(o),i=!1},d(r){r&&X(n),o&&o.d(r)}}}const fg=()=>{};function dg(e,t,n){let i,o,r;const s=He(),{selectionRectMode:l,nodes:u,nodeLookup:a}=s;Q(e,l,g=>n(0,r=g)),Q(e,u,g=>n(9,i=g)),Q(e,a,g=>n(10,o=g));const c=ai();let d=null;function f(g){const p=i.filter(y=>y.selected);c("selectioncontextmenu",{nodes:p,event:g})}function h(g){const p=i.filter(y=>y.selected);c("selectionclick",{nodes:p,event:g})}const m=(g,p,y,S)=>{c("nodedrag",{event:g,targetNode:null,nodes:S})},_=(g,p,y,S)=>{c("nodedragstart",{event:g,targetNode:null,nodes:S})},b=(g,p,y,S)=>{c("nodedragstop",{event:g,targetNode:null,nodes:S})};return e.$$.update=()=>{e.$$.dirty&1537&&r==="nodes"&&n(1,d=mi(o,{filter:g=>!!g.selected}))},[r,d,s,l,u,a,c,f,h,i,o,m,_,b]}class hg extends ae{constructor(t){super(),ue(this,t,dg,cg,fe,{})}}const gg=hg;function st(e,t){let{enabled:n=!0,trigger:i,type:o="keydown"}=t;function r(s){const l=Array.isArray(i)?i:[i],u={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const a of l){const c={modifier:[],preventDefault:!1,enabled:!0,...a},{modifier:d,key:f,callback:h,preventDefault:m,enabled:_}=c;if(_){if(d.length&&!(Array.isArray(d)?d:[d]).map(p=>typeof p=="string"?[p]:p).some(p=>p.every(y=>u[y])))continue;if(s.key===f){m&&s.preventDefault();const b={node:e,trigger:c,originalEvent:s};e.dispatchEvent(new CustomEvent("shortcut",{detail:b})),h==null||h(b)}}}}return n&&e.addEventListener(o,r),{update:s=>{const{enabled:l=!0,type:u="keydown"}=s;n&&(!l||o!==u)?e.removeEventListener(o,r):!n&&l&&e.addEventListener(u,r),n=l,o=u,i=s.trigger},destroy:()=>{e.removeEventListener(o,r)}}}function mg(e){let t,n,i,o,r,s,l,u,a,c,d,f;return{c:oe,m(h,m){d||(f=[We(t=st.call(null,window,{trigger:Ae(e[0],e[11]),type:"keydown"})),We(n=st.call(null,window,{trigger:Ae(e[0],e[12]),type:"keyup"})),We(i=st.call(null,window,{trigger:Ae(e[1],e[13]),type:"keydown"})),We(o=st.call(null,window,{trigger:Ae(e[1],e[14]),type:"keyup"})),We(r=st.call(null,window,{trigger:Ae(e[2],e[15]),type:"keydown"})),We(s=st.call(null,window,{trigger:Ae(e[2],e[16]),type:"keyup"})),We(l=st.call(null,window,{trigger:Ae(e[3],e[17]),type:"keydown"})),We(u=st.call(null,window,{trigger:Ae(e[3],e[18]),type:"keyup"})),We(a=st.call(null,window,{trigger:Ae(e[4],e[19]),type:"keydown"})),We(c=st.call(null,window,{trigger:Ae(e[4],e[20]),type:"keyup"})),se(window,"blur",e[10]),se(window,"contextmenu",e[10])],d=!0)},p(h,[m]){t&&Ne(t.update)&&m&1&&t.update.call(null,{trigger:Ae(h[0],h[11]),type:"keydown"}),n&&Ne(n.update)&&m&1&&n.update.call(null,{trigger:Ae(h[0],h[12]),type:"keyup"}),i&&Ne(i.update)&&m&2&&i.update.call(null,{trigger:Ae(h[1],h[13]),type:"keydown"}),o&&Ne(o.update)&&m&2&&o.update.call(null,{trigger:Ae(h[1],h[14]),type:"keyup"}),r&&Ne(r.update)&&m&4&&r.update.call(null,{trigger:Ae(h[2],h[15]),type:"keydown"}),s&&Ne(s.update)&&m&4&&s.update.call(null,{trigger:Ae(h[2],h[16]),type:"keyup"}),l&&Ne(l.update)&&m&8&&l.update.call(null,{trigger:Ae(h[3],h[17]),type:"keydown"}),u&&Ne(u.update)&&m&8&&u.update.call(null,{trigger:Ae(h[3],h[18]),type:"keyup"}),a&&Ne(a.update)&&m&16&&a.update.call(null,{trigger:Ae(h[4],h[19]),type:"keydown"}),c&&Ne(c.update)&&m&16&&c.update.call(null,{trigger:Ae(h[4],h[20]),type:"keyup"})},i:oe,o:oe,d(h){d=!1,Ie(f)}}}function Wl(e){return e!==null&&typeof e=="object"}function _g(e){return Wl(e)?e.modifier||[]:[]}function yg(e){return e==null?"":Wl(e)?e.key:e}function Ae(e,t){return(Array.isArray(e)?e:[e]).map(i=>{const o=yg(i);return{key:o,modifier:_g(i),enabled:o!==null,callback:t}})}function bg(e,t,n){let{selectionKey:i="Shift"}=t,{multiSelectionKey:o=oi()?"Meta":"Control"}=t,{deleteKey:r="Backspace"}=t,{panActivationKey:s=" "}=t,{zoomActivationKey:l=oi()?"Meta":"Control"}=t;const{selectionKeyPressed:u,multiselectionKeyPressed:a,deleteKeyPressed:c,panActivationKeyPressed:d,zoomActivationKeyPressed:f,selectionRect:h}=He();function m(){h.set(null),u.set(!1),a.set(!1),c.set(!1),d.set(!1),f.set(!1)}const _=()=>u.set(!0),b=()=>u.set(!1),g=()=>a.set(!0),p=()=>a.set(!1),y=D=>{!(D.originalEvent.ctrlKey||D.originalEvent.metaKey||D.originalEvent.shiftKey)&&!Of(D.originalEvent)&&c.set(!0)},S=()=>c.set(!1),N=()=>d.set(!0),F=()=>d.set(!1),T=()=>f.set(!0),z=()=>f.set(!1);return e.$$set=D=>{"selectionKey"in D&&n(0,i=D.selectionKey),"multiSelectionKey"in D&&n(1,o=D.multiSelectionKey),"deleteKey"in D&&n(2,r=D.deleteKey),"panActivationKey"in D&&n(3,s=D.panActivationKey),"zoomActivationKey"in D&&n(4,l=D.zoomActivationKey)},[i,o,r,s,l,u,a,c,d,f,m,_,b,g,p,y,S,N,F,T,z]}class wg extends ae{constructor(t){super(),ue(this,t,bg,mg,fe,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const pg=wg,kg=e=>({}),yr=e=>({});function br(e){let t,n,i,o;const r=e[13].connectionLine,s=Ke(r,e,e[12],yr);let l=!e[2]&&wr(e);return{c(){t=Ee("svg"),n=Ee("g"),s&&s.c(),l&&l.c(),w(n,"class",i=Ce(["svelte-flow__connection",Bo(e[3].isValid)])),w(t,"width",e[5]),w(t,"height",e[6]),w(t,"class","svelte-flow__connectionline"),w(t,"style",e[0])},m(u,a){L(u,t,a),W(t,n),s&&s.m(n,null),l&&l.m(n,null),o=!0},p(u,a){s&&s.p&&(!o||a&4096)&&Ze(s,r,u,u[12],o?Fe(r,u[12],a,kg):qe(u[12]),yr),u[2]?l&&(l.d(1),l=null):l?l.p(u,a):(l=wr(u),l.c(),l.m(n,null)),(!o||a&8&&i!==(i=Ce(["svelte-flow__connection",Bo(u[3].isValid)])))&&w(n,"class",i),(!o||a&32)&&w(t,"width",u[5]),(!o||a&64)&&w(t,"height",u[6]),(!o||a&1)&&w(t,"style",u[0])},i(u){o||(R(s,u),o=!0)},o(u){Z(s,u),o=!1},d(u){u&&X(t),s&&s.d(u),l&&l.d()}}}function wr(e){let t;return{c(){t=Ee("path"),w(t,"d",e[4]),w(t,"style",e[1]),w(t,"fill","none"),w(t,"class","svelte-flow__connection-path")},m(n,i){L(n,t,i)},p(n,i){i&16&&w(t,"d",n[4]),i&2&&w(t,"style",n[1])},d(n){n&&X(t)}}}function vg(e){let t,n,i=e[3].inProgress&&br(e);return{c(){i&&i.c(),t=xe()},m(o,r){i&&i.m(o,r),L(o,t,r),n=!0},p(o,[r]){o[3].inProgress?i?(i.p(o,r),r&8&&R(i,1)):(i=br(o),i.c(),R(i,1),i.m(t.parentNode,t)):i&&(Ye(),Z(i,1,1,()=>{i=null}),Le())},i(o){n||(R(i),n=!0)},o(o){Z(i),n=!1},d(o){o&&X(t),i&&i.d(o)}}}function Sg(e,t,n){let i,o,r,s,{$$slots:l={},$$scope:u}=t,{containerStyle:a=""}=t,{style:c=""}=t,{isCustomComponent:d=!1}=t;const{width:f,height:h,connection:m,connectionLineType:_}=He();Q(e,f,g=>n(5,r=g)),Q(e,h,g=>n(6,s=g)),Q(e,m,g=>n(3,o=g)),Q(e,_,g=>n(11,i=g));let b=null;return e.$$set=g=>{"containerStyle"in g&&n(0,a=g.containerStyle),"style"in g&&n(1,c=g.style),"isCustomComponent"in g&&n(2,d=g.isCustomComponent),"$$scope"in g&&n(12,u=g.$$scope)},e.$$.update=()=>{if(e.$$.dirty&2060&&o.inProgress&&!d){const{from:g,to:p,fromPosition:y,toPosition:S}=o,N={sourceX:g.x,sourceY:g.y,sourcePosition:y,targetX:p.x,targetY:p.y,targetPosition:S};switch(i){case tn.Bezier:n(4,[b]=lo(N),b);break;case tn.Step:n(4,[b]=ri({...N,borderRadius:0}),b);break;case tn.SmoothStep:n(4,[b]=ri(N),b);break;default:n(4,[b]=vl(N),b)}}},[a,c,d,o,b,r,s,f,h,m,_,i,u,l]}class Eg extends ae{constructor(t){super(),ue(this,t,Sg,vg,fe,{containerStyle:0,style:1,isCustomComponent:2})}}const Cg=Eg;function Mg(e){let t,n,i;const o=e[8].default,r=Ke(o,e,e[7],null);let s=[{class:n=Ce(["svelte-flow__panel",e[1],...e[2]])},{style:e[0]},e[5]],l={};for(let u=0;u<s.length;u+=1)l=ke(l,s[u]);return{c(){t=G("div"),r&&r.c(),on(t,l),he(t,"pointer-events",e[3]?"none":"")},m(u,a){L(u,t,a),r&&r.m(t,null),i=!0},p(u,[a]){r&&r.p&&(!i||a&128)&&Ze(r,o,u,u[7],i?Fe(o,u[7],a,null):qe(u[7]),null),on(t,l=Mt(s,[(!i||a&6&&n!==(n=Ce(["svelte-flow__panel",u[1],...u[2]])))&&{class:n},(!i||a&1)&&{style:u[0]},a&32&&u[5]])),he(t,"pointer-events",u[3]?"none":"")},i(u){i||(R(r,u),i=!0)},o(u){Z(r,u),i=!1},d(u){u&&X(t),r&&r.d(u)}}}function Pg(e,t,n){let i;const o=["position","style","class"];let r=Me(t,o),s,{$$slots:l={},$$scope:u}=t,{position:a="top-right"}=t,{style:c=void 0}=t,{class:d=void 0}=t;const{selectionRectMode:f}=He();return Q(e,f,h=>n(3,s=h)),e.$$set=h=>{t=ke(ke({},t),Qe(h)),n(5,r=Me(t,o)),"position"in h&&n(6,a=h.position),"style"in h&&n(0,c=h.style),"class"in h&&n(1,d=h.class),"$$scope"in h&&n(7,u=h.$$scope)},e.$$.update=()=>{e.$$.dirty&64&&n(2,i=`${a}`.split("-"))},[c,d,i,s,f,r,a,u,l]}class Ng extends ae{constructor(t){super(),ue(this,t,Pg,Mg,fe,{position:6,style:0,class:1})}}const si=Ng;function pr(e){let t,n;return t=new si({props:{position:e[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[Og]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o&2&&(r.position=i[1]),o&4&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Og(e){let t;return{c(){t=G("a"),t.textContent="Svelte Flow",w(t,"href","https://svelteflow.dev"),w(t,"target","_blank"),w(t,"rel","noopener noreferrer"),w(t,"aria-label","Svelte Flow attribution")},m(n,i){L(n,t,i)},p:oe,d(n){n&&X(t)}}}function zg(e){var o;let t,n,i=!((o=e[0])!=null&&o.hideAttribution)&&pr(e);return{c(){i&&i.c(),t=xe()},m(r,s){i&&i.m(r,s),L(r,t,s),n=!0},p(r,[s]){var l;(l=r[0])!=null&&l.hideAttribution?i&&(Ye(),Z(i,1,1,()=>{i=null}),Le()):i?(i.p(r,s),s&1&&R(i,1)):(i=pr(r),i.c(),R(i,1),i.m(t.parentNode,t))},i(r){n||(R(i),n=!0)},o(r){Z(i),n=!1},d(r){r&&X(t),i&&i.d(r)}}}function Tg(e,t,n){let{proOptions:i=void 0}=t,{position:o="bottom-right"}=t;return e.$$set=r=>{"proOptions"in r&&n(0,i=r.proOptions),"position"in r&&n(1,o=r.position)},[i,o]}class Dg extends ae{constructor(t){super(),ue(this,t,Tg,zg,fe,{proOptions:0,position:1})}}const Ag=Dg;function kr(e,{nodeTypes:t,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:r,paneClickDistance:s}){t!==void 0&&e.setNodeTypes(t),n!==void 0&&e.setEdgeTypes(n),i!==void 0&&e.setMinZoom(i),o!==void 0&&e.setMaxZoom(o),r!==void 0&&e.setTranslateExtent(r),s!==void 0&&e.setPaneClickDistance(s)}const Hg=e=>Object.keys(e);function Ig(e,t){Hg(t).forEach(n=>{const i=t[n];i!==void 0&&e[n].set(i)})}function Xg(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Vg(e="light"){return Je("light",n=>{if(e!=="system"){n(e);return}const i=Xg(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const Yg=e=>({}),vr=e=>({slot:"connectionLine"});function Lg(e){let t;const n=e[75].connectionLine,i=Ke(n,e,e[99],vr);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),t=!0},p(o,r){i&&i.p&&(!t||r[3]&64)&&Ze(i,n,o,o[99],t?Fe(n,o[99],r,Yg):qe(o[99]),vr)},i(o){t||(R(i,o),t=!0)},o(o){Z(i,o),t=!1},d(o){i&&i.d(o)}}}function Rg(e){let t,n,i,o,r,s,l,u,a,c,d,f;return t=new ng({props:{defaultEdgeOptions:e[21]}}),t.$on("edgeclick",e[78]),t.$on("edgecontextmenu",e[79]),t.$on("edgemouseenter",e[80]),t.$on("edgemouseleave",e[81]),i=new Cg({props:{containerStyle:e[7],style:e[6],isCustomComponent:e[34].connectionLine,$$slots:{connectionLine:[Lg]},$$scope:{ctx:e}}}),a=new Ih({props:{nodeClickDistance:e[23]}}),a.$on("nodeclick",e[82]),a.$on("nodemouseenter",e[83]),a.$on("nodemousemove",e[84]),a.$on("nodemouseleave",e[85]),a.$on("nodedragstart",e[86]),a.$on("nodedrag",e[87]),a.$on("nodedragstop",e[88]),a.$on("nodecontextmenu",e[89]),d=new gg({}),d.$on("selectionclick",e[90]),d.$on("selectioncontextmenu",e[91]),d.$on("nodedragstart",e[92]),d.$on("nodedrag",e[93]),d.$on("nodedragstop",e[94]),{c(){ie(t.$$.fragment),n=le(),ie(i.$$.fragment),o=le(),r=G("div"),s=le(),l=G("div"),u=le(),ie(a.$$.fragment),c=le(),ie(d.$$.fragment),w(r,"class","svelte-flow__edgelabel-renderer"),w(l,"class","svelte-flow__viewport-portal")},m(h,m){te(t,h,m),L(h,n,m),te(i,h,m),L(h,o,m),L(h,r,m),L(h,s,m),L(h,l,m),L(h,u,m),te(a,h,m),L(h,c,m),te(d,h,m),f=!0},p(h,m){const _={};m[0]&2097152&&(_.defaultEdgeOptions=h[21]),t.$set(_);const b={};m[0]&128&&(b.containerStyle=h[7]),m[0]&64&&(b.style=h[6]),m[1]&8&&(b.isCustomComponent=h[34].connectionLine),m[3]&64&&(b.$$scope={dirty:m,ctx:h}),i.$set(b);const g={};m[0]&8388608&&(g.nodeClickDistance=h[23]),a.$set(g)},i(h){f||(R(t.$$.fragment,h),R(i.$$.fragment,h),R(a.$$.fragment,h),R(d.$$.fragment,h),f=!0)},o(h){Z(t.$$.fragment,h),Z(i.$$.fragment,h),Z(a.$$.fragment,h),Z(d.$$.fragment,h),f=!1},d(h){h&&(X(n),X(o),X(r),X(s),X(l),X(u),X(c)),ne(t,h),ne(i,h),ne(a,h),ne(d,h)}}}function Wg(e){let t,n,i,o;return t=new Ch({props:{$$slots:{default:[Rg]},$$scope:{ctx:e}}}),i=new ag({}),{c(){ie(t.$$.fragment),n=le(),ie(i.$$.fragment)},m(r,s){te(t,r,s),L(r,n,s),te(i,r,s),o=!0},p(r,s){const l={};s[0]&10485952|s[1]&8|s[3]&64&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){o||(R(t.$$.fragment,r),R(i.$$.fragment,r),o=!0)},o(r){Z(t.$$.fragment,r),Z(i.$$.fragment,r),o=!1},d(r){r&&X(n),ne(t,r),ne(i,r)}}}function Bg(e){let t,n;return t=new kh({props:{panOnDrag:e[17]===void 0?!0:e[17],selectionOnDrag:e[18],$$slots:{default:[Wg]},$$scope:{ctx:e}}}),t.$on("paneclick",e[95]),t.$on("panecontextmenu",e[96]),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o[0]&131072&&(r.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(r.selectionOnDrag=i[18]),o[0]&10485952|o[1]&8|o[3]&64&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Kg(e){let t,n,i,o,r,s,l,u,a,c,d,f;n=new pg({props:{selectionKey:e[1],deleteKey:e[5],panActivationKey:e[2],multiSelectionKey:e[3],zoomActivationKey:e[4]}}),o=new yh({props:{initialViewport:e[31],onMoveStart:e[8],onMove:e[9],onMoveEnd:e[10],panOnScrollMode:e[11]===void 0?ft.Free:e[11],preventScrolling:e[12]===void 0?!0:e[12],zoomOnScroll:e[13]===void 0?!0:e[13],zoomOnDoubleClick:e[14]===void 0?!0:e[14],zoomOnPinch:e[15]===void 0?!0:e[15],panOnScroll:e[16]===void 0?!1:e[16],panOnDrag:e[17]===void 0?!0:e[17],paneClickDistance:e[22]===void 0?0:e[22],$$slots:{default:[Bg]},$$scope:{ctx:e}}}),s=new Ag({props:{proOptions:e[20],position:e[19]}});const h=e[75].default,m=Ke(h,e,e[99],null);let _=[{style:e[24]},{class:u=Ce(["svelte-flow",e[25],e[30]])},{"data-testid":"svelte-flow__wrapper"},e[33],{role:"application"}],b={};for(let g=0;g<_.length;g+=1)b=ke(b,_[g]);return{c(){t=G("div"),ie(n.$$.fragment),i=le(),ie(o.$$.fragment),r=le(),ie(s.$$.fragment),l=le(),m&&m.c(),on(t,b),at(()=>e[98].call(t)),ce(t,"svelte-12wlba6",!0)},m(g,p){L(g,t,p),te(n,t,null),W(t,i),te(o,t,null),W(t,r),te(s,t,null),W(t,l),m&&m.m(t,null),e[97](t),a=ps(t,e[98].bind(t)),c=!0,d||(f=[se(t,"dragover",e[76]),se(t,"drop",e[77])],d=!0)},p(g,p){const y={};p[0]&2&&(y.selectionKey=g[1]),p[0]&32&&(y.deleteKey=g[5]),p[0]&4&&(y.panActivationKey=g[2]),p[0]&8&&(y.multiSelectionKey=g[3]),p[0]&16&&(y.zoomActivationKey=g[4]),n.$set(y);const S={};p[0]&256&&(S.onMoveStart=g[8]),p[0]&512&&(S.onMove=g[9]),p[0]&1024&&(S.onMoveEnd=g[10]),p[0]&2048&&(S.panOnScrollMode=g[11]===void 0?ft.Free:g[11]),p[0]&4096&&(S.preventScrolling=g[12]===void 0?!0:g[12]),p[0]&8192&&(S.zoomOnScroll=g[13]===void 0?!0:g[13]),p[0]&16384&&(S.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),p[0]&32768&&(S.zoomOnPinch=g[15]===void 0?!0:g[15]),p[0]&65536&&(S.panOnScroll=g[16]===void 0?!1:g[16]),p[0]&131072&&(S.panOnDrag=g[17]===void 0?!0:g[17]),p[0]&4194304&&(S.paneClickDistance=g[22]===void 0?0:g[22]),p[0]&10879168|p[1]&8|p[3]&64&&(S.$$scope={dirty:p,ctx:g}),o.$set(S);const N={};p[0]&1048576&&(N.proOptions=g[20]),p[0]&524288&&(N.position=g[19]),s.$set(N),m&&m.p&&(!c||p[3]&64)&&Ze(m,h,g,g[99],c?Fe(h,g[99],p,null):qe(g[99]),null),on(t,b=Mt(_,[(!c||p[0]&16777216)&&{style:g[24]},(!c||p[0]&1107296256&&u!==(u=Ce(["svelte-flow",g[25],g[30]])))&&{class:u},{"data-testid":"svelte-flow__wrapper"},p[1]&4&&g[33],{role:"application"}])),ce(t,"svelte-12wlba6",!0)},i(g){c||(R(n.$$.fragment,g),R(o.$$.fragment,g),R(s.$$.fragment,g),R(m,g),c=!0)},o(g){Z(n.$$.fragment,g),Z(o.$$.fragment,g),Z(s.$$.fragment,g),Z(m,g),c=!1},d(g){g&&X(t),ne(n),ne(o),ne(s),m&&m.d(g),e[97](null),a(),d=!1,Ie(f)}}}function Fg(e,t,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"];let r=Me(t,o),s,l,u=oe,a=()=>(u(),u=yn(z,E=>n(100,l=E)),z),c,d=oe,f=()=>(d(),d=yn(i,E=>n(30,c=E)),i);e.$$.on_destroy.push(()=>u()),e.$$.on_destroy.push(()=>d());let{$$slots:h={},$$scope:m}=t;const _=ms(h);let{id:b="1"}=t,{nodes:g}=t,{edges:p}=t,{fitView:y=void 0}=t,{fitViewOptions:S=void 0}=t,{minZoom:N=void 0}=t,{maxZoom:F=void 0}=t,{initialViewport:T=void 0}=t,{viewport:z=void 0}=t;a();let{nodeTypes:D=void 0}=t,{edgeTypes:Y=void 0}=t,{selectionKey:K=void 0}=t,{selectionMode:q=void 0}=t,{panActivationKey:j=void 0}=t,{multiSelectionKey:k=void 0}=t,{zoomActivationKey:I=void 0}=t,{nodesDraggable:v=void 0}=t,{nodesConnectable:C=void 0}=t,{nodeDragThreshold:A=void 0}=t,{elementsSelectable:M=void 0}=t,{snapGrid:B=void 0}=t,{deleteKey:U=void 0}=t,{connectionRadius:V=void 0}=t,{connectionLineType:$=void 0}=t,{connectionMode:O=Xt.Strict}=t,{connectionLineStyle:ee=""}=t,{connectionLineContainerStyle:de=""}=t,{onMoveStart:H=void 0}=t,{onMove:ge=void 0}=t,{onMoveEnd:_e=void 0}=t,{isValidConnection:be=void 0}=t,{translateExtent:pe=void 0}=t,{nodeExtent:ve=void 0}=t,{onlyRenderVisibleElements:Oe=void 0}=t,{panOnScrollMode:J=ft.Free}=t,{preventScrolling:Pe=!0}=t,{zoomOnScroll:Se=!0}=t,{zoomOnDoubleClick:ht=!0}=t,{zoomOnPinch:ot=!0}=t,{panOnScroll:rt=!1}=t,{panOnDrag:Pt=!0}=t,{selectionOnDrag:Nt=void 0}=t,{autoPanOnConnect:pt=!0}=t,{autoPanOnNodeDrag:kt=!0}=t,{onerror:vt=void 0}=t,{ondelete:St=void 0}=t,{onedgecreate:Ot=void 0}=t,{attributionPosition:$e=void 0}=t,{proOptions:lt=void 0}=t,{defaultEdgeOptions:P=void 0}=t,{width:Ge=void 0}=t,{height:De=void 0}=t,{colorMode:ze="light"}=t,{onconnect:Lt=void 0}=t,{onconnectstart:Rt=void 0}=t,{onconnectend:Wt=void 0}=t,{onbeforedelete:Bt=void 0}=t,{oninit:Et=void 0}=t,{nodeOrigin:zt=void 0}=t,{paneClickDistance:Tn=0}=t,{nodeClickDistance:fo=0}=t,{defaultMarkerColor:wi="#b1b1b7"}=t,{style:ho=void 0}=t,{class:go=void 0}=t,Dn,Kt,Ft;const Bl=l||T,Re=vs(co)?He():dh({nodes:x(g),edges:x(p),width:Ge,height:De,fitView:y,nodeOrigin:zt,nodeExtent:ve});wt(()=>(Re.width.set(Kt),Re.height.set(Ft),Re.domNode.set(Dn),Re.syncNodeStores(g),Re.syncEdgeStores(p),Re.syncViewport(z),y!==void 0&&Re.fitViewOnInit.set(y),S&&Re.fitViewOptions.set(S),kr(Re,{nodeTypes:D,edgeTypes:Y,minZoom:N,maxZoom:F,translateExtent:pe,paneClickDistance:Tn}),()=>{Re.reset()}));const{initialized:mo}=Re;Q(e,mo,E=>n(74,s=E));let pi=!1;function Kl(E){we.call(this,e,E)}function Fl(E){we.call(this,e,E)}function Zl(E){we.call(this,e,E)}function ql(E){we.call(this,e,E)}function Ul(E){we.call(this,e,E)}function Gl(E){we.call(this,e,E)}function Jl(E){we.call(this,e,E)}function jl(E){we.call(this,e,E)}function Ql(E){we.call(this,e,E)}function xl(E){we.call(this,e,E)}function $l(E){we.call(this,e,E)}function es(E){we.call(this,e,E)}function ts(E){we.call(this,e,E)}function ns(E){we.call(this,e,E)}function is(E){we.call(this,e,E)}function os(E){we.call(this,e,E)}function rs(E){we.call(this,e,E)}function ls(E){we.call(this,e,E)}function ss(E){we.call(this,e,E)}function us(E){we.call(this,e,E)}function as(E){we.call(this,e,E)}function cs(E){rn[E?"unshift":"push"](()=>{Dn=E,n(28,Dn)})}function fs(){Kt=this.clientWidth,Ft=this.clientHeight,n(26,Kt),n(27,Ft)}return e.$$set=E=>{t=ke(ke({},t),Qe(E)),n(33,r=Me(t,o)),"id"in E&&n(35,b=E.id),"nodes"in E&&n(36,g=E.nodes),"edges"in E&&n(37,p=E.edges),"fitView"in E&&n(38,y=E.fitView),"fitViewOptions"in E&&n(39,S=E.fitViewOptions),"minZoom"in E&&n(40,N=E.minZoom),"maxZoom"in E&&n(41,F=E.maxZoom),"initialViewport"in E&&n(42,T=E.initialViewport),"viewport"in E&&a(n(0,z=E.viewport)),"nodeTypes"in E&&n(43,D=E.nodeTypes),"edgeTypes"in E&&n(44,Y=E.edgeTypes),"selectionKey"in E&&n(1,K=E.selectionKey),"selectionMode"in E&&n(45,q=E.selectionMode),"panActivationKey"in E&&n(2,j=E.panActivationKey),"multiSelectionKey"in E&&n(3,k=E.multiSelectionKey),"zoomActivationKey"in E&&n(4,I=E.zoomActivationKey),"nodesDraggable"in E&&n(46,v=E.nodesDraggable),"nodesConnectable"in E&&n(47,C=E.nodesConnectable),"nodeDragThreshold"in E&&n(48,A=E.nodeDragThreshold),"elementsSelectable"in E&&n(49,M=E.elementsSelectable),"snapGrid"in E&&n(50,B=E.snapGrid),"deleteKey"in E&&n(5,U=E.deleteKey),"connectionRadius"in E&&n(51,V=E.connectionRadius),"connectionLineType"in E&&n(52,$=E.connectionLineType),"connectionMode"in E&&n(53,O=E.connectionMode),"connectionLineStyle"in E&&n(6,ee=E.connectionLineStyle),"connectionLineContainerStyle"in E&&n(7,de=E.connectionLineContainerStyle),"onMoveStart"in E&&n(8,H=E.onMoveStart),"onMove"in E&&n(9,ge=E.onMove),"onMoveEnd"in E&&n(10,_e=E.onMoveEnd),"isValidConnection"in E&&n(54,be=E.isValidConnection),"translateExtent"in E&&n(55,pe=E.translateExtent),"nodeExtent"in E&&n(56,ve=E.nodeExtent),"onlyRenderVisibleElements"in E&&n(57,Oe=E.onlyRenderVisibleElements),"panOnScrollMode"in E&&n(11,J=E.panOnScrollMode),"preventScrolling"in E&&n(12,Pe=E.preventScrolling),"zoomOnScroll"in E&&n(13,Se=E.zoomOnScroll),"zoomOnDoubleClick"in E&&n(14,ht=E.zoomOnDoubleClick),"zoomOnPinch"in E&&n(15,ot=E.zoomOnPinch),"panOnScroll"in E&&n(16,rt=E.panOnScroll),"panOnDrag"in E&&n(17,Pt=E.panOnDrag),"selectionOnDrag"in E&&n(18,Nt=E.selectionOnDrag),"autoPanOnConnect"in E&&n(58,pt=E.autoPanOnConnect),"autoPanOnNodeDrag"in E&&n(59,kt=E.autoPanOnNodeDrag),"onerror"in E&&n(60,vt=E.onerror),"ondelete"in E&&n(61,St=E.ondelete),"onedgecreate"in E&&n(62,Ot=E.onedgecreate),"attributionPosition"in E&&n(19,$e=E.attributionPosition),"proOptions"in E&&n(20,lt=E.proOptions),"defaultEdgeOptions"in E&&n(21,P=E.defaultEdgeOptions),"width"in E&&n(63,Ge=E.width),"height"in E&&n(64,De=E.height),"colorMode"in E&&n(65,ze=E.colorMode),"onconnect"in E&&n(66,Lt=E.onconnect),"onconnectstart"in E&&n(67,Rt=E.onconnectstart),"onconnectend"in E&&n(68,Wt=E.onconnectend),"onbeforedelete"in E&&n(69,Bt=E.onbeforedelete),"oninit"in E&&n(70,Et=E.oninit),"nodeOrigin"in E&&n(71,zt=E.nodeOrigin),"paneClickDistance"in E&&n(22,Tn=E.paneClickDistance),"nodeClickDistance"in E&&n(23,fo=E.nodeClickDistance),"defaultMarkerColor"in E&&n(72,wi=E.defaultMarkerColor),"style"in E&&n(24,ho=E.style),"class"in E&&n(25,go=E.class),"$$scope"in E&&n(99,m=E.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&201326592&&Kt!==void 0&&Ft!==void 0&&(Re.width.set(Kt),Re.height.set(Ft)),e.$$.dirty[2]&6400&&!pi&&s&&(Et==null||Et(),n(73,pi=!0)),e.$$.dirty[1]&2097135632|e.$$.dirty[2]&1777&&Ig(Re,{flowId:b,connectionLineType:$,connectionRadius:V,selectionMode:q,snapGrid:B,defaultMarkerColor:wi,nodesDraggable:v,nodesConnectable:C,elementsSelectable:M,onlyRenderVisibleElements:Oe,isValidConnection:be,autoPanOnConnect:pt,autoPanOnNodeDrag:kt,onerror:vt,ondelete:St,onedgecreate:Ot,connectionMode:O,nodeDragThreshold:A,onconnect:Lt,onconnectstart:Rt,onconnectend:Wt,onbeforedelete:Bt,nodeOrigin:zt}),e.$$.dirty[0]&4194304|e.$$.dirty[1]&16791040&&kr(Re,{nodeTypes:D,edgeTypes:Y,minZoom:N,maxZoom:F,translateExtent:pe,paneClickDistance:Tn}),e.$$.dirty[2]&8&&f(n(29,i=Vg(ze)))},[z,K,j,k,I,U,ee,de,H,ge,_e,J,Pe,Se,ht,ot,rt,Pt,Nt,$e,lt,P,Tn,fo,ho,go,Kt,Ft,Dn,i,c,Bl,mo,r,_,b,g,p,y,S,N,F,T,D,Y,q,v,C,A,M,B,V,$,O,be,pe,ve,Oe,pt,kt,vt,St,Ot,Ge,De,ze,Lt,Rt,Wt,Bt,Et,zt,wi,pi,s,h,Kl,Fl,Zl,ql,Ul,Gl,Jl,jl,Ql,xl,$l,es,ts,ns,is,os,rs,ls,ss,us,as,cs,fs,m]}class Zg extends ae{constructor(t){super(),ue(this,t,Fg,Kg,fe,{id:35,nodes:36,edges:37,fitView:38,fitViewOptions:39,minZoom:40,maxZoom:41,initialViewport:42,viewport:0,nodeTypes:43,edgeTypes:44,selectionKey:1,selectionMode:45,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:46,nodesConnectable:47,nodeDragThreshold:48,elementsSelectable:49,snapGrid:50,deleteKey:5,connectionRadius:51,connectionLineType:52,connectionMode:53,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:54,translateExtent:55,nodeExtent:56,onlyRenderVisibleElements:57,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:58,autoPanOnNodeDrag:59,onerror:60,ondelete:61,onedgecreate:62,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:63,height:64,colorMode:65,onconnect:66,onconnectstart:67,onconnectend:68,onbeforedelete:69,oninit:70,nodeOrigin:71,paneClickDistance:22,nodeClickDistance:23,defaultMarkerColor:72,style:24,class:25},null,[-1,-1,-1,-1])}}const qg=Zg,Ug=e=>({}),Sr=e=>({class:"button-svg"});function Gg(e){let t,n,i,o,r;const s=e[8].default,l=Ke(s,e,e[7],Sr);let u=[{type:"button"},{class:n=Ce(["svelte-flow__controls-button",e[0]])},e[6]],a={};for(let c=0;c<u.length;c+=1)a=ke(a,u[c]);return{c(){t=G("button"),l&&l.c(),on(t,a),he(t,"--xy-controls-button-background-color-props",e[1]),he(t,"--xy-controls-button-background-color-hover-props",e[2]),he(t,"--xy-controls-button-color-props",e[3]),he(t,"--xy-controls-button-color-hover-props",e[4]),he(t,"--xy-controls-button-border-color-props",e[5])},m(c,d){L(c,t,d),l&&l.m(t,null),t.autofocus&&t.focus(),i=!0,o||(r=se(t,"click",e[9]),o=!0)},p(c,[d]){l&&l.p&&(!i||d&128)&&Ze(l,s,c,c[7],i?Fe(s,c[7],d,Ug):qe(c[7]),Sr),on(t,a=Mt(u,[{type:"button"},(!i||d&1&&n!==(n=Ce(["svelte-flow__controls-button",c[0]])))&&{class:n},d&64&&c[6]])),he(t,"--xy-controls-button-background-color-props",c[1]),he(t,"--xy-controls-button-background-color-hover-props",c[2]),he(t,"--xy-controls-button-color-props",c[3]),he(t,"--xy-controls-button-color-hover-props",c[4]),he(t,"--xy-controls-button-border-color-props",c[5])},i(c){i||(R(l,c),i=!0)},o(c){Z(l,c),i=!1},d(c){c&&X(t),l&&l.d(c),o=!1,r()}}}function Jg(e,t,n){const i=["class","bgColor","bgColorHover","color","colorHover","borderColor"];let o=Me(t,i),{$$slots:r={},$$scope:s}=t,{class:l=void 0}=t,{bgColor:u=void 0}=t,{bgColorHover:a=void 0}=t,{color:c=void 0}=t,{colorHover:d=void 0}=t,{borderColor:f=void 0}=t;function h(m){we.call(this,e,m)}return e.$$set=m=>{t=ke(ke({},t),Qe(m)),n(6,o=Me(t,i)),"class"in m&&n(0,l=m.class),"bgColor"in m&&n(1,u=m.bgColor),"bgColorHover"in m&&n(2,a=m.bgColorHover),"color"in m&&n(3,c=m.color),"colorHover"in m&&n(4,d=m.colorHover),"borderColor"in m&&n(5,f=m.borderColor),"$$scope"in m&&n(7,s=m.$$scope)},[l,u,a,c,d,f,o,s,r,h]}class jg extends ae{constructor(t){super(),ue(this,t,Jg,Gg,fe,{class:0,bgColor:1,bgColorHover:2,color:3,colorHover:4,borderColor:5})}}const ui=jg;function Qg(e){let t,n;return{c(){t=Ee("svg"),n=Ee("path"),w(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),w(t,"xmlns","http://www.w3.org/2000/svg"),w(t,"viewBox","0 0 32 32")},m(i,o){L(i,t,o),W(t,n)},p:oe,i:oe,o:oe,d(i){i&&X(t)}}}class xg extends ae{constructor(t){super(),ue(this,t,null,Qg,fe,{})}}const $g=xg;function e1(e){let t,n;return{c(){t=Ee("svg"),n=Ee("path"),w(n,"d","M0 0h32v4.2H0z"),w(t,"xmlns","http://www.w3.org/2000/svg"),w(t,"viewBox","0 0 32 5")},m(i,o){L(i,t,o),W(t,n)},p:oe,i:oe,o:oe,d(i){i&&X(t)}}}class t1 extends ae{constructor(t){super(),ue(this,t,null,e1,fe,{})}}const n1=t1;function i1(e){let t,n;return{c(){t=Ee("svg"),n=Ee("path"),w(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),w(t,"xmlns","http://www.w3.org/2000/svg"),w(t,"viewBox","0 0 32 30")},m(i,o){L(i,t,o),W(t,n)},p:oe,i:oe,o:oe,d(i){i&&X(t)}}}class o1 extends ae{constructor(t){super(),ue(this,t,null,i1,fe,{})}}const r1=o1;function l1(e){let t,n;return{c(){t=Ee("svg"),n=Ee("path"),w(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),w(t,"xmlns","http://www.w3.org/2000/svg"),w(t,"viewBox","0 0 25 32")},m(i,o){L(i,t,o),W(t,n)},p:oe,i:oe,o:oe,d(i){i&&X(t)}}}class s1 extends ae{constructor(t){super(),ue(this,t,null,l1,fe,{})}}const u1=s1;function a1(e){let t,n;return{c(){t=Ee("svg"),n=Ee("path"),w(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),w(t,"xmlns","http://www.w3.org/2000/svg"),w(t,"viewBox","0 0 25 32")},m(i,o){L(i,t,o),W(t,n)},p:oe,i:oe,o:oe,d(i){i&&X(t)}}}class c1 extends ae{constructor(t){super(),ue(this,t,null,a1,fe,{})}}const f1=c1,d1=e=>({}),Er=e=>({}),h1=e=>({}),Cr=e=>({});function Mr(e){let t,n,i,o;const r=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:e[9]},e[17]];let s={$$slots:{default:[g1]},$$scope:{ctx:e}};for(let a=0;a<r.length;a+=1)s=ke(s,r[a]);t=new ui({props:s}),t.$on("click",e[18]);const l=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:e[10]},e[17]];let u={$$slots:{default:[m1]},$$scope:{ctx:e}};for(let a=0;a<l.length;a+=1)u=ke(u,l[a]);return i=new ui({props:u}),i.$on("click",e[19]),{c(){ie(t.$$.fragment),n=le(),ie(i.$$.fragment)},m(a,c){te(t,a,c),L(a,n,c),te(i,a,c),o=!0},p(a,c){const d=c[0]&131584?Mt(r,[r[0],r[1],r[2],c[0]&512&&{disabled:a[9]},c[0]&131072&&wn(a[17])]):{};c[1]&32&&(d.$$scope={dirty:c,ctx:a}),t.$set(d);const f=c[0]&132096?Mt(l,[l[0],l[1],l[2],c[0]&1024&&{disabled:a[10]},c[0]&131072&&wn(a[17])]):{};c[1]&32&&(f.$$scope={dirty:c,ctx:a}),i.$set(f)},i(a){o||(R(t.$$.fragment,a),R(i.$$.fragment,a),o=!0)},o(a){Z(t.$$.fragment,a),Z(i.$$.fragment,a),o=!1},d(a){a&&X(n),ne(t,a),ne(i,a)}}}function g1(e){let t,n;return t=new $g({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function m1(e){let t,n;return t=new n1({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Pr(e){let t,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},e[17]];let o={$$slots:{default:[_1]},$$scope:{ctx:e}};for(let r=0;r<i.length;r+=1)o=ke(o,i[r]);return t=new ui({props:o}),t.$on("click",e[20]),{c(){ie(t.$$.fragment)},m(r,s){te(t,r,s),n=!0},p(r,s){const l=s[0]&131072?Mt(i,[i[0],i[1],i[2],wn(r[17])]):{};s[1]&32&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){ne(t,r)}}}function _1(e){let t,n;return t=new r1({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function Nr(e){let t,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},e[17]];let o={$$slots:{default:[w1]},$$scope:{ctx:e}};for(let r=0;r<i.length;r+=1)o=ke(o,i[r]);return t=new ui({props:o}),t.$on("click",e[21]),{c(){ie(t.$$.fragment)},m(r,s){te(t,r,s),n=!0},p(r,s){const l=s[0]&131072?Mt(i,[i[0],i[1],i[2],wn(r[17])]):{};s[0]&256|s[1]&32&&(l.$$scope={dirty:s,ctx:r}),t.$set(l)},i(r){n||(R(t.$$.fragment,r),n=!0)},o(r){Z(t.$$.fragment,r),n=!1},d(r){ne(t,r)}}}function y1(e){let t,n;return t=new u1({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function b1(e){let t,n;return t=new f1({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function w1(e){let t,n,i,o;const r=[b1,y1],s=[];function l(u,a){return u[8]?0:1}return t=l(e),n=s[t]=r[t](e),{c(){n.c(),i=xe()},m(u,a){s[t].m(u,a),L(u,i,a),o=!0},p(u,a){let c=t;t=l(u),t!==c&&(Ye(),Z(s[c],1,1,()=>{s[c]=null}),Le(),n=s[t],n||(n=s[t]=r[t](u),n.c()),R(n,1),n.m(i.parentNode,i))},i(u){o||(R(n),o=!0)},o(u){Z(n),o=!1},d(u){u&&X(i),s[t].d(u)}}}function p1(e){let t,n,i,o,r,s;const l=e[35].before,u=Ke(l,e,e[36],Cr);let a=e[1]&&Mr(e),c=e[2]&&Pr(e),d=e[3]&&Nr(e);const f=e[35].default,h=Ke(f,e,e[36],null),m=e[35].after,_=Ke(m,e,e[36],Er);return{c(){u&&u.c(),t=le(),a&&a.c(),n=le(),c&&c.c(),i=le(),d&&d.c(),o=le(),h&&h.c(),r=le(),_&&_.c()},m(b,g){u&&u.m(b,g),L(b,t,g),a&&a.m(b,g),L(b,n,g),c&&c.m(b,g),L(b,i,g),d&&d.m(b,g),L(b,o,g),h&&h.m(b,g),L(b,r,g),_&&_.m(b,g),s=!0},p(b,g){u&&u.p&&(!s||g[1]&32)&&Ze(u,l,b,b[36],s?Fe(l,b[36],g,h1):qe(b[36]),Cr),b[1]?a?(a.p(b,g),g[0]&2&&R(a,1)):(a=Mr(b),a.c(),R(a,1),a.m(n.parentNode,n)):a&&(Ye(),Z(a,1,1,()=>{a=null}),Le()),b[2]?c?(c.p(b,g),g[0]&4&&R(c,1)):(c=Pr(b),c.c(),R(c,1),c.m(i.parentNode,i)):c&&(Ye(),Z(c,1,1,()=>{c=null}),Le()),b[3]?d?(d.p(b,g),g[0]&8&&R(d,1)):(d=Nr(b),d.c(),R(d,1),d.m(o.parentNode,o)):d&&(Ye(),Z(d,1,1,()=>{d=null}),Le()),h&&h.p&&(!s||g[1]&32)&&Ze(h,f,b,b[36],s?Fe(f,b[36],g,null):qe(b[36]),null),_&&_.p&&(!s||g[1]&32)&&Ze(_,m,b,b[36],s?Fe(m,b[36],g,d1):qe(b[36]),Er)},i(b){s||(R(u,b),R(a),R(c),R(d),R(h,b),R(_,b),s=!0)},o(b){Z(u,b),Z(a),Z(c),Z(d),Z(h,b),Z(_,b),s=!1},d(b){b&&(X(t),X(n),X(i),X(o),X(r)),u&&u.d(b),a&&a.d(b),c&&c.d(b),d&&d.d(b),h&&h.d(b),_&&_.d(b)}}}function k1(e){let t,n;return t=new si({props:{class:Ce(["svelte-flow__controls",e[7],e[6]]),position:e[0],"data-testid":"svelte-flow__controls","aria-label":e[4]??"Svelte Flow controls",style:e[5],$$slots:{default:[p1]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o[0]&192&&(r.class=Ce(["svelte-flow__controls",i[7],i[6]])),o[0]&1&&(r.position=i[0]),o[0]&16&&(r["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&32&&(r.style=i[5]),o[0]&1806|o[1]&32&&(r.$$scope={dirty:o,ctx:i}),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function v1(e,t,n){let i,o,r,s,l,u,a,c,d,f,{$$slots:h={},$$scope:m}=t,{position:_="bottom-left"}=t,{showZoom:b=!0}=t,{showFitView:g=!0}=t,{showLock:p=!0}=t,{buttonBgColor:y=void 0}=t,{buttonBgColorHover:S=void 0}=t,{buttonColor:N=void 0}=t,{buttonColorHover:F=void 0}=t,{buttonBorderColor:T=void 0}=t,{ariaLabel:z=void 0}=t,{style:D=void 0}=t,{orientation:Y="vertical"}=t,{fitViewOptions:K=void 0}=t,{class:q=""}=t;const{zoomIn:j,zoomOut:k,fitView:I,viewport:v,minZoom:C,maxZoom:A,nodesDraggable:M,nodesConnectable:B,elementsSelectable:U}=He();Q(e,v,H=>n(30,u=H)),Q(e,C,H=>n(31,a=H)),Q(e,A,H=>n(29,l=H)),Q(e,M,H=>n(34,f=H)),Q(e,B,H=>n(33,d=H)),Q(e,U,H=>n(32,c=H));const V={bgColor:y,bgColorHover:S,color:N,colorHover:F,borderColor:T},$=()=>{j()},O=()=>{k()},ee=()=>{I(K)},de=()=>{n(8,i=!i),M.set(i),B.set(i),U.set(i)};return e.$$set=H=>{"position"in H&&n(0,_=H.position),"showZoom"in H&&n(1,b=H.showZoom),"showFitView"in H&&n(2,g=H.showFitView),"showLock"in H&&n(3,p=H.showLock),"buttonBgColor"in H&&n(22,y=H.buttonBgColor),"buttonBgColorHover"in H&&n(23,S=H.buttonBgColorHover),"buttonColor"in H&&n(24,N=H.buttonColor),"buttonColorHover"in H&&n(25,F=H.buttonColorHover),"buttonBorderColor"in H&&n(26,T=H.buttonBorderColor),"ariaLabel"in H&&n(4,z=H.ariaLabel),"style"in H&&n(5,D=H.style),"orientation"in H&&n(27,Y=H.orientation),"fitViewOptions"in H&&n(28,K=H.fitViewOptions),"class"in H&&n(6,q=H.class),"$$scope"in H&&n(36,m=H.$$scope)},e.$$.update=()=>{e.$$.dirty[1]&14&&n(8,i=f||d||c),e.$$.dirty[0]&1073741824|e.$$.dirty[1]&1&&n(10,o=u.zoom<=a),e.$$.dirty[0]&1610612736&&n(9,r=u.zoom>=l),e.$$.dirty[0]&134217728&&n(7,s=Y==="horizontal"?"horizontal":"vertical")},[_,b,g,p,z,D,q,s,i,r,o,v,C,A,M,B,U,V,$,O,ee,de,y,S,N,F,T,Y,K,l,u,a,c,d,f,h,m]}class S1 extends ae{constructor(t){super(),ue(this,t,v1,k1,fe,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}const E1=S1;var yt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(yt||(yt={}));function C1(e){let t,n;return{c(){t=Ee("circle"),w(t,"cx",e[0]),w(t,"cy",e[0]),w(t,"r",e[0]),w(t,"class",n=Ce(["svelte-flow__background-pattern","dots",e[1]]))},m(i,o){L(i,t,o)},p(i,[o]){o&1&&w(t,"cx",i[0]),o&1&&w(t,"cy",i[0]),o&1&&w(t,"r",i[0]),o&2&&n!==(n=Ce(["svelte-flow__background-pattern","dots",i[1]]))&&w(t,"class",n)},i:oe,o:oe,d(i){i&&X(t)}}}function M1(e,t,n){let{radius:i=5}=t,{class:o=""}=t;return e.$$set=r=>{"radius"in r&&n(0,i=r.radius),"class"in r&&n(1,o=r.class)},[i,o]}class P1 extends ae{constructor(t){super(),ue(this,t,M1,C1,fe,{radius:0,class:1})}}const N1=P1;function O1(e){let t,n,i;return{c(){t=Ee("path"),w(t,"stroke-width",e[0]),w(t,"d",n=`M${e[1][0]/2} 0 V${e[1][1]} M0 ${e[1][1]/2} H${e[1][0]}`),w(t,"class",i=Ce(["svelte-flow__background-pattern",e[2],e[3]]))},m(o,r){L(o,t,r)},p(o,[r]){r&1&&w(t,"stroke-width",o[0]),r&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&w(t,"d",n),r&12&&i!==(i=Ce(["svelte-flow__background-pattern",o[2],o[3]]))&&w(t,"class",i)},i:oe,o:oe,d(o){o&&X(t)}}}function z1(e,t,n){let{lineWidth:i=1}=t,{dimensions:o}=t,{variant:r=void 0}=t,{class:s=""}=t;return e.$$set=l=>{"lineWidth"in l&&n(0,i=l.lineWidth),"dimensions"in l&&n(1,o=l.dimensions),"variant"in l&&n(2,r=l.variant),"class"in l&&n(3,s=l.class)},[i,o,r,s]}class T1 extends ae{constructor(t){super(),ue(this,t,z1,O1,fe,{lineWidth:0,dimensions:1,variant:2,class:3})}}const D1=T1;function A1(e){let t,n;return t=new D1({props:{dimensions:e[6],variant:e[0],lineWidth:e[1],class:e[4]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o&64&&(r.dimensions=i[6]),o&1&&(r.variant=i[0]),o&2&&(r.lineWidth=i[1]),o&16&&(r.class=i[4]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function H1(e){let t,n;return t=new N1({props:{radius:e[7]/2,class:e[4]}}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},p(i,o){const r={};o&128&&(r.radius=i[7]/2),o&16&&(r.class=i[4]),t.$set(r)},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function I1(e){let t,n,i,o,r,s,l,u,a,c,d,f,h;const m=[H1,A1],_=[];function b(g,p){return g[14]?0:1}return i=b(e),o=_[i]=m[i](e),{c(){t=Ee("svg"),n=Ee("pattern"),o.c(),c=Ee("rect"),w(n,"id",e[11]),w(n,"x",r=e[9].x%e[8][0]),w(n,"y",s=e[9].y%e[8][1]),w(n,"width",l=e[8][0]),w(n,"height",u=e[8][1]),w(n,"patternUnits","userSpaceOnUse"),w(n,"patternTransform",a=`translate(-${e[10][0]},-${e[10][1]})`),w(c,"x","0"),w(c,"y","0"),w(c,"width","100%"),w(c,"height","100%"),w(c,"fill",d=`url(#${e[11]})`),w(t,"class",f=yo(Ce(["svelte-flow__background",e[5]]))+" svelte-1r7pe8d"),w(t,"data-testid","svelte-flow__background"),he(t,"--xy-background-color-props",e[2]),he(t,"--xy-background-pattern-color-props",e[3])},m(g,p){L(g,t,p),W(t,n),_[i].m(n,null),W(t,c),h=!0},p(g,[p]){o.p(g,p),(!h||p&2048)&&w(n,"id",g[11]),(!h||p&768&&r!==(r=g[9].x%g[8][0]))&&w(n,"x",r),(!h||p&768&&s!==(s=g[9].y%g[8][1]))&&w(n,"y",s),(!h||p&256&&l!==(l=g[8][0]))&&w(n,"width",l),(!h||p&256&&u!==(u=g[8][1]))&&w(n,"height",u),(!h||p&1024&&a!==(a=`translate(-${g[10][0]},-${g[10][1]})`))&&w(n,"patternTransform",a),(!h||p&2048&&d!==(d=`url(#${g[11]})`))&&w(c,"fill",d),(!h||p&32&&f!==(f=yo(Ce(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&w(t,"class",f),p&4&&he(t,"--xy-background-color-props",g[2]),p&8&&he(t,"--xy-background-pattern-color-props",g[3])},i(g){h||(R(o),h=!0)},o(g){Z(o),h=!1},d(g){g&&X(t),_[i].d()}}}const X1={[yt.Dots]:1,[yt.Lines]:1,[yt.Cross]:6};function V1(e,t,n){let i,o,r,s,l,u,a,{id:c=void 0}=t,{variant:d=yt.Dots}=t,{gap:f=20}=t,{size:h=1}=t,{lineWidth:m=1}=t,{bgColor:_=void 0}=t,{patternColor:b=void 0}=t,{patternClass:g=void 0}=t,{class:p=""}=t;const{viewport:y,flowId:S}=He();Q(e,y,D=>n(9,u=D)),Q(e,S,D=>n(18,a=D));const N=h||X1[d],F=d===yt.Dots,T=d===yt.Cross,z=Array.isArray(f)?f:[f,f];return e.$$set=D=>{"id"in D&&n(15,c=D.id),"variant"in D&&n(0,d=D.variant),"gap"in D&&n(16,f=D.gap),"size"in D&&n(17,h=D.size),"lineWidth"in D&&n(1,m=D.lineWidth),"bgColor"in D&&n(2,_=D.bgColor),"patternColor"in D&&n(3,b=D.patternColor),"patternClass"in D&&n(4,g=D.patternClass),"class"in D&&n(5,p=D.class)},e.$$.update=()=>{e.$$.dirty&294912&&n(11,i=`background-pattern-${a}-${c||""}`),e.$$.dirty&512&&n(8,o=[z[0]*u.zoom||1,z[1]*u.zoom||1]),e.$$.dirty&512&&n(7,r=N*u.zoom),e.$$.dirty&384&&n(6,s=T?[r,r]:o),e.$$.dirty&192&&n(10,l=F?[r/2,r/2]:[s[0]/2,s[1]/2])},[d,m,_,b,g,p,s,r,o,u,l,i,y,S,F,c,f,h,a]}class Y1 extends ae{constructor(t){super(),ue(this,t,V1,I1,fe,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const L1=Y1;function R1(){const{edges:e}=He();return e}const nt=re([]),cn=re([]),Ti=re([]);function W1(e){let t,n,i=`translate(-50%, -50%) translate(${e[3]}px,${e[2]}px)`,o,r;return{c(){t=G("div"),n=G("button"),n.textContent="",w(n,"class","edgeButton svelte-1zq02j"),w(t,"class","edgeButtonContainer nodrag nopan svelte-1zq02j"),he(t,"transform",i)},m(s,l){L(s,t,l),W(t,n),o||(r=se(n,"click",e[5]),o=!0)},p(s,l){l&12&&i!==(i=`translate(-50%, -50%) translate(${s[3]}px,${s[2]}px)`)&&he(t,"transform",i)},d(s){s&&X(t),o=!1,r()}}}function B1(e){let t,n,i,o;return t=new zn({props:{path:e[4],markerEnd:e[0],style:e[1]}}),i=new Hl({props:{$$slots:{default:[W1]},$$scope:{ctx:e}}}),{c(){ie(t.$$.fragment),n=le(),ie(i.$$.fragment)},m(r,s){te(t,r,s),L(r,n,s),te(i,r,s),o=!0},p(r,[s]){const l={};s&16&&(l.path=r[4]),s&1&&(l.markerEnd=r[0]),s&2&&(l.style=r[1]),t.$set(l);const u={};s&32780&&(u.$$scope={dirty:s,ctx:r}),i.$set(u)},i(r){o||(R(t.$$.fragment,r),R(i.$$.fragment,r),o=!0)},o(r){Z(t.$$.fragment,r),Z(i.$$.fragment,r),o=!1},d(r){r&&X(n),ne(t,r),ne(i,r)}}}function K1(e,t,n){let i,o,r;const s=["id","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition","markerEnd","style"];Me(t,s);let{id:l}=t,{sourceX:u}=t,{sourceY:a}=t,{sourcePosition:c}=t,{targetX:d}=t,{targetY:f}=t,{targetPosition:h}=t,{markerEnd:m=void 0}=t,{style:_=void 0}=t;const b=R1(),g=()=>b.update(p=>p.filter(y=>y.id!==l));return e.$$set=p=>{t=ke(ke({},t),Qe(p)),n(14,Me(t,s)),"id"in p&&n(6,l=p.id),"sourceX"in p&&n(7,u=p.sourceX),"sourceY"in p&&n(8,a=p.sourceY),"sourcePosition"in p&&n(9,c=p.sourcePosition),"targetX"in p&&n(10,d=p.targetX),"targetY"in p&&n(11,f=p.targetY),"targetPosition"in p&&n(12,h=p.targetPosition),"markerEnd"in p&&n(0,m=p.markerEnd),"style"in p&&n(1,_=p.style)},e.$$.update=()=>{e.$$.dirty&8064&&n(4,[i,o,r]=lo({sourceX:u,sourceY:a,sourcePosition:c,targetX:d,targetY:f,targetPosition:h}),i,(n(3,o),n(7,u),n(8,a),n(9,c),n(10,d),n(11,f),n(12,h)),(n(2,r),n(7,u),n(8,a),n(9,c),n(10,d),n(11,f),n(12,h)))},[m,_,r,o,i,g,l,u,a,c,d,f,h]}class F1 extends ae{constructor(t){super(),ue(this,t,K1,B1,fe,{id:6,sourceX:7,sourceY:8,sourcePosition:9,targetX:10,targetY:11,targetPosition:12,markerEnd:0,style:1})}}function Z1(e){let t,n=e[1]?"Connect "+e[1]+" to "+e[2]+" nodes":"Connect One to Many",i,o,r,s;return{c(){t=G("button"),i=ye(n),w(t,"class","button"),t.disabled=o=!e[0],w(t,"title","Select exactly one Input channel and one or more Output channels. Use Shift and Shift Control for multiple selection.")},m(l,u){L(l,t,u),W(t,i),r||(s=se(t,"click",e[3]),r=!0)},p(l,[u]){u&6&&n!==(n=l[1]?"Connect "+l[1]+" to "+l[2]+" nodes":"Connect One to Many")&&Te(i,n),u&1&&o!==(o=!l[0])&&(t.disabled=o)},i:oe,o:oe,d(l){l&&X(t),r=!1,s()}}}function q1(e,t,n){let i,o;Q(e,cn,c=>n(4,i=c)),Q(e,nt,c=>n(5,o=c));let r=!1,s=null,l=null;function u(){const c=i.filter(h=>h.type==="input"&&h.selected),d=i.filter(h=>h.type==="output"&&h.selected);if(!(c.length==1&&d.length>0))return;let f=[];c.forEach(h=>{d.forEach(m=>{f.push({source:h.id,target:m.id,id:`xy-edge__${h.id}-${m.id}`,type:"button"})})}),nt.set([...f,...o])}function a(){const c=i.filter(h=>h.type==="input"&&h.selected);console.log("inputs",c,c.length);const d=i.filter(h=>h.type==="output"&&h.selected);console.log("outputs",d,d.length);const f=c.length==1&&d.length>0;if(console.log("check selected",f),c.length==1&&d.length>0){let h=c[0];return n(1,s=h.attribute),n(2,l=d.length),!0}else return n(1,s=null),n(2,l=null),!1}return e.$$.update=()=>{e.$$.dirty&16&&(a()?n(0,r=!0):n(0,r=!1))},[r,s,l,u,i]}class U1 extends ae{constructor(t){super(),ue(this,t,q1,Z1,fe,{})}}function G1(e){let t;return{c(){t=ye("Select Outputs with same attribute")},m(n,i){L(n,t,i)},p:oe,d(n){n&&X(t)}}}function J1(e){let t,n,i,o;return{c(){t=ye("Selected "),n=ye(e[1]),i=le(),o=ye(e[2])},m(r,s){L(r,t,s),L(r,n,s),L(r,i,s),L(r,o,s)},p(r,s){s&2&&Te(n,r[1]),s&4&&Te(o,r[2])},d(r){r&&(X(t),X(n),X(i),X(o))}}}function j1(e){let t,n;return{c(){t=ye("Click to select all "),n=ye(e[2])},m(i,o){L(i,t,o),L(i,n,o)},p(i,o){o&4&&Te(n,i[2])},d(i){i&&(X(t),X(n))}}}function Q1(e){let t,n,i,o;function r(u,a){return u[0]?j1:u[1]?J1:G1}let s=r(e),l=s(e);return{c(){t=G("button"),l.c(),w(t,"class","button"),t.disabled=n=!e[0],w(t,"title","Selects other unconnected Output nodes with the same attribute as a single selected Output node.")},m(u,a){L(u,t,a),l.m(t,null),i||(o=se(t,"click",e[3]),i=!0)},p(u,[a]){s===(s=r(u))&&l?l.p(u,a):(l.d(1),l=s(u),l&&(l.c(),l.m(t,null))),a&1&&n!==(n=!u[0])&&(t.disabled=n)},i:oe,o:oe,d(u){u&&X(t),l.d(),i=!1,o()}}}function x1(e,t,n){let i,o;Q(e,cn,c=>n(4,i=c)),Q(e,nt,c=>n(5,o=c));let r=!1,s,l;function u(){const c=i.filter(d=>d.type==="output"&&d.selected);if(console.log("check single output",c.length),c.length==1){const d=c[0];return n(2,l=d.attribute),!0}else return n(2,l=null),!1}function a(){const c=i.filter(f=>f.type==="output"&&f.selected);if(console.log("selecting same nodes",c),c.length!=1)return;n(2,l=c[0].attribute),console.log("selected attribute",l);const d=i.filter(f=>!o.some(h=>h.source===f.id||h.target===f.id)&&f.type==="output"&&f.attribute===l);n(1,s=d.length),n(0,r=!1),console.log("nodes ready",d),d.forEach(f=>{f.selected=!0})}return e.$$.update=()=>{e.$$.dirty&16&&(u()?(n(0,r=!0),n(1,s=null)):(n(1,s=null),n(0,r=!1)))},[r,s,l,a,i]}class $1 extends ae{constructor(t){super(),ue(this,t,x1,Q1,fe,{})}}function e0(e){let t,n;return t=new U1({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function t0(e){let t,n;return t=new $1({}),{c(){ie(t.$$.fragment)},m(i,o){te(t,i,o),n=!0},i(i){n||(R(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){ne(t,i)}}}function n0(e){let t,n,i,o,r,s,l,u;return t=new E1({}),i=new si({props:{position:"top-right",$$slots:{default:[e0]},$$scope:{ctx:e}}}),r=new si({props:{position:"bottom-right",$$slots:{default:[t0]},$$scope:{ctx:e}}}),l=new L1({props:{bgColor:"#1d72aa",variant:yt.Dots}}),{c(){ie(t.$$.fragment),n=le(),ie(i.$$.fragment),o=le(),ie(r.$$.fragment),s=le(),ie(l.$$.fragment)},m(a,c){te(t,a,c),L(a,n,c),te(i,a,c),L(a,o,c),te(r,a,c),L(a,s,c),te(l,a,c),u=!0},p(a,c){const d={};c&256&&(d.$$scope={dirty:c,ctx:a}),i.$set(d);const f={};c&256&&(f.$$scope={dirty:c,ctx:a}),r.$set(f)},i(a){u||(R(t.$$.fragment,a),R(i.$$.fragment,a),R(r.$$.fragment,a),R(l.$$.fragment,a),u=!0)},o(a){Z(t.$$.fragment,a),Z(i.$$.fragment,a),Z(r.$$.fragment,a),Z(l.$$.fragment,a),u=!1},d(a){a&&(X(n),X(o),X(s)),ne(t,a),ne(i,a),ne(r,a),ne(l,a)}}}function i0(e){let t,n,i;return n=new qg({props:{nodes:cn,edges:nt,edgeTypes:e[0],snapGrid:e[1],proOptions:e[2],fitView:!0,$$slots:{default:[n0]},$$scope:{ctx:e}}}),{c(){t=G("div"),ie(n.$$.fragment),he(t,"height","100vh")},m(o,r){L(o,t,r),te(n,t,null),i=!0},p(o,[r]){const s={};r&256&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(R(n.$$.fragment,o),i=!0)},o(o){Z(n.$$.fragment,o),i=!1},d(o){o&&X(t),ne(n)}}}function o0(e,t,n){let i,o;Q(e,nt,c=>n(3,i=c)),Q(e,Ti,c=>n(4,o=c));const r={button:F1};async function s(){try{const d=await(await fetch("/dmx_mapping",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();console.log("Success:",d)}catch(c){console.error("Error:",c)}}function l(){console.log("updating",nt);let c=[];i.forEach(d=>{let f=Number(d.source.replace("i","")),h=Number(d.target.replace("o",""));c.push([f,h]),d.type="button"}),Ti.set(c),console.log("dmx mapping",Ti),nt.set(i),s()}const u=[25,25],a={hideAttribution:!0};return e.$$.update=()=>{e.$$.dirty&8&&l()},[r,u,a,i]}class r0 extends ae{constructor(t){super(),ue(this,t,o0,i0,fe,{})}}function l0(e){let t,n,i,o,r,s,l,u,a,c,d,f;return{c(){t=G("div"),n=G("div"),i=G("label"),o=G("input"),r=ye(`
            Upload GDTF Files`),s=le(),l=G("div"),u=G("div"),a=G("div"),c=ye(e[0]),w(o,"class","file-input"),w(o,"type","file"),w(o,"name","resume"),w(o,"id","gdtfinput"),w(o,"accept",".gdtf"),o.multiple=!0,w(i,"class","file file-label button has-text-centered"),w(n,"class","column"),w(t,"class","columns"),w(u,"class","column"),w(l,"class","columns")},m(h,m){L(h,t,m),W(t,n),W(n,i),W(i,o),W(i,r),L(h,s,m),L(h,l,m),W(l,u),W(u,a),W(a,c),d||(f=se(o,"change",e[1]),d=!0)},p(h,[m]){m&1&&Te(c,h[0])},i:oe,o:oe,d(h){h&&(X(t),X(s),X(l)),d=!1,f()}}}function s0(e,t,n){let i=[],o="";async function r(){try{const u=await fetch("/files");u.ok?i=(await u.json()).files:console.error("Failed to fetch uploaded files.")}catch(u){console.error("Error fetching uploaded files:",u)}}async function s(u){n(0,o="");const a=new FormData;Array.from(u).forEach(c=>{a.append("files",c)});try{const c=await fetch("/upload",{method:"POST",body:a});if(c.ok){const d=await c.json();n(0,o="Files uploaded successfully: "+d.filenames.join(", "))}else n(0,o="File upload failed.")}catch(c){console.error("Error uploading files:",c),n(0,o="An error occurred while uploading the files.")}r()}function l(u){const a=u.target.files;a.length>0&&s(a)}return wt(()=>{}),[o,l]}class u0 extends ae{constructor(t){super(),ue(this,t,s0,l0,fe,{})}}function Or(e,t,n){const i=e.slice();return i[16]=t[n],i}function zr(e,t,n){const i=e.slice();return i[16]=t[n],i}function Tr(e){let t,n=e[16].slice(0,-5)+"",i,o;return{c(){t=G("option"),i=ye(n),t.__value=o=e[16],Ve(t,t.__value)},m(r,s){L(r,t,s),W(t,i)},p(r,s){s&16&&n!==(n=r[16].slice(0,-5)+"")&&Te(i,n),s&16&&o!==(o=r[16])&&(t.__value=o,Ve(t,t.__value))},d(r){r&&X(t)}}}function Dr(e){let t,n=e[16].mode_name+"",i,o,r=e[16].mode_dmx_channel_count+"",s,l,u;return{c(){t=G("option"),i=ye(n),o=ye(" ("),s=ye(r),l=ye(`ch)
                    `),t.__value=u=e[16].mode_dmx_channels[0],Ve(t,t.__value)},m(a,c){L(a,t,c),W(t,i),W(t,o),W(t,s),W(t,l)},p(a,c){c&4&&n!==(n=a[16].mode_name+"")&&Te(i,n),c&4&&r!==(r=a[16].mode_dmx_channel_count+"")&&Te(s,r),c&4&&u!==(u=a[16].mode_dmx_channels[0])&&(t.__value=u,Ve(t,t.__value))},d(a){a&&X(t)}}}function a0(e){let t,n,i,o,r,s,l,u,a,c,d,f,h,m,_=Xe(e[4]),b=[];for(let y=0;y<_.length;y+=1)b[y]=Tr(zr(e,_,y));let g=Xe(e[2]),p=[];for(let y=0;y<g.length;y+=1)p[y]=Dr(Or(e,g,y));return{c(){t=G("div"),n=G("div"),i=G("div"),o=G("select"),r=G("option"),s=ye("Select "),l=ye(e[0]),u=ye(" fixture");for(let y=0;y<b.length;y+=1)b[y].c();a=le(),c=G("div"),d=G("div"),f=G("select");for(let y=0;y<p.length;y+=1)p[y].c();r.__value="",Ve(r,r.__value),r.disabled=!0,r.selected=!0,e[1]===void 0&&at(()=>e[8].call(o)),w(i,"class","select is-fullwidth"),w(n,"class","column"),e[3]===void 0&&at(()=>e[9].call(f)),w(d,"class","select is-fullwidth"),w(c,"class","column"),w(t,"class","columns")},m(y,S){L(y,t,S),W(t,n),W(n,i),W(i,o),W(o,r),W(r,s),W(r,l),W(r,u);for(let N=0;N<b.length;N+=1)b[N]&&b[N].m(o,null);je(o,e[1],!0),W(t,a),W(t,c),W(c,d),W(d,f);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(f,null);je(f,e[3],!0),h||(m=[se(o,"change",e[8]),se(o,"change",e[6]),se(o,"focus",e[5]),se(f,"change",e[9]),se(f,"change",e[7])],h=!0)},p(y,[S]){if(S&1&&Te(l,y[0]),S&16){_=Xe(y[4]);let N;for(N=0;N<_.length;N+=1){const F=zr(y,_,N);b[N]?b[N].p(F,S):(b[N]=Tr(F),b[N].c(),b[N].m(o,null))}for(;N<b.length;N+=1)b[N].d(1);b.length=_.length}if(S&18&&je(o,y[1]),S&4){g=Xe(y[2]);let N;for(N=0;N<g.length;N+=1){const F=Or(y,g,N);p[N]?p[N].p(F,S):(p[N]=Dr(F),p[N].c(),p[N].m(f,null))}for(;N<p.length;N+=1)p[N].d(1);p.length=g.length}S&12&&je(f,y[3])},i:oe,o:oe,d(y){y&&X(t),Jt(b,y),Jt(p,y),h=!1,Ie(m)}}}function c0(e,t,n){let i;Q(e,cn,y=>n(13,i=y));let{node_mode:o}=t,r="",s=[],l=[],u=[],a=[],c=[],d=[];async function f(){try{const y=await fetch("/files");if(y.ok){const S=await y.json();n(4,u=S.files),console.log(u)}else console.error("Failed to fetch uploaded files.")}catch(y){console.error("Error fetching uploaded files:",y)}}async function h(){try{const S=await(await fetch("/modes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fixture:r})})).json();n(2,s=S.data),console.log("Success:",s)}catch(y){console.error("Error:",y)}}async function m(){try{const S=await(await fetch("/default",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();console.log("Success:",S)}catch(y){console.error("Error:",y)}}function _(){console.log("mode",l),a=[];let y,S,N,F,T,z;d=[];const D=i.filter(K=>K.type==="input"),Y=i.filter(K=>K.type==="output");o==="input"?(y=0,S=50,N=me.Right,F="input",T="i",z="sourcePosition",c=Y):(y=500,S=50,N=me.Left,F="output",T="o",z="targetPosition",c=D),l.forEach((K,q)=>{a.push({id:T+K.dmx,dmx:K.dmx,default:K.default,attribute:K.id,geometry:K.geometry,type:F,[z]:N,data:{label:`${K.dmx} ${K.geometry}: ${K.id}`},address:`${K.geometry}_${K.id}`,position:{x:y,y:S*q}}),console.log(`DMX: ${K.dmx}, Geo: ${K.geometry}, Attr: ${K.id}`),d.push(K.default)}),console.log("nodes",a),b(),o==="output"&&m()}function b(){nn(cn,i=[...a,...c],i)}wt(()=>{f()});function g(){r=jt(this),n(1,r),n(4,u)}function p(){l=jt(this),n(3,l),n(2,s)}return e.$$set=y=>{"node_mode"in y&&n(0,o=y.node_mode)},[o,r,s,l,u,f,h,_,g,p]}class Ar extends ae{constructor(t){super(),ue(this,t,c0,a0,fe,{node_mode:0})}}function f0(e){let t,n,i,o,r,s,l,u;return{c(){t=G("div"),n=G("div"),i=G("button"),i.textContent="Auto Mapping",o=le(),r=G("div"),s=G("button"),s.textContent="Clear Mapping",w(i,"class","button is-fullwidth"),w(n,"class","column"),w(s,"class","button is-fullwidth"),w(r,"class","column"),w(t,"class","columns")},m(a,c){L(a,t,c),W(t,n),W(n,i),W(t,o),W(t,r),W(r,s),l||(u=[se(i,"click",e[0]),se(s,"click",e[1])],l=!0)},p:oe,i:oe,o:oe,d(a){a&&X(t),l=!1,Ie(u)}}}function d0(e,t,n){let i;Q(e,cn,s=>n(2,i=s));function o(){let s=[];const l=i.filter(a=>a.type==="input"),u=i.filter(a=>a.type==="output");l.forEach(a=>{u.forEach(c=>{a.address===c.address&&s.push({source:a.id,target:c.id,id:`xy-edge__${a.id}-${c.id}`,type:"button"})})}),nt.set(s)}function r(){nt.set([])}return[o,r]}class h0 extends ae{constructor(t){super(),ue(this,t,d0,f0,fe,{})}}function Hr(e,t,n){const i=e.slice();return i[9]=t[n],i}function Ir(e){let t,n=e[9].slice(0,-5)+"",i,o;return{c(){t=G("option"),i=ye(n),t.__value=o=e[9],Ve(t,t.__value)},m(r,s){L(r,t,s),W(t,i)},p(r,s){s&4&&n!==(n=r[9].slice(0,-5)+"")&&Te(i,n),s&4&&o!==(o=r[9])&&(t.__value=o,Ve(t,t.__value))},d(r){r&&X(t)}}}function g0(e){let t,n,i,o,r,s,l,u,a,c,d,f,h,m,_,b,g,p,y,S,N,F=Xe(e[2]),T=[];for(let z=0;z<F.length;z+=1)T[z]=Ir(Hr(e,F,z));return{c(){t=G("div"),n=G("div"),i=G("input"),o=le(),r=G("div"),s=G("button"),l=ye("Save Mapping"),a=le(),c=G("div"),d=G("div"),f=G("div"),h=G("select"),m=G("option"),m.textContent="Select Mapping";for(let z=0;z<T.length;z+=1)T[z].c();_=le(),b=G("div"),g=G("button"),p=ye("Load Mapping"),w(i,"class","input"),w(i,"mid","textInput"),w(i,"placeholder","FileName"),w(i,"type","text"),w(n,"class","column"),s.disabled=u=!e[3].length||e[1]=="",w(s,"class","button is-fullwidth"),w(r,"class","column"),w(t,"class","columns"),m.__value="",Ve(m,m.__value),m.disabled=!0,m.selected=!0,e[0]===void 0&&at(()=>e[7].call(h)),w(f,"class","select is-fullwidth"),w(d,"class","column"),w(g,"class","button is-fullwidth"),g.disabled=y=e[0]=="",w(b,"class","column"),w(c,"class","columns")},m(z,D){L(z,t,D),W(t,n),W(n,i),Ve(i,e[1]),W(t,o),W(t,r),W(r,s),W(s,l),L(z,a,D),L(z,c,D),W(c,d),W(d,f),W(f,h),W(h,m);for(let Y=0;Y<T.length;Y+=1)T[Y]&&T[Y].m(h,null);je(h,e[0],!0),W(c,_),W(c,b),W(b,g),W(g,p),S||(N=[se(i,"input",e[6]),se(s,"click",e[4]),se(h,"change",e[7]),se(g,"click",e[5])],S=!0)},p(z,[D]){if(D&2&&i.value!==z[1]&&Ve(i,z[1]),D&10&&u!==(u=!z[3].length||z[1]=="")&&(s.disabled=u),D&4){F=Xe(z[2]);let Y;for(Y=0;Y<F.length;Y+=1){const K=Hr(z,F,Y);T[Y]?T[Y].p(K,D):(T[Y]=Ir(K),T[Y].c(),T[Y].m(h,null))}for(;Y<T.length;Y+=1)T[Y].d(1);T.length=F.length}D&5&&je(h,z[0]),D&5&&y!==(y=z[0]=="")&&(g.disabled=y)},i:oe,o:oe,d(z){z&&(X(t),X(a),X(c)),Jt(T,z),S=!1,Ie(N)}}}function m0(e,t,n){let i;Q(e,nt,f=>n(3,i=f));let o="",r="",s=[];async function l(){try{console.log("mapping",i,"filename",r);const h=await(await fetch("/mapping_save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mapping:i,filename:r})})).json();console.log("Success:",h)}catch(f){console.error("Error:",f)}a()}async function u(){try{const h=await(await fetch("/mapping_get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:o})})).json();nn(nt,i=h.mapping,i),console.log("Success:",h)}catch(f){console.error("Error:",f)}}async function a(){try{const f=await fetch("/mapping_list");if(f.ok){const h=await f.json();n(2,s=h.files),console.log(s)}else console.error("Failed to fetch uploaded files.")}catch(f){console.error("Error fetching uploaded files:",f)}}wt(()=>{a()});function c(){r=this.value,n(1,r)}function d(){o=jt(this),n(0,o),n(2,s)}return[o,r,s,i,l,u,c,d]}class _0 extends ae{constructor(t){super(),ue(this,t,m0,g0,fe,{})}}function y0(e){let t,n,i,o,r,s,l,u,a,c,d,f,h,m,_,b,g,p,y,S,N,F,T,z=e[0]?"Hide Extras":"Show Extras",D,Y,K,q,j,k,I,v;s=new Ar({props:{node_mode:"input"}}),u=new Ar({props:{node_mode:"output"}}),c=new h0({}),f=new _0({}),_=new As({}),g=new Rs({}),y=new u0({});function C(M){e[3](M)}let A={};return e[1]!==void 0&&(A.dmx_mapping=e[1]),q=new r0({props:A}),rn.push(()=>Ns(q,"dmx_mapping",C)),{c(){t=G("div"),n=G("div"),i=G("div"),i.textContent="gDetour",o=le(),r=G("div"),ie(s.$$.fragment),l=le(),ie(u.$$.fragment),a=le(),ie(c.$$.fragment),d=le(),ie(f.$$.fragment),h=le(),m=G("div"),ie(_.$$.fragment),b=le(),ie(g.$$.fragment),p=le(),ie(y.$$.fragment),S=le(),N=G("div"),F=G("div"),T=G("button"),D=ye(z),Y=le(),K=G("div"),ie(q.$$.fragment),w(i,"class","title is-2 has-text-centered"),w(r,"class","extras-container svelte-17nkj1a"),ce(r,"hidden",e[0]),w(m,"class","extras-container svelte-17nkj1a"),ce(m,"hidden",!e[0]),w(T,"class","button is-fullwidth"),w(F,"class","column"),w(N,"class","columns"),w(n,"class","column is-4 has-background-success"),w(K,"class","column has-background-info-dark"),w(t,"class","columns")},m(M,B){L(M,t,B),W(t,n),W(n,i),W(n,o),W(n,r),te(s,r,null),W(r,l),te(u,r,null),W(r,a),te(c,r,null),W(r,d),te(f,r,null),W(n,h),W(n,m),te(_,m,null),W(m,b),te(g,m,null),W(m,p),te(y,m,null),W(n,S),W(n,N),W(N,F),W(F,T),W(T,D),W(t,Y),W(t,K),te(q,K,null),k=!0,I||(v=se(T,"click",e[2]),I=!0)},p(M,[B]){(!k||B&1)&&ce(r,"hidden",M[0]),(!k||B&1)&&ce(m,"hidden",!M[0]),(!k||B&1)&&z!==(z=M[0]?"Hide Extras":"Show Extras")&&Te(D,z);const U={};!j&&B&2&&(j=!0,U.dmx_mapping=M[1],Cs(()=>j=!1)),q.$set(U)},i(M){k||(R(s.$$.fragment,M),R(u.$$.fragment,M),R(c.$$.fragment,M),R(f.$$.fragment,M),R(_.$$.fragment,M),R(g.$$.fragment,M),R(y.$$.fragment,M),R(q.$$.fragment,M),k=!0)},o(M){Z(s.$$.fragment,M),Z(u.$$.fragment,M),Z(c.$$.fragment,M),Z(f.$$.fragment,M),Z(_.$$.fragment,M),Z(g.$$.fragment,M),Z(y.$$.fragment,M),Z(q.$$.fragment,M),k=!1},d(M){M&&X(t),ne(s),ne(u),ne(c),ne(f),ne(_),ne(g),ne(y),ne(q),I=!1,v()}}}function b0(e,t,n){let i=!1,o=[];function r(){n(0,i=!i)}function s(l){o=l,n(1,o)}return[i,o,r,s]}class w0 extends ae{constructor(t){super(),ue(this,t,b0,y0,fe,{})}}new w0({target:document.getElementById("app")});
